{"ast":null,"code":"import _slicedToArray from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nexport function injectParams(location) {\n  var keys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var options = arguments.length > 2 ? arguments[2] : undefined;\n\n  if (!options) {\n    return addParams(location);\n  }\n\n  var url = new URL(window.location.href);\n  var currentParams = url.searchParams;\n  var params = [];\n\n  for (var _i = 0, _Object$entries = Object.entries(keys); _i < _Object$entries.length; _i++) {\n    var _ref3 = _Object$entries[_i];\n\n    var _ref2 = _slicedToArray(_ref3, 2);\n\n    var _key = _ref2[0];\n    var param = _ref2[1];\n    var value = options[_key] || currentParams.get(param);\n\n    switch (typeof value) {\n      case 'string':\n        params.push(\"\".concat(param, \"=\").concat(value));\n        break;\n\n      case 'number':\n        if (!Number.isFinite(value)) {\n          params.push(\"\".concat(param, \"=\").concat(value));\n        }\n\n        break;\n\n      default: // ignore\n\n    }\n  }\n\n  return addParams(location, params.join('&'));\n}\nexport function injectPagination(location, options) {\n  if (!options) {\n    return addParams(location);\n  }\n\n  var params = [];\n\n  if (options.page) {\n    params.push(\"page=\".concat(options.page));\n  }\n\n  if (options.sortBy) {\n    params.push(\"sort_by=\".concat(options.sortBy));\n\n    if (options.sortOrder) {\n      params.push(\"sort_order=\".concat(options.sortOrder));\n    }\n  }\n\n  return addParams(location, params.join('&'));\n}\n\nfunction addParams(location) {\n  var qs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (qs) {\n    var questionMarkPosition = location.indexOf('?');\n\n    if (questionMarkPosition === -1) {\n      location += '?' + qs;\n    } else if (questionMarkPosition === location.length - 1) {\n      location += qs;\n    } else {\n      location += '&' + qs;\n    }\n  }\n\n  return location;\n}\n\nexport function getValue(value, defaultValue) {\n  if (value === undefined || value === null) {\n    return defaultValue;\n  }\n\n  return value;\n}\nexport function getPage(value) {\n  var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n  if (!value) {\n    return defaultValue;\n  }\n\n  if (typeof value === 'string') {\n    value = Number(value);\n  }\n\n  if (Number.isNaN(value)) {\n    return defaultValue;\n  }\n\n  return Math.max(defaultValue, value);\n}\nexport function getSortBy(value, values, defaultValue) {\n  if (values.includes(value)) {\n    return value;\n  }\n\n  return defaultValue;\n}\nexport function getSortOrder(value) {\n  var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'desc';\n\n  if (!['desc', 'asc'].includes(value || '')) {\n    return defaultValue;\n  }\n\n  return value;\n}","map":{"version":3,"sources":["/opt/work/NZ_test/src/routing/utils.ts"],"names":["injectParams","location","keys","options","addParams","url","URL","window","href","currentParams","searchParams","params","Object","entries","key","param","value","get","push","Number","isFinite","join","injectPagination","page","sortBy","sortOrder","qs","questionMarkPosition","indexOf","length","getValue","defaultValue","undefined","getPage","isNaN","Math","max","getSortBy","values","includes","getSortOrder"],"mappings":";AAEA,OAAO,SAASA,YAAT,CAAsBC,QAAtB,EAAgH;AAAA,MAAxEC,IAAwE,uEAAtC,EAAsC;AAAA,MAAlCC,OAAkC;;AACrH,MAAI,CAACA,OAAL,EAAc;AACZ,WAAOC,SAAS,CAACH,QAAD,CAAhB;AACD;;AAED,MAAMI,GAAQ,GAAG,IAAIC,GAAJ,CAAQC,MAAM,CAACN,QAAP,CAAgBO,IAAxB,CAAjB;AACA,MAAMC,aAA8B,GAAGJ,GAAG,CAACK,YAA3C;AACA,MAAMC,MAAgB,GAAG,EAAzB;;AAEA,qCAA2BC,MAAM,CAACC,OAAP,CAAeX,IAAf,CAA3B,qCAAiD;AAAA;;AAAA;;AAAA,QAArCY,IAAqC;AAAA,QAAhCC,KAAgC;AAC/C,QAAMC,KAAK,GAAGb,OAAO,CAACW,IAAD,CAAP,IAAgBL,aAAa,CAACQ,GAAd,CAAkBF,KAAlB,CAA9B;;AACA,YAAQ,OAAOC,KAAf;AACE,WAAK,QAAL;AACEL,QAAAA,MAAM,CAACO,IAAP,WAAeH,KAAf,cAAwBC,KAAxB;AACA;;AACF,WAAK,QAAL;AACE,YAAI,CAACG,MAAM,CAACC,QAAP,CAAgBJ,KAAhB,CAAL,EAA6B;AAC3BL,UAAAA,MAAM,CAACO,IAAP,WAAeH,KAAf,cAAwBC,KAAxB;AACD;;AACD;;AACF,cATF,CAUE;;AAVF;AAYD;;AAED,SAAOZ,SAAS,CAACH,QAAD,EAAWU,MAAM,CAACU,IAAP,CAAY,GAAZ,CAAX,CAAhB;AACD;AAED,OAAO,SAASC,gBAAT,CAA0BrB,QAA1B,EAA4CE,OAA5C,EAAyE;AAC9E,MAAI,CAACA,OAAL,EAAc;AACZ,WAAOC,SAAS,CAACH,QAAD,CAAhB;AACD;;AAED,MAAMU,MAAM,GAAG,EAAf;;AACA,MAAIR,OAAO,CAACoB,IAAZ,EAAkB;AAChBZ,IAAAA,MAAM,CAACO,IAAP,gBAAoBf,OAAO,CAACoB,IAA5B;AACD;;AACD,MAAIpB,OAAO,CAACqB,MAAZ,EAAoB;AAClBb,IAAAA,MAAM,CAACO,IAAP,mBAAuBf,OAAO,CAACqB,MAA/B;;AACA,QAAIrB,OAAO,CAACsB,SAAZ,EAAuB;AACrBd,MAAAA,MAAM,CAACO,IAAP,sBAA0Bf,OAAO,CAACsB,SAAlC;AACD;AACF;;AAED,SAAOrB,SAAS,CAACH,QAAD,EAAWU,MAAM,CAACU,IAAP,CAAY,GAAZ,CAAX,CAAhB;AACD;;AAED,SAASjB,SAAT,CAAmBH,QAAnB,EAA+D;AAAA,MAA1ByB,EAA0B,uEAAN,IAAM;;AAC7D,MAAIA,EAAJ,EAAQ;AACN,QAAMC,oBAAoB,GAAG1B,QAAQ,CAAC2B,OAAT,CAAiB,GAAjB,CAA7B;;AACA,QAAID,oBAAoB,KAAK,CAAC,CAA9B,EAAiC;AAC/B1B,MAAAA,QAAQ,IAAI,MAAMyB,EAAlB;AACD,KAFD,MAEO,IAAIC,oBAAoB,KAAK1B,QAAQ,CAAC4B,MAAT,GAAkB,CAA/C,EAAkD;AACvD5B,MAAAA,QAAQ,IAAIyB,EAAZ;AACD,KAFM,MAEA;AACLzB,MAAAA,QAAQ,IAAI,MAAMyB,EAAlB;AACD;AACF;;AAED,SAAOzB,QAAP;AACD;;AAED,OAAO,SAAS6B,QAAT,CAAqBd,KAArB,EAAgEe,YAAhE,EAAkF;AACvF,MAAIf,KAAK,KAAKgB,SAAV,IAAuBhB,KAAK,KAAK,IAArC,EAA2C;AACzC,WAAOe,YAAP;AACD;;AAED,SAAOf,KAAP;AACD;AAED,OAAO,SAASiB,OAAT,CAAiBjB,KAAjB,EAAsF;AAAA,MAA1Be,YAA0B,uEAAH,CAAG;;AAC3F,MAAI,CAACf,KAAL,EAAY;AACV,WAAOe,YAAP;AACD;;AAED,MAAI,OAAOf,KAAP,KAAiB,QAArB,EAA+B;AAC7BA,IAAAA,KAAK,GAAGG,MAAM,CAACH,KAAD,CAAd;AACD;;AAED,MAAIG,MAAM,CAACe,KAAP,CAAalB,KAAb,CAAJ,EAAyB;AACvB,WAAOe,YAAP;AACD;;AAED,SAAOI,IAAI,CAACC,GAAL,CAASL,YAAT,EAAuBf,KAAvB,CAAP;AACD;AAED,OAAO,SAASqB,SAAT,CAAqCrB,KAArC,EAAuEsB,MAAvE,EAAoFP,YAApF,EAAqG;AAC1G,MAAIO,MAAM,CAACC,QAAP,CAAgBvB,KAAhB,CAAJ,EAAmC;AACjC,WAAOA,KAAP;AACD;;AAED,SAAOe,YAAP;AACD;AAED,OAAO,SAASS,YAAT,CAAsBxB,KAAtB,EAA+G;AAAA,MAAvDe,YAAuD,uEAAxB,MAAwB;;AACpH,MAAI,CAAC,CAAC,MAAD,EAAS,KAAT,EAAgBQ,QAAhB,CAAyBvB,KAAK,IAAI,EAAlC,CAAL,EAA4C;AAC1C,WAAOe,YAAP;AACD;;AAED,SAAOf,KAAP;AACD","sourcesContent":["export type PaginationOptions = { page?: number; sortBy?: string; sortOrder?: 'asc' | 'desc' }\n\nexport function injectParams(location: string, keys: { [key: string]: string } = {}, options?: { [key: string]: any }) {\n  if (!options) {\n    return addParams(location)\n  }\n\n  const url: URL = new URL(window.location.href)\n  const currentParams: URLSearchParams = url.searchParams\n  const params: string[] = []\n\n  for (const [key, param] of Object.entries(keys)) {\n    const value = options[key] || currentParams.get(param)\n    switch (typeof value) {\n      case 'string':\n        params.push(`${param}=${value}`)\n        break\n      case 'number':\n        if (!Number.isFinite(value)) {\n          params.push(`${param}=${value}`)\n        }\n        break\n      default:\n      // ignore\n    }\n  }\n\n  return addParams(location, params.join('&'))\n}\n\nexport function injectPagination(location: string, options?: PaginationOptions) {\n  if (!options) {\n    return addParams(location)\n  }\n\n  const params = []\n  if (options.page) {\n    params.push(`page=${options.page}`)\n  }\n  if (options.sortBy) {\n    params.push(`sort_by=${options.sortBy}`)\n    if (options.sortOrder) {\n      params.push(`sort_order=${options.sortOrder}`)\n    }\n  }\n\n  return addParams(location, params.join('&'))\n}\n\nfunction addParams(location: string, qs: string | null = null) {\n  if (qs) {\n    const questionMarkPosition = location.indexOf('?')\n    if (questionMarkPosition === -1) {\n      location += '?' + qs\n    } else if (questionMarkPosition === location.length - 1) {\n      location += qs\n    } else {\n      location += '&' + qs\n    }\n  }\n\n  return location\n}\n\nexport function getValue<V>(value: string | number | null | undefined, defaultValue?: V) {\n  if (value === undefined || value === null) {\n    return defaultValue\n  }\n\n  return value\n}\n\nexport function getPage(value: string | number | null | undefined, defaultValue: number = 1) {\n  if (!value) {\n    return defaultValue\n  }\n\n  if (typeof value === 'string') {\n    value = Number(value)\n  }\n\n  if (Number.isNaN(value)) {\n    return defaultValue\n  }\n\n  return Math.max(defaultValue, value)\n}\n\nexport function getSortBy<V extends string>(value: string | null | undefined, values: V[], defaultValue: V) {\n  if (values.includes(value as any)) {\n    return value as V\n  }\n\n  return defaultValue\n}\n\nexport function getSortOrder(value: string | null | undefined, defaultValue: 'desc' | 'asc' = 'desc'): 'desc' | 'asc' {\n  if (!['desc', 'asc'].includes(value || '')) {\n    return defaultValue\n  }\n\n  return value as 'desc' | 'asc'\n}\n"]},"metadata":{},"sourceType":"module"}