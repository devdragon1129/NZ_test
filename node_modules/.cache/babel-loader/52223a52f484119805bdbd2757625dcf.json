{"ast":null,"code":"import _defineProperty from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/opt/work/NZ_test/src/components/ItemEditorPage/RightPanel/RightPanel.tsx\";\nimport * as React from 'react';\nimport equal from 'fast-deep-equal';\nimport { Loader, Dropdown, Button } from 'decentraland-ui';\nimport { Network, WearableCategory } from '@dcl/schemas';\nimport { NetworkButton } from 'decentraland-dapps/dist/containers';\nimport { t } from 'decentraland-dapps/dist/modules/translation/utils';\nimport { getAnalytics } from 'decentraland-dapps/dist/modules/analytics/utils';\nimport { isThirdParty } from 'lib/urn';\nimport ItemImage from 'components/ItemImage';\nimport ItemProvider from 'components/ItemProvider';\nimport ConfirmDelete from 'components/ConfirmDelete';\nimport Icon from 'components/Icon';\nimport { getMissingBodyShapeType, getRarities, getWearableCategories, getOverridesCategories, isOwner, resizeImage, getEmoteCategories } from 'modules/item/utils';\nimport { isLocked } from 'modules/collection/utils';\nimport { computeHashes } from 'modules/deployment/contentUtils';\nimport { ItemType, ITEM_DESCRIPTION_MAX_LENGTH, ITEM_NAME_MAX_LENGTH, THUMBNAIL_PATH } from 'modules/item/types';\nimport Collapsable from './Collapsable';\nimport Input from './Input';\nimport Select from './Select';\nimport MultiSelect from './MultiSelect';\nimport Tags from './Tags';\nimport './RightPanel.css';\n\nvar RightPanel = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(RightPanel, _React$PureComponent);\n\n  function RightPanel() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, RightPanel);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(RightPanel)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.analytics = getAnalytics();\n    _this.state = _this.getInitialState();\n    _this.thumbnailInput = React.createRef();\n\n    _this.handleDeleteItem = function () {\n      var onDeleteItem = _this.props.onDeleteItem;\n      var selectedItem = _this.props.selectedItem;\n      onDeleteItem(selectedItem);\n    };\n\n    _this.handleAddRepresentationToItem = function () {\n      var _this$props = _this.props,\n          selectedItem = _this$props.selectedItem,\n          onOpenModal = _this$props.onOpenModal;\n      onOpenModal('CreateSingleItemModal', {\n        item: selectedItem,\n        addRepresentation: true\n      });\n    };\n\n    _this.handleChangeItemFile = function () {\n      var _this$props2 = _this.props,\n          selectedItem = _this$props2.selectedItem,\n          onOpenModal = _this$props2.onOpenModal;\n      onOpenModal('CreateSingleItemModal', {\n        item: selectedItem,\n        changeItemFile: true\n      });\n    };\n\n    _this.handleChangeName = function (name) {\n      _this.setState({\n        name: name,\n        isDirty: _this.isDirty({\n          name: name\n        })\n      });\n    };\n\n    _this.handleChangeDescription = function (description) {\n      _this.setState({\n        description: description,\n        isDirty: _this.isDirty({\n          description: description\n        })\n      });\n    };\n\n    _this.handleChangeRarity = function (rarity) {\n      _this.setState({\n        rarity: rarity,\n        isDirty: _this.isDirty({\n          rarity: rarity\n        })\n      });\n    };\n\n    _this.handleChangeCategory = function (category) {\n      var data = _objectSpread({}, _this.state.data, {\n        category: category\n      }); // when changing the category to SKIN we hide everything else\n\n\n      if (category === WearableCategory.SKIN) {\n        data = _this.setReplaces(data, []);\n        data = _this.setHides(data, []);\n      }\n\n      _this.setState({\n        data: data,\n        isDirty: _this.isDirty({\n          data: data\n        })\n      });\n    };\n\n    _this.handleChangeReplaces = function (replaces) {\n      var data = _this.setReplaces(_this.state.data, replaces);\n\n      _this.setState({\n        data: data,\n        isDirty: _this.isDirty({\n          data: data\n        })\n      });\n    };\n\n    _this.handleChangeHides = function (hides) {\n      var data = _this.setHides(_this.state.data, hides);\n\n      _this.setState({\n        data: data,\n        isDirty: _this.isDirty({\n          data: data\n        })\n      });\n    };\n\n    _this.handleChangeTags = function (tags) {\n      var data = _objectSpread({}, _this.state.data, {\n        tags: tags\n      });\n\n      _this.setState({\n        data: data,\n        isDirty: _this.isDirty({\n          data: data\n        })\n      });\n    };\n\n    _this.handleOnSaveItem = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _this$props3, selectedItem, onSaveItem, _this$state, name, description, rarity, contents, data, isDirty, itemContents, item;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$props3 = _this.props, selectedItem = _this$props3.selectedItem, onSaveItem = _this$props3.onSaveItem;\n              _this$state = _this.state, name = _this$state.name, description = _this$state.description, rarity = _this$state.rarity, contents = _this$state.contents, data = _this$state.data, isDirty = _this$state.isDirty;\n\n              if (!(isDirty && selectedItem)) {\n                _context.next = 15;\n                break;\n              }\n\n              _context.t0 = _objectSpread;\n              _context.t1 = {};\n              _context.t2 = selectedItem.contents;\n              _context.next = 8;\n              return computeHashes(contents);\n\n            case 8:\n              _context.t3 = _context.sent;\n              itemContents = (0, _context.t0)(_context.t1, _context.t2, _context.t3);\n              item = _objectSpread({}, selectedItem, {\n                name: name,\n                description: description,\n                rarity: rarity,\n                data: data,\n                contents: itemContents\n              });\n              onSaveItem(item, contents);\n\n              if (isThirdParty(item.urn)) {\n                _this.analytics.track('Edit Item', {\n                  contents: contents\n                });\n              }\n\n              _this.setState({\n                isDirty: false\n              });\n\n              _this.handleOnResetItem();\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.handleOnResetItem = function () {\n      var selectedItem = _this.props.selectedItem;\n\n      if (selectedItem) {\n        _this.setItem(selectedItem);\n      }\n    };\n\n    _this.handleRemoveFromCollection = function () {\n      var _this$props4 = _this.props,\n          selectedItem = _this$props4.selectedItem,\n          onSetCollection = _this$props4.onSetCollection;\n\n      if (selectedItem) {\n        onSetCollection(selectedItem, null);\n      }\n    };\n\n    _this.handleOpenThumbnailDialog = function () {\n      if (_this.thumbnailInput.current) {\n        _this.thumbnailInput.current.click();\n      }\n    };\n\n    _this.handleThumbnailChange = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event) {\n        var files, file, resizedFile, thumbnail;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                files = event.target.files;\n\n                if (!(files && files.length > 0)) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                file = files[0];\n                _context2.next = 5;\n                return resizeImage(file);\n\n              case 5:\n                resizedFile = _context2.sent;\n                thumbnail = URL.createObjectURL(resizedFile);\n\n                _this.setState({\n                  thumbnail: thumbnail,\n                  contents: _defineProperty({}, THUMBNAIL_PATH, file),\n                  isDirty: true\n                });\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.handleDownloadItem = function () {\n      var _this$props5 = _this.props,\n          selectedItemId = _this$props5.selectedItemId,\n          onDownload = _this$props5.onDownload;\n      selectedItemId && onDownload(selectedItemId);\n    };\n\n    return _this;\n  }\n\n  _createClass(RightPanel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var selectedItem = this.props.selectedItem;\n\n      if (selectedItem) {\n        this.setItem(selectedItem);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props6 = this.props,\n          selectedItemId = _this$props6.selectedItemId,\n          selectedItem = _this$props6.selectedItem;\n\n      if (prevProps.selectedItemId !== selectedItemId) {\n        if (selectedItem) {\n          this.setItem(selectedItem);\n        } else {\n          this.setState(this.getInitialState());\n        }\n      } else if (selectedItem && (!prevProps.selectedItem || this.hasSavedItem())) {\n        this.setItem(selectedItem);\n      }\n    }\n  }, {\n    key: \"setItem\",\n    value: function setItem(item) {\n      this.setState({\n        thumbnail: '',\n        name: item.name,\n        description: item.description,\n        rarity: item.rarity,\n        data: item.data,\n        hasItem: true,\n        isDirty: false\n      });\n    }\n  }, {\n    key: \"getInitialState\",\n    value: function getInitialState() {\n      return {\n        name: '',\n        description: '',\n        thumbnail: '',\n        rarity: undefined,\n        contents: {},\n        data: undefined,\n        hasItem: false,\n        isDirty: false\n      };\n    }\n  }, {\n    key: \"setReplaces\",\n    value: function setReplaces(data, replaces) {\n      return _objectSpread({}, data, {\n        replaces: replaces,\n        representations: data.representations.map(function (representation) {\n          return _objectSpread({}, representation, {\n            overrideReplaces: replaces\n          });\n        })\n      });\n    }\n  }, {\n    key: \"setHides\",\n    value: function setHides(data, hides) {\n      return _objectSpread({}, data, {\n        hides: hides,\n        representations: data.representations.map(function (representation) {\n          return _objectSpread({}, representation, {\n            overrideHides: hides\n          });\n        })\n      });\n    }\n  }, {\n    key: \"canEditItemMetadata\",\n    value: function canEditItemMetadata(item) {\n      var _this$props7 = this.props,\n          collection = _this$props7.collection,\n          canEditSelectedItem = _this$props7.canEditSelectedItem;\n\n      if (!item || collection && isLocked(collection)) {\n        return false;\n      }\n\n      return canEditSelectedItem;\n    }\n  }, {\n    key: \"isSkin\",\n    value: function isSkin() {\n      var data = this.state.data;\n      return (data === null || data === void 0 ? void 0 : data.category) === WearableCategory.SKIN;\n    }\n  }, {\n    key: \"isDirty\",\n    value: function isDirty() {\n      var newState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var selectedItem = this.props.selectedItem;\n      var hasItem = this.state.hasItem;\n      return hasItem ? this.hasStateItemChanged(_objectSpread({}, this.state, newState), selectedItem) : false;\n    }\n  }, {\n    key: \"hasSavedItem\",\n    value: function hasSavedItem() {\n      var selectedItem = this.props.selectedItem;\n      var isDirty = this.state.isDirty;\n      return selectedItem && !isDirty && this.hasStateItemChanged(this.state, selectedItem);\n    }\n  }, {\n    key: \"hasStateItemChanged\",\n    value: function hasStateItemChanged(state, item) {\n      return state.name !== item.name || state.description !== item.description || state.rarity !== item.rarity || !equal(state.data, item.data);\n    }\n  }, {\n    key: \"asCategorySelect\",\n    value: function asCategorySelect(type, values) {\n      return values.map(function (value) {\n        return {\n          value: value,\n          text: t(\"\".concat(type, \".category.\").concat(value))\n        };\n      });\n    }\n  }, {\n    key: \"asRaritySelect\",\n    value: function asRaritySelect(values) {\n      return values.map(function (value) {\n        return {\n          value: value,\n          text: t(\"wearable.rarity.\".concat(value))\n        };\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props8 = this.props,\n          selectedItemId = _this$props8.selectedItemId,\n          address = _this$props8.address,\n          isConnected = _this$props8.isConnected,\n          isDownloading = _this$props8.isDownloading,\n          error = _this$props8.error;\n      var _this$state2 = this.state,\n          name = _this$state2.name,\n          description = _this$state2.description,\n          thumbnail = _this$state2.thumbnail,\n          rarity = _this$state2.rarity,\n          data = _this$state2.data,\n          isDirty = _this$state2.isDirty,\n          hasItem = _this$state2.hasItem;\n      var rarities = getRarities();\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"RightPanel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 7\n        }\n      }, isConnected ? /*#__PURE__*/React.createElement(ItemProvider, {\n        id: selectedItemId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }\n      }, function (item, collection, isLoading) {\n        var isItemLocked = collection && isLocked(collection);\n\n        var canEditItemMetadata = _this2.canEditItemMetadata(item);\n\n        var actionableCategories = item ? item.type === ItemType.WEARABLE ? getOverridesCategories(item.contents, data === null || data === void 0 ? void 0 : data.category) : getEmoteCategories() : [];\n        var wearableCategories = item ? item.type === ItemType.WEARABLE ? getWearableCategories(item.contents) : getEmoteCategories() : [];\n        var overrideCategories = [];\n        var hidesCategories = [];\n        var replaces = [];\n        var hides = [];\n\n        if (data) {\n          hides = data.hides ? data.hides.filter(function (category) {\n            return actionableCategories.includes(category);\n          }) : [];\n          replaces = data.replaces ? data.replaces.filter(function (category) {\n            return actionableCategories.includes(category);\n          }) : [];\n          hidesCategories = actionableCategories.filter(function (category) {\n            return !replaces.includes(category);\n          });\n          overrideCategories = actionableCategories.filter(function (category) {\n            return !hides.includes(category);\n          });\n        }\n\n        var downloadButton = isDownloading ? /*#__PURE__*/React.createElement(Loader, {\n          active: true,\n          size: \"tiny\",\n          className: \"donwload-item-loader\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 17\n          }\n        }) : /*#__PURE__*/React.createElement(Icon, {\n          name: \"export\",\n          className: \"download-item-button\",\n          onClick: _this2.handleDownloadItem,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 17\n          }\n        });\n        return isLoading ? /*#__PURE__*/React.createElement(Loader, {\n          size: \"massive\",\n          active: true,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 17\n          }\n        }) : hasItem || !selectedItemId ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"header\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"title\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 21\n          }\n        }, t('item_editor.right_panel.properties')), item && isOwner(item, address) && !item.isPublished && !isItemLocked ? /*#__PURE__*/React.createElement(Dropdown, {\n          trigger: /*#__PURE__*/React.createElement(\"div\", {\n            className: \"actions\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 42\n            }\n          }),\n          inline: true,\n          direction: \"left\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(Dropdown.Menu, {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 25\n          }\n        }, getMissingBodyShapeType(item) !== null ? /*#__PURE__*/React.createElement(Dropdown.Item, {\n          text: t('item_detail_page.add_representation', {\n            bodyShape: t(\"body_shapes.\".concat(getMissingBodyShapeType(item))).toLowerCase()\n          }),\n          onClick: _this2.handleAddRepresentationToItem,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 29\n          }\n        }) : null, item.collectionId ? /*#__PURE__*/React.createElement(Dropdown.Item, {\n          text: t('collection_item.remove_from_collection'),\n          onClick: _this2.handleRemoveFromCollection,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 29\n          }\n        }) : null, /*#__PURE__*/React.createElement(ConfirmDelete, {\n          name: name,\n          onDelete: _this2.handleDeleteItem,\n          trigger: /*#__PURE__*/React.createElement(Dropdown.Item, {\n            text: t('global.delete'),\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 38\n            }\n          }),\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 27\n          }\n        }))) : null), /*#__PURE__*/React.createElement(Collapsable, {\n          item: item,\n          label: t('item_editor.right_panel.details'),\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 19\n          }\n        }, function (item) {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            className: \"details\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 23\n            }\n          }, canEditItemMetadata ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Icon, {\n            name: \"edit\",\n            className: \"edit-item-file\",\n            onClick: _this2.handleChangeItemFile,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 29\n            }\n          }), downloadButton, /*#__PURE__*/React.createElement(\"div\", {\n            className: \"thumbnail-container\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 29\n            }\n          }, /*#__PURE__*/React.createElement(ItemImage, {\n            item: item,\n            src: thumbnail,\n            hasBadge: true,\n            badgeSize: \"small\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 31\n            }\n          }), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"thumbnail-edit-container\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 31\n            }\n          }, /*#__PURE__*/React.createElement(\"input\", {\n            type: \"file\",\n            ref: _this2.thumbnailInput,\n            onChange: _this2.handleThumbnailChange,\n            accept: \"image/png, image/jpeg\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 33\n            }\n          }), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"thumbnail-edit-background\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 33\n            }\n          }), /*#__PURE__*/React.createElement(Icon, {\n            name: \"camera\",\n            onClick: _this2.handleOpenThumbnailDialog,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 33\n            }\n          })))) : /*#__PURE__*/React.createElement(React.Fragment, null, downloadButton, /*#__PURE__*/React.createElement(ItemImage, {\n            item: item,\n            src: thumbnail,\n            hasBadge: true,\n            badgeSize: \"small\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 29\n            }\n          })), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"metrics\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 25\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: \"metric triangles\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 27\n            }\n          }, t('model_metrics.triangles', {\n            count: item.metrics.triangles\n          })), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"metric materials\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 27\n            }\n          }, t('model_metrics.materials', {\n            count: item.metrics.materials\n          })), /*#__PURE__*/React.createElement(\"div\", {\n            className: \"metric textures\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 27\n            }\n          }, t('model_metrics.textures', {\n            count: item.metrics.textures\n          }))));\n        }), /*#__PURE__*/React.createElement(Collapsable, {\n          item: item,\n          label: t('item_editor.right_panel.basics'),\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 19\n          }\n        }, function (item) {\n          return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Input, {\n            itemId: item.id,\n            label: t('global.name'),\n            value: name,\n            disabled: !canEditItemMetadata,\n            maxLength: ITEM_NAME_MAX_LENGTH,\n            onChange: _this2.handleChangeName,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 25\n            }\n          }), /*#__PURE__*/React.createElement(Input, {\n            itemId: item.id,\n            label: t('global.description'),\n            value: description,\n            disabled: !canEditItemMetadata,\n            maxLength: ITEM_DESCRIPTION_MAX_LENGTH,\n            onChange: _this2.handleChangeDescription,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 25\n            }\n          }), /*#__PURE__*/React.createElement(Select, {\n            itemId: item.id,\n            label: t('global.category'),\n            value: data.category,\n            options: _this2.asCategorySelect(item.type, wearableCategories),\n            disabled: !canEditItemMetadata,\n            onChange: _this2.handleChangeCategory,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 25\n            }\n          }), !(item.urn && isThirdParty(item.urn)) && /*#__PURE__*/React.createElement(Select, {\n            itemId: item.id,\n            label: t('global.rarity'),\n            value: rarity,\n            options: _this2.asRaritySelect(rarities),\n            disabled: item.isPublished || !canEditItemMetadata,\n            onChange: _this2.handleChangeRarity,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 27\n            }\n          }));\n        }), /*#__PURE__*/React.createElement(Collapsable, {\n          item: item,\n          label: t('item_editor.right_panel.overrides'),\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 19\n          }\n        }, function (item) {\n          return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MultiSelect, {\n            itemId: item.id,\n            label: t('item_editor.right_panel.replaces'),\n            info: t('item_editor.right_panel.replaces_info'),\n            value: replaces,\n            options: _this2.asCategorySelect(item.type, overrideCategories),\n            disabled: !canEditItemMetadata || _this2.isSkin(),\n            onChange: _this2.handleChangeReplaces,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 25\n            }\n          }), /*#__PURE__*/React.createElement(MultiSelect, {\n            itemId: item.id,\n            label: t('item_editor.right_panel.hides'),\n            info: t('item_editor.right_panel.hides_info'),\n            value: hides,\n            options: _this2.asCategorySelect(item.type, // Workaround for https://github.com/decentraland/builder/issues/2068\n            // This will only show the body shape option if the item is currenlty hiding it.\n            // Once removed, the option cannot be selected again\n            hides.some(function (c) {\n              return c === WearableCategory.BODY_SHAPE;\n            }) ? hidesCategories : hidesCategories.filter(function (c) {\n              return c !== WearableCategory.BODY_SHAPE;\n            })),\n            disabled: !canEditItemMetadata,\n            onChange: _this2.handleChangeHides,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 25\n            }\n          }));\n        }), /*#__PURE__*/React.createElement(Collapsable, {\n          item: item,\n          label: t('item_editor.right_panel.tags'),\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 19\n          }\n        }, function (item) {\n          return /*#__PURE__*/React.createElement(Tags, {\n            itemId: item.id,\n            value: data.tags,\n            onChange: _this2.handleChangeTags,\n            isDisabled: !canEditItemMetadata,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 23\n            }\n          });\n        }), isDirty ? /*#__PURE__*/React.createElement(\"div\", {\n          className: \"edit-buttons\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          secondary: true,\n          onClick: _this2.handleOnResetItem,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 23\n          }\n        }, t('global.cancel')), /*#__PURE__*/React.createElement(NetworkButton, {\n          primary: true,\n          onClick: _this2.handleOnSaveItem,\n          network: Network.MATIC,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 23\n          }\n        }, t('global.save'))) : error && selectedItemId ? /*#__PURE__*/React.createElement(\"p\", {\n          className: \"danger-text\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 21\n          }\n        }, t('global.error_ocurred'), \": \", error) : null) : null;\n      }) : null);\n    }\n  }]);\n\n  return RightPanel;\n}(React.PureComponent);\n\nexport { RightPanel as default };","map":{"version":3,"sources":["/opt/work/NZ_test/src/components/ItemEditorPage/RightPanel/RightPanel.tsx"],"names":["React","equal","Loader","Dropdown","Button","Network","WearableCategory","NetworkButton","t","getAnalytics","isThirdParty","ItemImage","ItemProvider","ConfirmDelete","Icon","getMissingBodyShapeType","getRarities","getWearableCategories","getOverridesCategories","isOwner","resizeImage","getEmoteCategories","isLocked","computeHashes","ItemType","ITEM_DESCRIPTION_MAX_LENGTH","ITEM_NAME_MAX_LENGTH","THUMBNAIL_PATH","Collapsable","Input","Select","MultiSelect","Tags","RightPanel","analytics","state","getInitialState","thumbnailInput","createRef","handleDeleteItem","onDeleteItem","props","selectedItem","handleAddRepresentationToItem","onOpenModal","item","addRepresentation","handleChangeItemFile","changeItemFile","handleChangeName","name","setState","isDirty","handleChangeDescription","description","handleChangeRarity","rarity","handleChangeCategory","category","data","SKIN","setReplaces","setHides","handleChangeReplaces","replaces","handleChangeHides","hides","handleChangeTags","tags","handleOnSaveItem","onSaveItem","contents","itemContents","urn","track","handleOnResetItem","setItem","handleRemoveFromCollection","onSetCollection","handleOpenThumbnailDialog","current","click","handleThumbnailChange","event","files","target","length","file","resizedFile","thumbnail","URL","createObjectURL","handleDownloadItem","selectedItemId","onDownload","prevProps","hasSavedItem","hasItem","undefined","representations","map","representation","overrideReplaces","overrideHides","collection","canEditSelectedItem","newState","hasStateItemChanged","type","values","value","text","address","isConnected","isDownloading","error","rarities","isLoading","isItemLocked","canEditItemMetadata","actionableCategories","WEARABLE","wearableCategories","overrideCategories","hidesCategories","filter","includes","downloadButton","isPublished","bodyShape","toLowerCase","collectionId","count","metrics","triangles","materials","textures","id","asCategorySelect","asRaritySelect","isSkin","some","c","BODY_SHAPE","MATIC","PureComponent"],"mappings":"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","sourcesContent":["import * as React from 'react'\nimport equal from 'fast-deep-equal'\nimport { Loader, Dropdown, Button } from 'decentraland-ui'\nimport { Network, WearableCategory } from '@dcl/schemas'\nimport { NetworkButton } from 'decentraland-dapps/dist/containers'\nimport { t } from 'decentraland-dapps/dist/modules/translation/utils'\nimport { getAnalytics } from 'decentraland-dapps/dist/modules/analytics/utils'\nimport { isThirdParty } from 'lib/urn'\nimport ItemImage from 'components/ItemImage'\nimport ItemProvider from 'components/ItemProvider'\nimport ConfirmDelete from 'components/ConfirmDelete'\nimport Icon from 'components/Icon'\nimport {\n  getMissingBodyShapeType,\n  getRarities,\n  getWearableCategories,\n  getOverridesCategories,\n  isOwner,\n  resizeImage,\n  getEmoteCategories\n} from 'modules/item/utils'\nimport { isLocked } from 'modules/collection/utils'\nimport { computeHashes } from 'modules/deployment/contentUtils'\nimport {\n  Item,\n  ItemRarity,\n  ItemType,\n  ITEM_DESCRIPTION_MAX_LENGTH,\n  ITEM_NAME_MAX_LENGTH,\n  THUMBNAIL_PATH,\n  WearableData\n} from 'modules/item/types'\nimport Collapsable from './Collapsable'\nimport Input from './Input'\nimport Select from './Select'\nimport MultiSelect from './MultiSelect'\nimport Tags from './Tags'\nimport { Props, State } from './RightPanel.types'\nimport './RightPanel.css'\n\nexport default class RightPanel extends React.PureComponent<Props, State> {\n  analytics = getAnalytics()\n  state: State = this.getInitialState()\n  thumbnailInput = React.createRef<HTMLInputElement>()\n\n  componentDidMount() {\n    const { selectedItem } = this.props\n\n    if (selectedItem) {\n      this.setItem(selectedItem)\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const { selectedItemId, selectedItem } = this.props\n\n    if (prevProps.selectedItemId !== selectedItemId) {\n      if (selectedItem) {\n        this.setItem(selectedItem)\n      } else {\n        this.setState(this.getInitialState())\n      }\n    } else if (selectedItem && (!prevProps.selectedItem || this.hasSavedItem())) {\n      this.setItem(selectedItem)\n    }\n  }\n\n  setItem(item: Item) {\n    this.setState({\n      thumbnail: '',\n      name: item.name,\n      description: item.description,\n      rarity: item.rarity,\n      data: item.data,\n      hasItem: true,\n      isDirty: false\n    })\n  }\n\n  getInitialState(): State {\n    return {\n      name: '',\n      description: '',\n      thumbnail: '',\n      rarity: undefined,\n      contents: {},\n      data: undefined,\n      hasItem: false,\n      isDirty: false\n    }\n  }\n\n  handleDeleteItem = () => {\n    const { onDeleteItem } = this.props\n    const { selectedItem } = this.props\n    onDeleteItem(selectedItem!)\n  }\n\n  handleAddRepresentationToItem = () => {\n    const { selectedItem, onOpenModal } = this.props\n    onOpenModal('CreateSingleItemModal', { item: selectedItem, addRepresentation: true })\n  }\n\n  handleChangeItemFile = () => {\n    const { selectedItem, onOpenModal } = this.props\n    onOpenModal('CreateSingleItemModal', { item: selectedItem, changeItemFile: true })\n  }\n\n  handleChangeName = (name: string) => {\n    this.setState({ name, isDirty: this.isDirty({ name }) })\n  }\n\n  handleChangeDescription = (description: string) => {\n    this.setState({ description, isDirty: this.isDirty({ description }) })\n  }\n\n  handleChangeRarity = (rarity: ItemRarity) => {\n    this.setState({ rarity, isDirty: this.isDirty({ rarity }) })\n  }\n\n  handleChangeCategory = (category: WearableCategory) => {\n    let data: WearableData = {\n      ...this.state.data!,\n      category\n    }\n    // when changing the category to SKIN we hide everything else\n    if (category === WearableCategory.SKIN) {\n      data = this.setReplaces(data, [])\n      data = this.setHides(data, [])\n    }\n    this.setState({ data, isDirty: this.isDirty({ data }) })\n  }\n\n  setReplaces(data: WearableData, replaces: WearableCategory[]) {\n    return {\n      ...data,\n      replaces,\n      representations: data.representations.map(representation => ({\n        ...representation,\n        overrideReplaces: replaces\n      }))\n    }\n  }\n\n  handleChangeReplaces = (replaces: WearableCategory[]) => {\n    const data = this.setReplaces(this.state.data!, replaces)\n    this.setState({ data, isDirty: this.isDirty({ data }) })\n  }\n\n  setHides(data: WearableData, hides: WearableCategory[]) {\n    return {\n      ...data,\n      hides,\n      representations: data.representations.map(representation => ({\n        ...representation,\n        overrideHides: hides\n      }))\n    }\n  }\n\n  handleChangeHides = (hides: WearableCategory[]) => {\n    const data = this.setHides(this.state.data!, hides)\n    this.setState({ data, isDirty: this.isDirty({ data }) })\n  }\n\n  handleChangeTags = (tags: string[]) => {\n    const data = {\n      ...this.state.data!,\n      tags\n    }\n\n    this.setState({ data, isDirty: this.isDirty({ data }) })\n  }\n\n  handleOnSaveItem = async () => {\n    const { selectedItem, onSaveItem } = this.props\n    const { name, description, rarity, contents, data, isDirty } = this.state\n\n    if (isDirty && selectedItem) {\n      const itemContents = {\n        ...selectedItem.contents,\n        ...(await computeHashes(contents))\n      }\n      const item: Item = {\n        ...selectedItem,\n        name,\n        description,\n        rarity,\n        data: data!,\n        contents: itemContents\n      }\n      onSaveItem(item, contents)\n      if (isThirdParty(item.urn)) {\n        this.analytics.track('Edit Item', { contents })\n      }\n      this.setState({ isDirty: false })\n      this.handleOnResetItem()\n    }\n  }\n\n  handleOnResetItem = () => {\n    const { selectedItem } = this.props\n    if (selectedItem) {\n      this.setItem(selectedItem)\n    }\n  }\n\n  handleRemoveFromCollection = () => {\n    const { selectedItem, onSetCollection } = this.props\n    if (selectedItem) {\n      onSetCollection(selectedItem, null)\n    }\n  }\n\n  handleOpenThumbnailDialog = () => {\n    if (this.thumbnailInput.current) {\n      this.thumbnailInput.current.click()\n    }\n  }\n\n  handleThumbnailChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const { files } = event.target\n\n    if (files && files.length > 0) {\n      const file = files[0]\n      const resizedFile = await resizeImage(file)\n      const thumbnail = URL.createObjectURL(resizedFile)\n\n      this.setState({\n        thumbnail,\n        contents: { [THUMBNAIL_PATH]: file },\n        isDirty: true\n      })\n    }\n  }\n\n  handleDownloadItem = () => {\n    const { selectedItemId, onDownload } = this.props\n    selectedItemId && onDownload(selectedItemId)\n  }\n\n  canEditItemMetadata(item: Item | null) {\n    const { collection, canEditSelectedItem } = this.props\n    if (!item || (collection && isLocked(collection))) {\n      return false\n    }\n    return canEditSelectedItem\n  }\n\n  isSkin() {\n    const { data } = this.state\n    return data?.category === WearableCategory.SKIN\n  }\n\n  isDirty(newState: Partial<State> = {}) {\n    const { selectedItem } = this.props\n    const { hasItem } = this.state\n\n    return hasItem ? this.hasStateItemChanged({ ...this.state, ...newState }, selectedItem!) : false\n  }\n\n  hasSavedItem() {\n    const { selectedItem } = this.props\n    const { isDirty } = this.state\n    return selectedItem && !isDirty && this.hasStateItemChanged(this.state, selectedItem)\n  }\n\n  hasStateItemChanged(state: Partial<State>, item: Item) {\n    return (\n      state.name !== item.name || state.description !== item.description || state.rarity !== item.rarity || !equal(state.data, item.data)\n    )\n  }\n\n  asCategorySelect(type: ItemType, values: WearableCategory[]) {\n    return values.map(value => ({ value, text: t(`${type}.category.${value}`) }))\n  }\n\n  asRaritySelect(values: ItemRarity[]) {\n    return values.map(value => ({ value, text: t(`wearable.rarity.${value}`) }))\n  }\n\n  render() {\n    const { selectedItemId, address, isConnected, isDownloading, error } = this.props\n    const { name, description, thumbnail, rarity, data, isDirty, hasItem } = this.state\n    const rarities = getRarities()\n\n    return (\n      <div className=\"RightPanel\">\n        {isConnected ? (\n          <ItemProvider id={selectedItemId}>\n            {(item, collection, isLoading) => {\n              const isItemLocked = collection && isLocked(collection)\n              const canEditItemMetadata = this.canEditItemMetadata(item)\n\n              let actionableCategories: string[] = item\n                ? item.type === ItemType.WEARABLE\n                  ? getOverridesCategories(item.contents, data?.category)\n                  : getEmoteCategories()\n                : []\n              const wearableCategories = item\n                ? item.type === ItemType.WEARABLE\n                  ? getWearableCategories(item.contents)\n                  : getEmoteCategories()\n                : []\n\n              let overrideCategories: WearableCategory[] = []\n              let hidesCategories: WearableCategory[] = []\n              let replaces: WearableCategory[] = []\n              let hides: WearableCategory[] = []\n\n              if (data) {\n                hides = data.hides ? data.hides.filter(category => actionableCategories.includes(category)) : []\n                replaces = data.replaces ? data.replaces.filter(category => actionableCategories.includes(category)) : []\n                hidesCategories = actionableCategories.filter(\n                  category => !replaces.includes(category as WearableCategory)\n                ) as WearableCategory[]\n                overrideCategories = actionableCategories.filter(\n                  category => !hides.includes(category as WearableCategory)\n                ) as WearableCategory[]\n              }\n\n              const downloadButton = isDownloading ? (\n                <Loader active size=\"tiny\" className=\"donwload-item-loader\" />\n              ) : (\n                <Icon name=\"export\" className={`download-item-button`} onClick={this.handleDownloadItem} />\n              )\n\n              return isLoading ? (\n                <Loader size=\"massive\" active />\n              ) : hasItem || !selectedItemId ? (\n                <>\n                  <div className=\"header\">\n                    <div className=\"title\">{t('item_editor.right_panel.properties')}</div>\n                    {item && isOwner(item, address) && !item.isPublished && !isItemLocked ? (\n                      <Dropdown trigger={<div className=\"actions\" />} inline direction=\"left\">\n                        <Dropdown.Menu>\n                          {getMissingBodyShapeType(item) !== null ? (\n                            <Dropdown.Item\n                              text={t('item_detail_page.add_representation', {\n                                bodyShape: t(`body_shapes.${getMissingBodyShapeType(item)}`).toLowerCase()\n                              })}\n                              onClick={this.handleAddRepresentationToItem}\n                            />\n                          ) : null}\n                          {item.collectionId ? (\n                            <Dropdown.Item text={t('collection_item.remove_from_collection')} onClick={this.handleRemoveFromCollection} />\n                          ) : null}\n                          <ConfirmDelete\n                            name={name}\n                            onDelete={this.handleDeleteItem}\n                            trigger={<Dropdown.Item text={t('global.delete')} />}\n                          />\n                        </Dropdown.Menu>\n                      </Dropdown>\n                    ) : null}\n                  </div>\n                  <Collapsable item={item} label={t('item_editor.right_panel.details')}>\n                    {item => (\n                      <div className=\"details\">\n                        {canEditItemMetadata ? (\n                          <>\n                            <Icon name=\"edit\" className=\"edit-item-file\" onClick={this.handleChangeItemFile} />\n                            {downloadButton}\n                            <div className=\"thumbnail-container\">\n                              <ItemImage item={item} src={thumbnail} hasBadge={true} badgeSize=\"small\" />\n                              <div className=\"thumbnail-edit-container\">\n                                <input\n                                  type=\"file\"\n                                  ref={this.thumbnailInput}\n                                  onChange={this.handleThumbnailChange}\n                                  accept=\"image/png, image/jpeg\"\n                                />\n                                <div className=\"thumbnail-edit-background\"></div>\n                                <Icon name=\"camera\" onClick={this.handleOpenThumbnailDialog} />\n                              </div>\n                            </div>\n                          </>\n                        ) : (\n                          <>\n                            {downloadButton}\n                            <ItemImage item={item} src={thumbnail} hasBadge={true} badgeSize=\"small\" />\n                          </>\n                        )}\n                        <div className=\"metrics\">\n                          <div className=\"metric triangles\">{t('model_metrics.triangles', { count: item.metrics.triangles })}</div>\n                          <div className=\"metric materials\">{t('model_metrics.materials', { count: item.metrics.materials })}</div>\n                          <div className=\"metric textures\">{t('model_metrics.textures', { count: item.metrics.textures })}</div>\n                        </div>\n                      </div>\n                    )}\n                  </Collapsable>\n                  <Collapsable item={item} label={t('item_editor.right_panel.basics')}>\n                    {item => (\n                      <>\n                        <Input\n                          itemId={item.id}\n                          label={t('global.name')}\n                          value={name}\n                          disabled={!canEditItemMetadata}\n                          maxLength={ITEM_NAME_MAX_LENGTH}\n                          onChange={this.handleChangeName}\n                        />\n                        <Input\n                          itemId={item.id}\n                          label={t('global.description')}\n                          value={description}\n                          disabled={!canEditItemMetadata}\n                          maxLength={ITEM_DESCRIPTION_MAX_LENGTH}\n                          onChange={this.handleChangeDescription}\n                        />\n                        <Select<WearableCategory>\n                          itemId={item.id}\n                          label={t('global.category')}\n                          value={data!.category}\n                          options={this.asCategorySelect(item.type, wearableCategories as WearableCategory[])}\n                          disabled={!canEditItemMetadata}\n                          onChange={this.handleChangeCategory}\n                        />\n                        {!(item.urn && isThirdParty(item.urn)) && (\n                          <Select<ItemRarity>\n                            itemId={item.id}\n                            label={t('global.rarity')}\n                            value={rarity}\n                            options={this.asRaritySelect(rarities)}\n                            disabled={item.isPublished || !canEditItemMetadata}\n                            onChange={this.handleChangeRarity}\n                          />\n                        )}\n                      </>\n                    )}\n                  </Collapsable>\n                  <Collapsable item={item} label={t('item_editor.right_panel.overrides')}>\n                    {item => (\n                      <>\n                        <MultiSelect<WearableCategory>\n                          itemId={item.id}\n                          label={t('item_editor.right_panel.replaces')}\n                          info={t('item_editor.right_panel.replaces_info')}\n                          value={replaces}\n                          options={this.asCategorySelect(item.type, overrideCategories)}\n                          disabled={!canEditItemMetadata || this.isSkin()}\n                          onChange={this.handleChangeReplaces}\n                        />\n                        <MultiSelect<WearableCategory>\n                          itemId={item.id}\n                          label={t('item_editor.right_panel.hides')}\n                          info={t('item_editor.right_panel.hides_info')}\n                          value={hides}\n                          options={this.asCategorySelect(\n                            item.type,\n                            // Workaround for https://github.com/decentraland/builder/issues/2068\n                            // This will only show the body shape option if the item is currenlty hiding it.\n                            // Once removed, the option cannot be selected again\n                            hides.some(c => c === WearableCategory.BODY_SHAPE)\n                              ? hidesCategories\n                              : hidesCategories.filter(c => c !== WearableCategory.BODY_SHAPE)\n                          )}\n                          disabled={!canEditItemMetadata}\n                          onChange={this.handleChangeHides}\n                        />\n                      </>\n                    )}\n                  </Collapsable>\n                  <Collapsable item={item} label={t('item_editor.right_panel.tags')}>\n                    {item => (\n                      <Tags itemId={item.id} value={data!.tags} onChange={this.handleChangeTags} isDisabled={!canEditItemMetadata} />\n                    )}\n                  </Collapsable>\n                  {isDirty ? (\n                    <div className=\"edit-buttons\">\n                      <Button secondary onClick={this.handleOnResetItem}>\n                        {t('global.cancel')}\n                      </Button>\n                      <NetworkButton primary onClick={this.handleOnSaveItem} network={Network.MATIC}>\n                        {t('global.save')}\n                      </NetworkButton>\n                    </div>\n                  ) : error && selectedItemId ? (\n                    <p className=\"danger-text\">\n                      {t('global.error_ocurred')}: {error}\n                    </p>\n                  ) : null}\n                </>\n              ) : null\n            }}\n          </ItemProvider>\n        ) : null}\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}