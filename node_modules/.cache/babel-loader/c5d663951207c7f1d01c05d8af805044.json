{"ast":null,"code":"import _toConsumableArray from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/opt/work/NZ_test/src/components/ItemEditorPage/RightPanel/Tags/Tags.tsx\";\nimport * as React from 'react';\nimport { BACKSPACE_KEY_CODE, COMMA_KEY_CODE, ENTER_KEY_CODE, WHITE_SPACE_KEY_CODE } from 'modules/keyboard/types';\nimport './Tags.css';\n\nvar Tags = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(Tags, _React$PureComponent);\n\n  function Tags() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Tags);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Tags)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      draft: '',\n      value: _this.props.value\n    };\n\n    _this.handleChange = function (event) {\n      _this.setState({\n        draft: event.target.value\n      });\n    };\n\n    _this.handleAdd = function () {\n      var onChange = _this.props.onChange;\n      var _this$state = _this.state,\n          draft = _this$state.draft,\n          value = _this$state.value;\n      var add = draft.trim();\n\n      if (add !== '') {\n        if (!value.includes(add)) {\n          var newValue = [].concat(_toConsumableArray(value), [add]);\n\n          _this.setState({\n            value: newValue,\n            draft: ''\n          });\n\n          onChange(newValue);\n        } else {\n          _this.setState({\n            draft: ''\n          });\n        }\n      }\n    };\n\n    _this.handleKeyDown = function (event) {\n      if (event.keyCode === WHITE_SPACE_KEY_CODE || event.keyCode === ENTER_KEY_CODE || event.keyCode === COMMA_KEY_CODE) {\n        _this.handleAdd();\n      } else if (event.keyCode === BACKSPACE_KEY_CODE || event.keyCode === ENTER_KEY_CODE) {\n        var _this$state2 = _this.state,\n            draft = _this$state2.draft,\n            value = _this$state2.value;\n        var last = value[value.length - 1];\n\n        if (last && draft === '') {\n          _this.handleRemove(last);\n        }\n      }\n    };\n\n    _this.handleRemove = function (value) {\n      var onChange = _this.props.onChange;\n\n      var newValue = _this.state.value.filter(function (_value) {\n        return _value !== value;\n      });\n\n      _this.setState({\n        value: newValue\n      });\n\n      onChange(newValue);\n    };\n\n    return _this;\n  }\n\n  _createClass(Tags, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      var itemId = newProps.itemId,\n          value = newProps.value;\n\n      if (itemId !== this.props.itemId || value !== this.state.value) {\n        this.setState({\n          value: value\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var isDisabled = this.props.isDisabled;\n      var _this$state3 = this.state,\n          draft = _this$state3.draft,\n          value = _this$state3.value;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Tags \".concat(value.length > 0 ? '' : 'blank', \" \").concat(isDisabled ? 'is-disabled' : '').trim(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"values\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }\n      }, value.map(function (value) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"value\",\n          key: value,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }\n        }, value, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"remove\",\n          onClick: function onClick(event) {\n            _this2.handleRemove(value);\n\n            event.stopPropagation();\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 15\n          }\n        }));\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        value: draft,\n        onChange: this.handleChange,\n        onKeyDown: this.handleKeyDown,\n        onBlur: this.handleAdd,\n        disabled: isDisabled,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return Tags;\n}(React.PureComponent);\n\nTags.defaultProps = {\n  isDisabled: false\n};\nexport { Tags as default };","map":{"version":3,"sources":["/opt/work/NZ_test/src/components/ItemEditorPage/RightPanel/Tags/Tags.tsx"],"names":["React","BACKSPACE_KEY_CODE","COMMA_KEY_CODE","ENTER_KEY_CODE","WHITE_SPACE_KEY_CODE","Tags","state","draft","value","props","handleChange","event","setState","target","handleAdd","onChange","add","trim","includes","newValue","handleKeyDown","keyCode","last","length","handleRemove","filter","_value","newProps","itemId","isDisabled","map","stopPropagation","PureComponent","defaultProps"],"mappings":";;;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,kBAAT,EAA6BC,cAA7B,EAA6CC,cAA7C,EAA6DC,oBAA7D,QAAyF,wBAAzF;AAEA,OAAO,YAAP;;IAEqBC,I;;;;;;;;;;;;;;;UAKnBC,K,GAAe;AACbC,MAAAA,KAAK,EAAE,EADM;AAEbC,MAAAA,KAAK,EAAE,MAAKC,KAAL,CAAWD;AAFL,K;;UAYfE,Y,GAAe,UAACC,KAAD,EAAgD;AAC7D,YAAKC,QAAL,CAAc;AAAEL,QAAAA,KAAK,EAAEI,KAAK,CAACE,MAAN,CAAaL;AAAtB,OAAd;AACD,K;;UAEDM,S,GAAY,YAAM;AAAA,UACRC,QADQ,GACK,MAAKN,KADV,CACRM,QADQ;AAAA,wBAES,MAAKT,KAFd;AAAA,UAERC,KAFQ,eAERA,KAFQ;AAAA,UAEDC,KAFC,eAEDA,KAFC;AAGhB,UAAMQ,GAAG,GAAGT,KAAK,CAACU,IAAN,EAAZ;;AACA,UAAID,GAAG,KAAK,EAAZ,EAAgB;AACd,YAAI,CAACR,KAAK,CAACU,QAAN,CAAeF,GAAf,CAAL,EAA0B;AACxB,cAAMG,QAAQ,gCAAOX,KAAP,IAAcQ,GAAd,EAAd;;AACA,gBAAKJ,QAAL,CAAc;AAAEJ,YAAAA,KAAK,EAAEW,QAAT;AAAmBZ,YAAAA,KAAK,EAAE;AAA1B,WAAd;;AACAQ,UAAAA,QAAQ,CAACI,QAAD,CAAR;AACD,SAJD,MAIO;AACL,gBAAKP,QAAL,CAAc;AAAEL,YAAAA,KAAK,EAAE;AAAT,WAAd;AACD;AACF;AACF,K;;UAEDa,a,GAAgB,UAACT,KAAD,EAAkD;AAChE,UAAIA,KAAK,CAACU,OAAN,KAAkBjB,oBAAlB,IAA0CO,KAAK,CAACU,OAAN,KAAkBlB,cAA5D,IAA8EQ,KAAK,CAACU,OAAN,KAAkBnB,cAApG,EAAoH;AAClH,cAAKY,SAAL;AACD,OAFD,MAEO,IAAIH,KAAK,CAACU,OAAN,KAAkBpB,kBAAlB,IAAwCU,KAAK,CAACU,OAAN,KAAkBlB,cAA9D,EAA8E;AAAA,2BAC1D,MAAKG,KADqD;AAAA,YAC3EC,KAD2E,gBAC3EA,KAD2E;AAAA,YACpEC,KADoE,gBACpEA,KADoE;AAEnF,YAAMc,IAAI,GAAGd,KAAK,CAACA,KAAK,CAACe,MAAN,GAAe,CAAhB,CAAlB;;AACA,YAAID,IAAI,IAAIf,KAAK,KAAK,EAAtB,EAA0B;AACxB,gBAAKiB,YAAL,CAAkBF,IAAlB;AACD;AACF;AACF,K;;UAEDE,Y,GAAe,UAAChB,KAAD,EAAmB;AAAA,UACxBO,QADwB,GACX,MAAKN,KADM,CACxBM,QADwB;;AAEhC,UAAMI,QAAQ,GAAG,MAAKb,KAAL,CAAWE,KAAX,CAAiBiB,MAAjB,CAAwB,UAAAC,MAAM;AAAA,eAAIA,MAAM,KAAKlB,KAAf;AAAA,OAA9B,CAAjB;;AACA,YAAKI,QAAL,CAAc;AAAEJ,QAAAA,KAAK,EAAEW;AAAT,OAAd;;AACAJ,MAAAA,QAAQ,CAACI,QAAD,CAAR;AACD,K;;;;;;;8CA3CyBQ,Q,EAAiB;AAAA,UACjCC,MADiC,GACfD,QADe,CACjCC,MADiC;AAAA,UACzBpB,KADyB,GACfmB,QADe,CACzBnB,KADyB;;AAEzC,UAAIoB,MAAM,KAAK,KAAKnB,KAAL,CAAWmB,MAAtB,IAAgCpB,KAAK,KAAK,KAAKF,KAAL,CAAWE,KAAzD,EAAgE;AAC9D,aAAKI,QAAL,CAAc;AAAEJ,UAAAA,KAAK,EAALA;AAAF,SAAd;AACD;AACF;;;6BAwCQ;AAAA;;AAAA,UACCqB,UADD,GACgB,KAAKpB,KADrB,CACCoB,UADD;AAAA,yBAEkB,KAAKvB,KAFvB;AAAA,UAECC,KAFD,gBAECA,KAFD;AAAA,UAEQC,KAFR,gBAEQA,KAFR;AAGP,0BACE;AAAK,QAAA,SAAS,EAAE,eAAQA,KAAK,CAACe,MAAN,GAAe,CAAf,GAAmB,EAAnB,GAAwB,OAAhC,cAA2CM,UAAU,GAAG,aAAH,GAAmB,EAAxE,EAA6EZ,IAA7E,EAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGT,KAAK,CAACsB,GAAN,CAAU,UAAAtB,KAAK;AAAA,4BACd;AAAK,UAAA,SAAS,EAAC,OAAf;AAAuB,UAAA,GAAG,EAAEA,KAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGA,KADH,eAEE;AACE,UAAA,SAAS,EAAC,QADZ;AAEE,UAAA,OAAO,EAAE,iBAAAG,KAAK,EAAI;AAChB,YAAA,MAAI,CAACa,YAAL,CAAkBhB,KAAlB;;AACAG,YAAAA,KAAK,CAACoB,eAAN;AACD,WALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFF,CADc;AAAA,OAAf,CADH,eAaE;AAAO,QAAA,KAAK,EAAExB,KAAd;AAAqB,QAAA,QAAQ,EAAE,KAAKG,YAApC;AAAkD,QAAA,SAAS,EAAE,KAAKU,aAAlE;AAAiF,QAAA,MAAM,EAAE,KAAKN,SAA9F;AAAyG,QAAA,QAAQ,EAAEe,UAAnH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAbF,CADF,CADF;AAmBD;;;;EA7E+B7B,KAAK,CAACgC,a;;AAAnB3B,I,CACZ4B,Y,GAAe;AACpBJ,EAAAA,UAAU,EAAE;AADQ,C;SADHxB,I","sourcesContent":["import * as React from 'react'\nimport { BACKSPACE_KEY_CODE, COMMA_KEY_CODE, ENTER_KEY_CODE, WHITE_SPACE_KEY_CODE } from 'modules/keyboard/types'\nimport { Props, State } from './Tags.types'\nimport './Tags.css'\n\nexport default class Tags extends React.PureComponent<Props, State> {\n  static defaultProps = {\n    isDisabled: false\n  }\n\n  state: State = {\n    draft: '',\n    value: this.props.value\n  }\n\n  componentWillReceiveProps(newProps: Props) {\n    const { itemId, value } = newProps\n    if (itemId !== this.props.itemId || value !== this.state.value) {\n      this.setState({ value })\n    }\n  }\n\n  handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ draft: event.target.value })\n  }\n\n  handleAdd = () => {\n    const { onChange } = this.props\n    const { draft, value } = this.state\n    const add = draft.trim()\n    if (add !== '') {\n      if (!value.includes(add)) {\n        const newValue = [...value, add]\n        this.setState({ value: newValue, draft: '' })\n        onChange(newValue)\n      } else {\n        this.setState({ draft: '' })\n      }\n    }\n  }\n\n  handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.keyCode === WHITE_SPACE_KEY_CODE || event.keyCode === ENTER_KEY_CODE || event.keyCode === COMMA_KEY_CODE) {\n      this.handleAdd()\n    } else if (event.keyCode === BACKSPACE_KEY_CODE || event.keyCode === ENTER_KEY_CODE) {\n      const { draft, value } = this.state\n      const last = value[value.length - 1]\n      if (last && draft === '') {\n        this.handleRemove(last)\n      }\n    }\n  }\n\n  handleRemove = (value: string) => {\n    const { onChange } = this.props\n    const newValue = this.state.value.filter(_value => _value !== value)\n    this.setState({ value: newValue })\n    onChange(newValue)\n  }\n\n  render() {\n    const { isDisabled } = this.props\n    const { draft, value } = this.state\n    return (\n      <div className={`Tags ${value.length > 0 ? '' : 'blank'} ${isDisabled ? 'is-disabled' : ''}`.trim()}>\n        <div className=\"values\">\n          {value.map(value => (\n            <div className=\"value\" key={value}>\n              {value}\n              <div\n                className=\"remove\"\n                onClick={event => {\n                  this.handleRemove(value)\n                  event.stopPropagation()\n                }}\n              />\n            </div>\n          ))}\n          <input value={draft} onChange={this.handleChange} onKeyDown={this.handleKeyDown} onBlur={this.handleAdd} disabled={isDisabled} />\n        </div>\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}