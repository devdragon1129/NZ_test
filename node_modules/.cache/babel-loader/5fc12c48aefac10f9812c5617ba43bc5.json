{"ast":null,"code":"import _toConsumableArray from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectWithoutProperties from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport { ContractName, getContract } from 'decentraland-transactions';\nimport { config } from 'config';\nimport { locations } from 'routing/locations';\nimport { isEqual, includes } from 'lib/address';\nimport { decodeURN, isThirdParty, URNType } from 'lib/urn';\nimport { SyncStatus } from 'modules/item/types';\nimport { CollectionType } from './types';\nimport { MAX_TP_ITEMS_TO_REVIEW, MIN_TP_ITEMS_TO_REVIEW, TP_TRESHOLD_TO_REVIEW } from './constants';\nexport var UNSYNCED_COLLECTION_ERROR_PREFIX = 'UnsyncedCollection:';\nexport function setOnSale(collection, wallet, isOnSale) {\n  var address = getSaleAddress(wallet.networks.MATIC.chainId);\n  return [{\n    address: address,\n    hasAccess: isOnSale,\n    collection: collection\n  }];\n}\nexport function isOnSale(collection, wallet) {\n  var address = getSaleAddress(wallet.networks.MATIC.chainId);\n  return includes(collection.minters, address);\n}\nexport function isLocked(collection) {\n  if (!collection.lock || collection.isPublished) {\n    return false;\n  }\n\n  var deadline = new Date(collection.lock);\n  deadline.setDate(deadline.getDate() + 1);\n  return deadline.getTime() > Date.now();\n}\nexport function getSaleAddress(chainId) {\n  return getContract(ContractName.CollectionStore, chainId).address.toLowerCase();\n}\nexport function getCollectionEditorURL(collection, items) {\n  return locations.itemEditor({\n    collectionId: collection.id,\n    itemId: items.length > 0 ? items[0].id : undefined\n  });\n}\nexport function getExplorerURL(_ref) {\n  var collection = _ref.collection,\n      item_ids = _ref.item_ids;\n\n  if (!collection && !item_ids) {\n    throw new Error('Either a collection or item ids must be specified to get the explorer url');\n  }\n\n  var EXPLORER_URL = config.get('EXPLORER_URL', '');\n  var BUILDER_SERVER_URL = config.get('BUILDER_SERVER_URL', '');\n  var URL = \"\".concat(EXPLORER_URL, \"?BUILDER_SERVER_URL=\").concat(BUILDER_SERVER_URL, \"&NETWORK=ropsten&DEBUG_MODE=true\");\n\n  if (collection) {\n    URL += \"&WITH_COLLECTIONS=\".concat(collection.id);\n  } else if (item_ids) {\n    URL += \"&WITH_ITEMS=\".concat(item_ids.join(','));\n  }\n\n  return URL;\n}\nexport function getCollectionBaseURI() {\n  return config.get('ERC721_COLLECTION_BASE_URI', '');\n}\nexport function getCollectionType(collection) {\n  var _decodeURN = decodeURN(collection.urn),\n      type = _decodeURN.type;\n\n  switch (type) {\n    case URNType.COLLECTIONS_THIRDPARTY:\n      return CollectionType.THIRD_PARTY;\n\n    case URNType.COLLECTIONS_V2:\n    case URNType.BASE_AVATARS:\n      return CollectionType.DECENTRALAND;\n\n    default:\n      throw new Error(\"Tried to get a collection type from an invalid URN: \".concat(collection.urn));\n  }\n}\nexport function getCollectionSymbol(collection) {\n  var vowelLessName = collection.name.replace(/a|e|i|o|u|\\s/g, '');\n  return 'DCL-' + vowelLessName.toUpperCase();\n}\nexport function toCollectionObject(collections) {\n  return collections.reduce(function (obj, collection) {\n    var _ref2 = collection,\n        _ = _ref2.items,\n        rest = _objectWithoutProperties(_ref2, [\"items\"]);\n\n    obj[collection.id] = rest;\n    return obj;\n  }, {});\n}\nexport function canSeeCollection(collection, address) {\n  return !!collection && [collection.owner].concat(_toConsumableArray(collection.managers), _toConsumableArray(collection.minters)).some(function (addr) {\n    return isEqual(addr, address);\n  });\n}\nexport function sortCollectionByCreatedAt(collectionA, collectionB) {\n  return collectionB.createdAt - collectionA.createdAt;\n}\nexport function isOwner(collection, address) {\n  return !!address && isEqual(collection.owner, address);\n}\nexport function isMinter(collection, address) {\n  return !!address && collection.minters.some(function (minter) {\n    return isEqual(minter, address);\n  });\n}\nexport function isManager(collection, address) {\n  return !!address && collection.managers.some(function (manager) {\n    return isEqual(manager, address);\n  });\n}\nexport function canMintCollectionItems(collection, address) {\n  return collection.isApproved && (isOwner(collection, address) || isMinter(collection, address));\n}\nexport function canManageCollectionItems(collection, address) {\n  return isOwner(collection, address) || isManager(collection, address);\n}\nexport function hasReviews(collection) {\n  return collection.reviewedAt !== collection.createdAt;\n}\nexport function getTotalAmountOfMintedItems(mints) {\n  return mints.reduce(function (total, mint) {\n    return total + mint.amount;\n  }, 0);\n}\nexport function getMostRelevantStatus(statusA, statusB) {\n  var sorted = Object.values(SyncStatus);\n  var indexA = sorted.indexOf(statusA);\n  var indexB = sorted.indexOf(statusB);\n  return indexA < indexB ? statusA : statusB;\n}\nexport function isTPCollection(collection) {\n  return isThirdParty(collection.urn);\n}\nexport function getCollectionFactoryContract(chainId) {\n  return getContract(ContractName.CollectionFactoryV3, chainId);\n}\nexport var getTPThresholdToReview = function getTPThresholdToReview(totalItems) {\n  // Reference: https://governance.decentraland.org/proposal/?id=f69c4d40-aaaf-11ec-87a7-6d2a41508231\n  // Max to review, 300 items, min to review is 50 or 1% of the collection\n  if (totalItems < MIN_TP_ITEMS_TO_REVIEW) {\n    return totalItems;\n  } else if (totalItems >= MIN_TP_ITEMS_TO_REVIEW && totalItems * TP_TRESHOLD_TO_REVIEW < MAX_TP_ITEMS_TO_REVIEW) {\n    return Math.max(MIN_TP_ITEMS_TO_REVIEW, Math.ceil(totalItems * TP_TRESHOLD_TO_REVIEW));\n  }\n\n  return Math.min(Math.ceil(totalItems * TP_TRESHOLD_TO_REVIEW), MAX_TP_ITEMS_TO_REVIEW);\n};","map":{"version":3,"sources":["/opt/work/NZ_test/src/modules/collection/utils.ts"],"names":["ContractName","getContract","config","locations","isEqual","includes","decodeURN","isThirdParty","URNType","SyncStatus","CollectionType","MAX_TP_ITEMS_TO_REVIEW","MIN_TP_ITEMS_TO_REVIEW","TP_TRESHOLD_TO_REVIEW","UNSYNCED_COLLECTION_ERROR_PREFIX","setOnSale","collection","wallet","isOnSale","address","getSaleAddress","networks","MATIC","chainId","hasAccess","minters","isLocked","lock","isPublished","deadline","Date","setDate","getDate","getTime","now","CollectionStore","toLowerCase","getCollectionEditorURL","items","itemEditor","collectionId","id","itemId","length","undefined","getExplorerURL","item_ids","Error","EXPLORER_URL","get","BUILDER_SERVER_URL","URL","join","getCollectionBaseURI","getCollectionType","urn","type","COLLECTIONS_THIRDPARTY","THIRD_PARTY","COLLECTIONS_V2","BASE_AVATARS","DECENTRALAND","getCollectionSymbol","vowelLessName","name","replace","toUpperCase","toCollectionObject","collections","reduce","obj","_","rest","canSeeCollection","owner","managers","some","addr","sortCollectionByCreatedAt","collectionA","collectionB","createdAt","isOwner","isMinter","minter","isManager","manager","canMintCollectionItems","isApproved","canManageCollectionItems","hasReviews","reviewedAt","getTotalAmountOfMintedItems","mints","total","mint","amount","getMostRelevantStatus","statusA","statusB","sorted","Object","values","indexA","indexOf","indexB","isTPCollection","getCollectionFactoryContract","CollectionFactoryV3","getTPThresholdToReview","totalItems","Math","max","ceil","min"],"mappings":"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","sourcesContent":["import { ChainId } from '@dcl/schemas'\nimport { ContractName, getContract } from 'decentraland-transactions'\nimport { Wallet } from 'decentraland-dapps/dist/modules/wallet/types'\nimport { config } from 'config'\nimport { locations } from 'routing/locations'\nimport { isEqual, includes } from 'lib/address'\nimport { decodeURN, isThirdParty, URNType } from 'lib/urn'\nimport { Item, SyncStatus } from 'modules/item/types'\nimport { Collection, Access, Mint, CollectionType } from './types'\nimport { MAX_TP_ITEMS_TO_REVIEW, MIN_TP_ITEMS_TO_REVIEW, TP_TRESHOLD_TO_REVIEW } from './constants'\n\nexport const UNSYNCED_COLLECTION_ERROR_PREFIX = 'UnsyncedCollection:'\n\nexport function setOnSale(collection: Collection, wallet: Wallet, isOnSale: boolean): Access[] {\n  const address = getSaleAddress(wallet.networks.MATIC.chainId)\n  return [{ address, hasAccess: isOnSale, collection }]\n}\n\nexport function isOnSale(collection: Collection, wallet: Wallet) {\n  const address = getSaleAddress(wallet.networks.MATIC.chainId)\n  return includes(collection.minters, address)\n}\n\nexport function isLocked(collection: Collection) {\n  if (!collection.lock || collection.isPublished) {\n    return false\n  }\n  const deadline = new Date(collection.lock)\n  deadline.setDate(deadline.getDate() + 1)\n\n  return deadline.getTime() > Date.now()\n}\n\nexport function getSaleAddress(chainId: ChainId) {\n  return getContract(ContractName.CollectionStore, chainId).address.toLowerCase()\n}\n\nexport function getCollectionEditorURL(collection: Collection, items: Item[]): string {\n  return locations.itemEditor({ collectionId: collection.id, itemId: items.length > 0 ? items[0].id : undefined })\n}\n\nexport function getExplorerURL({ collection, item_ids }: { collection?: Collection; item_ids?: string[] }): string {\n  if (!collection && !item_ids) {\n    throw new Error('Either a collection or item ids must be specified to get the explorer url')\n  }\n  const EXPLORER_URL = config.get('EXPLORER_URL', '')\n  const BUILDER_SERVER_URL = config.get('BUILDER_SERVER_URL', '')\n  let URL = `${EXPLORER_URL}?BUILDER_SERVER_URL=${BUILDER_SERVER_URL}&NETWORK=ropsten&DEBUG_MODE=true`\n\n  if (collection) {\n    URL += `&WITH_COLLECTIONS=${collection.id}`\n  } else if (item_ids) {\n    URL += `&WITH_ITEMS=${item_ids.join(',')}`\n  }\n\n  return URL\n}\n\nexport function getCollectionBaseURI() {\n  return config.get('ERC721_COLLECTION_BASE_URI', '')\n}\n\nexport function getCollectionType(collection: Collection): CollectionType {\n  const { type } = decodeURN(collection.urn)\n\n  switch (type) {\n    case URNType.COLLECTIONS_THIRDPARTY:\n      return CollectionType.THIRD_PARTY\n    case URNType.COLLECTIONS_V2:\n    case URNType.BASE_AVATARS:\n      return CollectionType.DECENTRALAND\n    default:\n      throw new Error(`Tried to get a collection type from an invalid URN: ${collection.urn}`)\n  }\n}\n\nexport function getCollectionSymbol(collection: Collection) {\n  const vowelLessName = collection.name.replace(/a|e|i|o|u|\\s/g, '')\n  return 'DCL-' + vowelLessName.toUpperCase()\n}\n\nexport function toCollectionObject(collections: Collection[]) {\n  return collections.reduce((obj, collection) => {\n    const { items: _, ...rest } = collection as Collection & { items?: any[] }\n    obj[collection.id] = rest\n    return obj\n  }, {} as Record<string, Collection>)\n}\n\nexport function canSeeCollection(collection: Collection, address: string) {\n  return !!collection && [collection.owner, ...collection.managers, ...collection.minters].some(addr => isEqual(addr, address))\n}\n\nexport function sortCollectionByCreatedAt(collectionA: Collection, collectionB: Collection) {\n  return collectionB.createdAt - collectionA.createdAt\n}\n\nexport function isOwner(collection: Collection, address?: string) {\n  return !!address && isEqual(collection.owner, address)\n}\n\nexport function isMinter(collection: Collection, address?: string) {\n  return !!address && collection.minters.some(minter => isEqual(minter, address))\n}\n\nexport function isManager(collection: Collection, address?: string) {\n  return !!address && collection.managers.some(manager => isEqual(manager, address))\n}\n\nexport function canMintCollectionItems(collection: Collection, address?: string) {\n  return collection.isApproved && (isOwner(collection, address) || isMinter(collection, address))\n}\n\nexport function canManageCollectionItems(collection: Collection, address?: string) {\n  return isOwner(collection, address) || isManager(collection, address)\n}\n\nexport function hasReviews(collection: Collection) {\n  return collection.reviewedAt !== collection.createdAt\n}\n\nexport function getTotalAmountOfMintedItems(mints: Mint[]) {\n  return mints.reduce((total, mint) => total + mint.amount, 0)\n}\n\nexport function getMostRelevantStatus(statusA: SyncStatus, statusB: SyncStatus) {\n  const sorted = Object.values(SyncStatus)\n  const indexA = sorted.indexOf(statusA)\n  const indexB = sorted.indexOf(statusB)\n  return indexA < indexB ? statusA : statusB\n}\n\nexport function isTPCollection(collection: Collection): boolean {\n  return isThirdParty(collection.urn)\n}\n\nexport function getCollectionFactoryContract(chainId: ChainId) {\n  return getContract(ContractName.CollectionFactoryV3, chainId)\n}\n\nexport const getTPThresholdToReview = (totalItems: number) => {\n  // Reference: https://governance.decentraland.org/proposal/?id=f69c4d40-aaaf-11ec-87a7-6d2a41508231\n  // Max to review, 300 items, min to review is 50 or 1% of the collection\n  if (totalItems < MIN_TP_ITEMS_TO_REVIEW) {\n    return totalItems\n  } else if (totalItems >= MIN_TP_ITEMS_TO_REVIEW && totalItems * TP_TRESHOLD_TO_REVIEW < MAX_TP_ITEMS_TO_REVIEW) {\n    return Math.max(MIN_TP_ITEMS_TO_REVIEW, Math.ceil(totalItems * TP_TRESHOLD_TO_REVIEW))\n  }\n  return Math.min(Math.ceil(totalItems * TP_TRESHOLD_TO_REVIEW), MAX_TP_ITEMS_TO_REVIEW)\n}\n"]},"metadata":{},"sourceType":"module"}