{"ast":null,"code":"\"use strict\";\n/*\n  This file is part of web3x.\n\n  web3x is free software: you can redistribute it and/or modify\n  it under the terms of the GNU Lesser General Public License as published by\n  the Free Software Foundation, either version 3 of the License, or\n  (at your option) any later version.\n\n  web3x is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  GNU Lesser General Public License for more details.\n\n  You should have received a copy of the GNU Lesser General Public License\n  along with web3x.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nvar _objectSpread = require(\"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectSpread\");\n\nvar _regeneratorRuntime = require(\"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar sent_contract_tx_1 = require(\"./sent-contract-tx\");\n\nvar Tx = /*#__PURE__*/function () {\n  function Tx(eth, contractEntry, contractAbi, contractAddress) {\n    var args = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];\n    var defaultOptions = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n\n    _classCallCheck(this, Tx);\n\n    this.eth = eth;\n    this.contractEntry = contractEntry;\n    this.contractAbi = contractAbi;\n    this.contractAddress = contractAddress;\n    this.args = args;\n    this.defaultOptions = defaultOptions;\n  }\n\n  _createClass(Tx, [{\n    key: \"estimateGas\",\n    value: function () {\n      var _estimateGas = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var options,\n            _args = arguments;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                options = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n                _context.next = 3;\n                return this.eth.estimateGas(this.getTx(options));\n\n              case 3:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function estimateGas() {\n        return _estimateGas.apply(this, arguments);\n      }\n\n      return estimateGas;\n    }()\n  }, {\n    key: \"call\",\n    value: function () {\n      var _call = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var options,\n            block,\n            result,\n            _args2 = arguments;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                options = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {};\n                block = _args2.length > 1 ? _args2[1] : undefined;\n                _context2.next = 4;\n                return this.eth.call(this.getTx(options), block);\n\n              case 4:\n                result = _context2.sent;\n                return _context2.abrupt(\"return\", this.contractEntry.decodeReturnValue(result));\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function call() {\n        return _call.apply(this, arguments);\n      }\n\n      return call;\n    }()\n  }, {\n    key: \"getCallRequestPayload\",\n    value: function getCallRequestPayload(options, block) {\n      var _this = this;\n\n      var result = this.eth.request.call(this.getTx(options), block);\n      return _objectSpread({}, result, {\n        format: function format(result) {\n          return _this.contractEntry.decodeReturnValue(result);\n        }\n      });\n    }\n  }, {\n    key: \"send\",\n    value: function send(options) {\n      var tx = this.getTx(options);\n\n      if (!this.contractEntry.payable && tx.value !== undefined && tx.value > 0) {\n        throw new Error('Can not send value to non-payable contract method.');\n      }\n\n      var promise = this.eth.sendTransaction(tx).getTxHash();\n      return new sent_contract_tx_1.SentContractTx(this.eth, this.contractAbi, promise);\n    }\n  }, {\n    key: \"getSendRequestPayload\",\n    value: function getSendRequestPayload(options) {\n      return this.eth.request.sendTransaction(this.getTx(options));\n    }\n  }, {\n    key: \"encodeABI\",\n    value: function encodeABI() {\n      return this.contractEntry.encodeABI(this.args);\n    }\n  }, {\n    key: \"getTx\",\n    value: function getTx() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return {\n        to: this.contractAddress,\n        from: options.from || this.defaultOptions.from,\n        gasPrice: options.gasPrice || this.defaultOptions.gasPrice,\n        gas: options.gas || this.defaultOptions.gas,\n        value: options.value,\n        data: this.encodeABI(),\n        nonce: options.nonce\n      };\n    }\n  }]);\n\n  return Tx;\n}();\n\nexports.Tx = Tx;","map":null,"metadata":{},"sourceType":"script"}