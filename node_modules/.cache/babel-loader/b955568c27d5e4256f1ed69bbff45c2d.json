{"ast":null,"code":"'use strict';\n\nvar error = require('pull-stream/sources/error');\n\nvar once = require('pull-stream/sources/once');\n\nvar empty = require('pull-stream/sources/empty');\n\nvar extractDataFromBlock = require('./extract-data-from-block'); // Logic to export a single raw block\n\n\nmodule.exports = function (cid, node, name, path, pathRest, resolve, size, dag, parent, depth, options) {\n  var accepts = pathRest[0];\n\n  if (accepts !== undefined && accepts !== path) {\n    return empty();\n  }\n\n  size = size || node.length;\n  var offset = options.offset;\n  var length = options.length;\n\n  if (offset < 0) {\n    return error(new Error('Offset must be greater than or equal to 0'));\n  }\n\n  if (offset > size) {\n    return error(new Error('Offset must be less than the file size'));\n  }\n\n  if (length < 0) {\n    return error(new Error('Length must be greater than or equal to 0'));\n  }\n\n  if (length === 0) {\n    return once({\n      depth: depth,\n      content: once(Buffer.alloc(0)),\n      hash: cid,\n      name: name,\n      path: path,\n      size: size,\n      type: 'raw'\n    });\n  }\n\n  if (!offset) {\n    offset = 0;\n  }\n\n  if (!length || offset + length > size) {\n    length = size - offset;\n  }\n\n  return once({\n    depth: depth,\n    content: once(extractDataFromBlock(node, 0, offset, offset + length)),\n    hash: cid,\n    name: name,\n    path: path,\n    size: size,\n    type: 'raw'\n  });\n};","map":null,"metadata":{},"sourceType":"script"}