{"ast":null,"code":"import _defineProperty from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { loadingReducer } from 'decentraland-dapps/dist/modules/loading/reducer';\nimport { GENERATE_IDENTITY_REQUEST, GENERATE_IDENTITY_SUCCESS, GENERATE_IDENTITY_FAILURE, DESTROY_IDENTITY } from './actions';\nexport var INITIAL_STATE = {\n  data: {},\n  loading: [],\n  error: null\n};\nexport function identityReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INITIAL_STATE;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case GENERATE_IDENTITY_REQUEST:\n      {\n        return _objectSpread({}, state, {\n          loading: loadingReducer(state.loading, action)\n        });\n      }\n\n    case GENERATE_IDENTITY_SUCCESS:\n      {\n        var _action$payload = action.payload,\n            address = _action$payload.address,\n            identity = _action$payload.identity;\n        return _objectSpread({}, state, {\n          loading: loadingReducer(state.loading, action),\n          error: null,\n          data: _objectSpread({}, state.data, _defineProperty({}, address, identity))\n        });\n      }\n\n    case GENERATE_IDENTITY_FAILURE:\n      {\n        return _objectSpread({}, state, {\n          loading: loadingReducer(state.loading, action),\n          error: action.payload.error\n        });\n      }\n\n    case DESTROY_IDENTITY:\n      {\n        var _address = action.payload.address;\n\n        var data = _objectSpread({}, state.data);\n\n        delete data[_address];\n        return _objectSpread({}, state, {\n          data: data\n        });\n      }\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/opt/work/NZ_test/src/modules/identity/reducer.ts"],"names":["loadingReducer","GENERATE_IDENTITY_REQUEST","GENERATE_IDENTITY_SUCCESS","GENERATE_IDENTITY_FAILURE","DESTROY_IDENTITY","INITIAL_STATE","data","loading","error","identityReducer","state","action","type","payload","address","identity"],"mappings":";;AACA,SAASA,cAAT,QAA6C,iDAA7C;AACA,SAIEC,yBAJF,EAKEC,yBALF,EAMEC,yBANF,EAQEC,gBARF,QASO,WATP;AAiBA,OAAO,IAAMC,aAA4B,GAAG;AAC1CC,EAAAA,IAAI,EAAE,EADoC;AAE1CC,EAAAA,OAAO,EAAE,EAFiC;AAG1CC,EAAAA,KAAK,EAAE;AAHmC,CAArC;AAYP,OAAO,SAASC,eAAT,GAA6G;AAAA,MAApFC,KAAoF,uEAA7DL,aAA6D;AAAA,MAA9CM,MAA8C;;AAClH,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKX,yBAAL;AAAgC;AAC9B,iCACKS,KADL;AAEEH,UAAAA,OAAO,EAAEP,cAAc,CAACU,KAAK,CAACH,OAAP,EAAgBI,MAAhB;AAFzB;AAID;;AACD,SAAKT,yBAAL;AAAgC;AAAA,8BACAS,MAAM,CAACE,OADP;AAAA,YACtBC,OADsB,mBACtBA,OADsB;AAAA,YACbC,QADa,mBACbA,QADa;AAE9B,iCACKL,KADL;AAEEH,UAAAA,OAAO,EAAEP,cAAc,CAACU,KAAK,CAACH,OAAP,EAAgBI,MAAhB,CAFzB;AAGEH,UAAAA,KAAK,EAAE,IAHT;AAIEF,UAAAA,IAAI,oBACCI,KAAK,CAACJ,IADP,sBAEDQ,OAFC,EAESC,QAFT;AAJN;AASD;;AACD,SAAKZ,yBAAL;AAAgC;AAC9B,iCACKO,KADL;AAEEH,UAAAA,OAAO,EAAEP,cAAc,CAACU,KAAK,CAACH,OAAP,EAAgBI,MAAhB,CAFzB;AAGEH,UAAAA,KAAK,EAAEG,MAAM,CAACE,OAAP,CAAeL;AAHxB;AAKD;;AACD,SAAKJ,gBAAL;AAAuB;AAAA,YACbU,QADa,GACDH,MAAM,CAACE,OADN,CACbC,OADa;;AAErB,YAAMR,IAAI,qBAAQI,KAAK,CAACJ,IAAd,CAAV;;AACA,eAAOA,IAAI,CAACQ,QAAD,CAAX;AACA,iCACKJ,KADL;AAEEJ,UAAAA,IAAI,EAAJA;AAFF;AAID;;AACD;AACE,aAAOI,KAAP;AApCJ;AAsCD","sourcesContent":["import { AuthIdentity } from 'dcl-crypto'\nimport { loadingReducer, LoadingState } from 'decentraland-dapps/dist/modules/loading/reducer'\nimport {\n  GenerateIdentityRequestAction,\n  GenerateIdentitySuccessAction,\n  GenerateIdentityFailureAction,\n  GENERATE_IDENTITY_REQUEST,\n  GENERATE_IDENTITY_SUCCESS,\n  GENERATE_IDENTITY_FAILURE,\n  DestroyIdentityAction,\n  DESTROY_IDENTITY\n} from './actions'\n\nexport type IdentityState = {\n  data: Record<string, AuthIdentity>\n  loading: LoadingState\n  error: string | null\n}\n\nexport const INITIAL_STATE: IdentityState = {\n  data: {},\n  loading: [],\n  error: null\n}\n\nexport type IdentityReducerAction =\n  | GenerateIdentityRequestAction\n  | GenerateIdentitySuccessAction\n  | GenerateIdentityFailureAction\n  | DestroyIdentityAction\n\nexport function identityReducer(state: IdentityState = INITIAL_STATE, action: IdentityReducerAction): IdentityState {\n  switch (action.type) {\n    case GENERATE_IDENTITY_REQUEST: {\n      return {\n        ...state,\n        loading: loadingReducer(state.loading, action)\n      }\n    }\n    case GENERATE_IDENTITY_SUCCESS: {\n      const { address, identity } = action.payload\n      return {\n        ...state,\n        loading: loadingReducer(state.loading, action),\n        error: null,\n        data: {\n          ...state.data,\n          [address]: identity\n        }\n      }\n    }\n    case GENERATE_IDENTITY_FAILURE: {\n      return {\n        ...state,\n        loading: loadingReducer(state.loading, action),\n        error: action.payload.error\n      }\n    }\n    case DESTROY_IDENTITY: {\n      const { address } = action.payload\n      const data = { ...state.data }\n      delete data[address]\n      return {\n        ...state,\n        data\n      }\n    }\n    default:\n      return state\n  }\n}\n"]},"metadata":{},"sourceType":"module"}