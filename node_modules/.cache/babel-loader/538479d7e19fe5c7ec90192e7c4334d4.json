{"ast":null,"code":"import _objectSpread from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/opt/work/NZ_test/src/components/Modals/EditProjectModal/EditProjectModal.tsx\";\nimport * as React from 'react';\nimport { Header, Button, Form } from 'decentraland-ui';\nimport Modal from 'decentraland-dapps/dist/containers/Modal';\nimport { t } from 'decentraland-dapps/dist/modules/translation/utils';\nimport { DeploymentStatus } from 'modules/deployment/types';\nimport ProjectFields from 'components/ProjectFields';\nimport ProjectLayoutPicker from 'components/ProjectLayoutPicker';\nimport './EditProjectModal.css';\n\nvar EditProjectModal = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(EditProjectModal, _React$PureComponent);\n\n  function EditProjectModal() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, EditProjectModal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(EditProjectModal)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      title: _this.props.currentProject.title,\n      description: _this.props.currentProject.description,\n      rows: _this.props.currentProject.layout.rows,\n      cols: _this.props.currentProject.layout.cols,\n      hasError: false\n    };\n\n    _this.handleSubmit = function () {\n      var _this$state = _this.state,\n          title = _this$state.title,\n          description = _this$state.description,\n          cols = _this$state.cols,\n          rows = _this$state.rows;\n      var _this$props = _this.props,\n          currentProject = _this$props.currentProject,\n          onSave = _this$props.onSave,\n          onClose = _this$props.onClose;\n\n      if (currentProject) {\n        var newProject = {\n          title: title,\n          description: description,\n          layout: {\n            rows: rows,\n            cols: cols\n          }\n        };\n        onSave(currentProject.id, newProject);\n      }\n\n      onClose();\n    };\n\n    _this.handleLayoutChange = function (projectLayout) {\n      _this.setState(_objectSpread({}, projectLayout));\n    };\n\n    _this.handleTitleChange = function (event) {\n      _this.setState({\n        title: event.currentTarget.value\n      });\n    };\n\n    _this.handleDescriptionChange = function (event) {\n      _this.setState({\n        description: event.currentTarget.value\n      });\n    };\n\n    _this.handleClose = function () {// do nothing, prevents dismissing\n    };\n\n    return _this;\n  }\n\n  _createClass(EditProjectModal, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.currentProject && nextProps.currentScene) {\n        var _nextProps$currentPro = nextProps.currentProject,\n            title = _nextProps$currentPro.title,\n            description = _nextProps$currentPro.description;\n        this.setState({\n          title: title,\n          description: description\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          name = _this$props2.name,\n          deploymentStatus = _this$props2.deploymentStatus,\n          onClose = _this$props2.onClose;\n      var _this$state2 = this.state,\n          title = _this$state2.title,\n          description = _this$state2.description,\n          rows = _this$state2.rows,\n          cols = _this$state2.cols,\n          hasError = _this$state2.hasError;\n      var isSubmitDisabled = hasError || deploymentStatus !== DeploymentStatus.UNPUBLISHED;\n      return /*#__PURE__*/React.createElement(Modal, {\n        name: name,\n        onClose: this.handleClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }\n      }, t('edit_project_modal.title')), /*#__PURE__*/React.createElement(Modal.Content, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"details\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(ProjectFields.Title, {\n        value: title,\n        onChange: this.handleTitleChange,\n        required: true,\n        icon: \"asterisk\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(ProjectFields.Description, {\n        value: description,\n        onChange: this.handleDescriptionChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"picker\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Header, {\n        sub: true,\n        className: \"picker-label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }\n      }, t('edit_project_modal.custom_layout_label')), /*#__PURE__*/React.createElement(ProjectLayoutPicker, {\n        rows: rows,\n        cols: cols,\n        onChange: this.handleLayoutChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"error\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }\n      }, deploymentStatus !== DeploymentStatus.UNPUBLISHED && t('edit_project_modal.unpublish_needed'))), /*#__PURE__*/React.createElement(Modal.Actions, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        secondary: true,\n        onClick: onClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }\n      }, t('global.cancel')), /*#__PURE__*/React.createElement(Button, {\n        primary: true,\n        disabled: isSubmitDisabled,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }\n      }, t('global.save')))));\n    }\n  }]);\n\n  return EditProjectModal;\n}(React.PureComponent);\n\nexport { EditProjectModal as default };","map":{"version":3,"sources":["/opt/work/NZ_test/src/components/Modals/EditProjectModal/EditProjectModal.tsx"],"names":["React","Header","Button","Form","Modal","t","DeploymentStatus","ProjectFields","ProjectLayoutPicker","EditProjectModal","state","title","props","currentProject","description","rows","layout","cols","hasError","handleSubmit","onSave","onClose","newProject","id","handleLayoutChange","projectLayout","setState","handleTitleChange","event","currentTarget","value","handleDescriptionChange","handleClose","nextProps","currentScene","name","deploymentStatus","isSubmitDisabled","UNPUBLISHED","PureComponent"],"mappings":"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","sourcesContent":["import * as React from 'react'\nimport { Header, Button, Form } from 'decentraland-ui'\nimport Modal from 'decentraland-dapps/dist/containers/Modal'\nimport { t } from 'decentraland-dapps/dist/modules/translation/utils'\n\nimport { ProjectLayout, Project } from 'modules/project/types'\nimport { DeploymentStatus } from 'modules/deployment/types'\nimport ProjectFields from 'components/ProjectFields'\nimport ProjectLayoutPicker from 'components/ProjectLayoutPicker'\n\nimport { Props, State } from './EditProjectModal.types'\nimport './EditProjectModal.css'\n\nexport default class EditProjectModal extends React.PureComponent<Props, State> {\n  state = {\n    title: this.props.currentProject.title,\n    description: this.props.currentProject.description,\n\n    rows: this.props.currentProject.layout.rows,\n    cols: this.props.currentProject.layout.cols,\n    hasError: false\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.currentProject && nextProps.currentScene) {\n      const { title, description } = nextProps.currentProject\n\n      this.setState({ title, description })\n    }\n  }\n\n  handleSubmit = () => {\n    const { title, description, cols, rows } = this.state\n    const { currentProject, onSave, onClose } = this.props\n\n    if (currentProject) {\n      const newProject: Partial<Project> = {\n        title,\n        description,\n        layout: {\n          rows,\n          cols\n        }\n      }\n\n      onSave(currentProject.id, newProject)\n    }\n    onClose()\n  }\n\n  handleLayoutChange = (projectLayout: ProjectLayout) => {\n    this.setState({ ...projectLayout })\n  }\n\n  handleTitleChange = (event: React.FormEvent<HTMLInputElement>) => {\n    this.setState({ title: event.currentTarget.value })\n  }\n\n  handleDescriptionChange = (event: React.FormEvent<HTMLInputElement>) => {\n    this.setState({ description: event.currentTarget.value })\n  }\n\n  handleClose = () => {\n    // do nothing, prevents dismissing\n  }\n\n  render() {\n    const { name, deploymentStatus, onClose } = this.props\n    const { title, description, rows, cols, hasError } = this.state\n    const isSubmitDisabled = hasError || deploymentStatus !== DeploymentStatus.UNPUBLISHED\n\n    return (\n      <Modal name={name} onClose={this.handleClose}>\n        <Form onSubmit={this.handleSubmit}>\n          <Modal.Header>{t('edit_project_modal.title')}</Modal.Header>\n          <Modal.Content>\n            <div className=\"details\">\n              <ProjectFields.Title value={title} onChange={this.handleTitleChange} required icon=\"asterisk\" />\n              <ProjectFields.Description value={description} onChange={this.handleDescriptionChange} />\n\n              <div className=\"picker\">\n                <Header sub className=\"picker-label\">\n                  {t('edit_project_modal.custom_layout_label')}\n                </Header>\n                <ProjectLayoutPicker rows={rows} cols={cols} onChange={this.handleLayoutChange} />\n              </div>\n            </div>\n            <div className=\"error\">{deploymentStatus !== DeploymentStatus.UNPUBLISHED && t('edit_project_modal.unpublish_needed')}</div>\n          </Modal.Content>\n          <Modal.Actions>\n            <Button secondary onClick={onClose}>\n              {t('global.cancel')}\n            </Button>\n            <Button primary disabled={isSubmitDisabled}>\n              {t('global.save')}\n            </Button>\n          </Modal.Actions>\n        </Form>\n      </Modal>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}