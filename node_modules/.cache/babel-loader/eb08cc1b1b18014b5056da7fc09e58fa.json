{"ast":null,"code":"import _classCallCheck from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/opt/work/NZ_test/src/components/CollectionDetailPage/CollectionDetailPage.tsx\";\nimport * as React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Network } from '@dcl/schemas';\nimport { Section, Row, Narrow, Column, Header, Button, Icon, Popup, Radio } from 'decentraland-ui';\nimport { NetworkCheck } from 'decentraland-dapps/dist/containers';\nimport { t, T } from 'decentraland-dapps/dist/modules/translation/utils';\nimport { locations } from 'routing/locations';\nimport { canMintCollectionItems, canSeeCollection, getCollectionEditorURL, isOnSale as isCollectionOnSale, isLocked as isCollectionLocked, isOwner } from 'modules/collection/utils';\nimport CollectionProvider from 'components/CollectionProvider';\nimport LoggedInDetailPage from 'components/LoggedInDetailPage';\nimport Notice from 'components/Notice';\nimport NotFound from 'components/NotFound';\nimport BuilderIcon from 'components/Icon';\nimport Back from 'components/Back';\nimport CollectionStatus from 'components/CollectionStatus';\nimport CollectionPublishButton from './CollectionPublishButton';\nimport CollectionContextMenu from './CollectionContextMenu';\nimport CollectionItem from './CollectionItem';\nimport './CollectionDetailPage.css';\nvar STORAGE_KEY = 'dcl-collection-notice';\n\nvar CollectionDetailPage = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(CollectionDetailPage, _React$PureComponent);\n\n  function CollectionDetailPage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CollectionDetailPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CollectionDetailPage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.handleMintItems = function () {\n      var _this$props = _this.props,\n          collection = _this$props.collection,\n          onOpenModal = _this$props.onOpenModal;\n      onOpenModal('MintItemsModal', {\n        collectionId: collection.id\n      });\n    };\n\n    _this.handleNewItem = function () {\n      var _this$props2 = _this.props,\n          collection = _this$props2.collection,\n          onOpenModal = _this$props2.onOpenModal;\n      onOpenModal('CreateSingleItemModal', {\n        collectionId: collection.id\n      });\n    };\n\n    _this.handleEditName = function () {\n      var _this$props3 = _this.props,\n          collection = _this$props3.collection,\n          onOpenModal = _this$props3.onOpenModal;\n\n      if (collection && !collection.isPublished) {\n        onOpenModal('EditCollectionNameModal', {\n          collection: collection\n        });\n      }\n    };\n\n    _this.handleOnSaleChange = function (_event, checkboxProps) {\n      var _this$props4 = _this.props,\n          collection = _this$props4.collection,\n          onOpenModal = _this$props4.onOpenModal;\n      var checked = checkboxProps.checked;\n\n      if (collection && checked !== undefined) {\n        onOpenModal('SellCollectionModal', {\n          collectionId: collection.id,\n          isOnSale: checked\n        });\n      }\n    };\n\n    _this.handleGoBack = function () {\n      _this.props.onNavigate(locations.collections());\n    };\n\n    return _this;\n  }\n\n  _createClass(CollectionDetailPage, [{\n    key: \"hasItems\",\n    value: function hasItems(items) {\n      return items.length > 0;\n    }\n  }, {\n    key: \"hasAccess\",\n    value: function hasAccess() {\n      var _this$props5 = this.props,\n          wallet = _this$props5.wallet,\n          collection = _this$props5.collection;\n      return collection !== null && canSeeCollection(collection, wallet.address);\n    }\n  }, {\n    key: \"renderPage\",\n    value: function renderPage(items) {\n      var _this2 = this;\n\n      var _this$props6 = this.props,\n          wallet = _this$props6.wallet,\n          isOnSaleLoading = _this$props6.isOnSaleLoading;\n      var collection = this.props.collection;\n      var canMint = canMintCollectionItems(collection, wallet.address);\n      var isOnSale = isCollectionOnSale(collection, wallet);\n      var isLocked = isCollectionLocked(collection);\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Section, {\n        className: collection.isPublished ? 'is-published' : '',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Back, {\n        absolute: true,\n        onClick: this.handleGoBack,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Narrow, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Column, {\n        className: \"header-column\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }\n      }, isLocked ? /*#__PURE__*/React.createElement(Header, {\n        size: \"huge\",\n        className: \"name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }\n      }, collection.isPublished && /*#__PURE__*/React.createElement(CollectionStatus, {\n        collection: collection,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 50\n        }\n      }), collection.name) : /*#__PURE__*/React.createElement(Row, {\n        className: \"header-row\",\n        onClick: this.handleEditName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Header, {\n        size: \"huge\",\n        className: \"name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 23\n        }\n      }, collection.name), /*#__PURE__*/React.createElement(BuilderIcon, {\n        name: \"edit\",\n        className: \"edit-collection-name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 23\n        }\n      }))), /*#__PURE__*/React.createElement(Column, {\n        align: \"right\",\n        shrink: false,\n        grow: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        className: \"actions\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 19\n        }\n      }, collection.isPublished ? /*#__PURE__*/React.createElement(React.Fragment, null, isOwner(collection, wallet.address) ? /*#__PURE__*/React.createElement(Popup, {\n        content: isOnSaleLoading ? t('global.loading') : isOnSale ? t('collection_detail_page.unset_on_sale_popup') : t('collection_detail_page.set_on_sale_popup'),\n        position: \"top center\",\n        trigger: /*#__PURE__*/React.createElement(NetworkCheck, {\n          network: Network.MATIC,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 31\n          }\n        }, function (isEnabled) {\n          return /*#__PURE__*/React.createElement(Radio, {\n            toggle: true,\n            className: \"on-sale\",\n            checked: isOnSale,\n            onChange: _this2.handleOnSaleChange,\n            label: t('collection_detail_page.on_sale'),\n            disabled: isOnSaleLoading || !isEnabled,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 35\n            }\n          });\n        }),\n        hideOnScroll: true,\n        on: \"hover\",\n        inverted: true,\n        flowing: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 27\n        }\n      }) : null, /*#__PURE__*/React.createElement(Button, {\n        basic: true,\n        className: \"action-button\",\n        disabled: !canMint,\n        onClick: this.handleMintItems,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        name: \"paper plane\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 27\n        }\n      }, t('collection_detail_page.mint_items')))) : /*#__PURE__*/React.createElement(Button, {\n        basic: true,\n        className: \"action-button\",\n        disabled: isLocked,\n        onClick: this.handleNewItem,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        name: \"plus\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 25\n        }\n      }, t('collection_detail_page.new_item'))), canSeeCollection(collection, wallet.address) ? /*#__PURE__*/React.createElement(CollectionContextMenu, {\n        collection: collection,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 69\n        }\n      }) : null, /*#__PURE__*/React.createElement(CollectionPublishButton, {\n        collection: collection,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }\n      }))))))), /*#__PURE__*/React.createElement(Narrow, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Notice, {\n        storageKey: STORAGE_KEY,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(T, {\n        id: \"collection_detail_page.notice\",\n        values: {\n          editor_link: /*#__PURE__*/React.createElement(Link, {\n            to: getCollectionEditorURL(collection, items),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 30\n            }\n          }, t('global.click_here'))\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }\n      })), this.hasItems(items) ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"collection-items\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }\n      }, items.map(function (item) {\n        return /*#__PURE__*/React.createElement(CollectionItem, {\n          key: item.id,\n          collection: collection,\n          item: item,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 17\n          }\n        });\n      })) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"empty\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"sparkles\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 15\n        }\n      }, t('collection_detail_page.start_adding_items'), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 17\n        }\n      }), t('collection_detail_page.cant_remove')))));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props7 = this.props,\n          isLoading = _this$props7.isLoading,\n          collection = _this$props7.collection;\n      var hasAccess = this.hasAccess();\n      var HUGE_PAGE_SIZE = 5000; // TODO: Remove this ASAP and implement pagination\n\n      return /*#__PURE__*/React.createElement(CollectionProvider, {\n        id: collection === null || collection === void 0 ? void 0 : collection.id,\n        itemsPage: 1,\n        itemsPageSize: HUGE_PAGE_SIZE,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 7\n        }\n      }, function (_ref) {\n        var isLoadingCollectionData = _ref.isLoading,\n            items = _ref.items;\n        return /*#__PURE__*/React.createElement(LoggedInDetailPage, {\n          className: \"CollectionDetailPage\",\n          hasNavigation: !hasAccess && !isLoading && !isLoadingCollectionData,\n          isLoading: isLoading || isLoadingCollectionData,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 11\n          }\n        }, hasAccess ? _this3.renderPage(items) : /*#__PURE__*/React.createElement(NotFound, {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 51\n          }\n        }));\n      });\n    }\n  }]);\n\n  return CollectionDetailPage;\n}(React.PureComponent);\n\nexport { CollectionDetailPage as default };","map":{"version":3,"sources":["/opt/work/NZ_test/src/components/CollectionDetailPage/CollectionDetailPage.tsx"],"names":["React","Link","Network","Section","Row","Narrow","Column","Header","Button","Icon","Popup","Radio","NetworkCheck","t","T","locations","canMintCollectionItems","canSeeCollection","getCollectionEditorURL","isOnSale","isCollectionOnSale","isLocked","isCollectionLocked","isOwner","CollectionProvider","LoggedInDetailPage","Notice","NotFound","BuilderIcon","Back","CollectionStatus","CollectionPublishButton","CollectionContextMenu","CollectionItem","STORAGE_KEY","CollectionDetailPage","handleMintItems","props","collection","onOpenModal","collectionId","id","handleNewItem","handleEditName","isPublished","handleOnSaleChange","_event","checkboxProps","checked","undefined","handleGoBack","onNavigate","collections","items","length","wallet","address","isOnSaleLoading","canMint","name","MATIC","isEnabled","editor_link","hasItems","map","item","isLoading","hasAccess","HUGE_PAGE_SIZE","isLoadingCollectionData","renderPage","PureComponent"],"mappings":"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","sourcesContent":["import * as React from 'react'\nimport { Link } from 'react-router-dom'\nimport { Network } from '@dcl/schemas'\nimport { Section, Row, Narrow, Column, Header, Button, Icon, Popup, Radio, CheckboxProps } from 'decentraland-ui'\nimport { NetworkCheck } from 'decentraland-dapps/dist/containers'\nimport { t, T } from 'decentraland-dapps/dist/modules/translation/utils'\nimport { locations } from 'routing/locations'\nimport {\n  canMintCollectionItems,\n  canSeeCollection,\n  getCollectionEditorURL,\n  isOnSale as isCollectionOnSale,\n  isLocked as isCollectionLocked,\n  isOwner\n} from 'modules/collection/utils'\nimport CollectionProvider from 'components/CollectionProvider'\nimport { Item } from 'modules/item/types'\nimport LoggedInDetailPage from 'components/LoggedInDetailPage'\nimport Notice from 'components/Notice'\nimport NotFound from 'components/NotFound'\nimport BuilderIcon from 'components/Icon'\nimport Back from 'components/Back'\nimport CollectionStatus from 'components/CollectionStatus'\nimport CollectionPublishButton from './CollectionPublishButton'\nimport CollectionContextMenu from './CollectionContextMenu'\nimport CollectionItem from './CollectionItem'\nimport { Props } from './CollectionDetailPage.types'\n\nimport './CollectionDetailPage.css'\n\nconst STORAGE_KEY = 'dcl-collection-notice'\n\nexport default class CollectionDetailPage extends React.PureComponent<Props> {\n  handleMintItems = () => {\n    const { collection, onOpenModal } = this.props\n    onOpenModal('MintItemsModal', { collectionId: collection!.id })\n  }\n\n  handleNewItem = () => {\n    const { collection, onOpenModal } = this.props\n    onOpenModal('CreateSingleItemModal', { collectionId: collection!.id })\n  }\n\n  handleEditName = () => {\n    const { collection, onOpenModal } = this.props\n    if (collection && !collection.isPublished) {\n      onOpenModal('EditCollectionNameModal', { collection })\n    }\n  }\n\n  handleOnSaleChange = (_event: React.FormEvent<HTMLInputElement>, checkboxProps: CheckboxProps) => {\n    const { collection, onOpenModal } = this.props\n    const { checked } = checkboxProps\n    if (collection && checked !== undefined) {\n      onOpenModal('SellCollectionModal', { collectionId: collection.id, isOnSale: checked })\n    }\n  }\n\n  handleGoBack = () => {\n    this.props.onNavigate(locations.collections())\n  }\n\n  hasItems(items: Item[]) {\n    return items.length > 0\n  }\n\n  hasAccess() {\n    const { wallet, collection } = this.props\n    return collection !== null && canSeeCollection(collection, wallet.address)\n  }\n\n  renderPage(items: Item[]) {\n    const { wallet, isOnSaleLoading } = this.props\n    const collection = this.props.collection!\n\n    const canMint = canMintCollectionItems(collection, wallet.address)\n    const isOnSale = isCollectionOnSale(collection, wallet)\n    const isLocked = isCollectionLocked(collection)\n\n    return (\n      <>\n        <Section className={collection.isPublished ? 'is-published' : ''}>\n          <Row>\n            <Back absolute onClick={this.handleGoBack} />\n            <Narrow>\n              <Row>\n                <Column className=\"header-column\">\n                  {isLocked ? (\n                    <Header size=\"huge\" className=\"name\">\n                      {collection.isPublished && <CollectionStatus collection={collection} />}\n                      {collection.name}\n                    </Header>\n                  ) : (\n                    <Row className=\"header-row\" onClick={this.handleEditName}>\n                      <Header size=\"huge\" className=\"name\">\n                        {collection.name}\n                      </Header>\n                      <BuilderIcon name=\"edit\" className=\"edit-collection-name\" />\n                    </Row>\n                  )}\n                </Column>\n                <Column align=\"right\" shrink={false} grow={false}>\n                  <Row className=\"actions\">\n                    {collection.isPublished ? (\n                      <>\n                        {isOwner(collection, wallet.address) ? (\n                          <Popup\n                            content={\n                              isOnSaleLoading\n                                ? t('global.loading')\n                                : isOnSale\n                                ? t('collection_detail_page.unset_on_sale_popup')\n                                : t('collection_detail_page.set_on_sale_popup')\n                            }\n                            position=\"top center\"\n                            trigger={\n                              <NetworkCheck network={Network.MATIC}>\n                                {isEnabled => (\n                                  <Radio\n                                    toggle\n                                    className=\"on-sale\"\n                                    checked={isOnSale}\n                                    onChange={this.handleOnSaleChange}\n                                    label={t('collection_detail_page.on_sale')}\n                                    disabled={isOnSaleLoading || !isEnabled}\n                                  />\n                                )}\n                              </NetworkCheck>\n                            }\n                            hideOnScroll={true}\n                            on=\"hover\"\n                            inverted\n                            flowing\n                          />\n                        ) : null}\n\n                        <Button basic className=\"action-button\" disabled={!canMint} onClick={this.handleMintItems}>\n                          <Icon name=\"paper plane\" />\n                          <span className=\"text\">{t('collection_detail_page.mint_items')}</span>\n                        </Button>\n                      </>\n                    ) : (\n                      <Button basic className=\"action-button\" disabled={isLocked} onClick={this.handleNewItem}>\n                        <Icon name=\"plus\" />\n                        <span className=\"text\">{t('collection_detail_page.new_item')}</span>\n                      </Button>\n                    )}\n\n                    {canSeeCollection(collection, wallet.address) ? <CollectionContextMenu collection={collection} /> : null}\n\n                    <CollectionPublishButton collection={collection} />\n                  </Row>\n                </Column>\n              </Row>\n            </Narrow>\n          </Row>\n        </Section>\n        <Narrow>\n          <Notice storageKey={STORAGE_KEY}>\n            <T\n              id=\"collection_detail_page.notice\"\n              values={{\n                editor_link: <Link to={getCollectionEditorURL(collection, items)}>{t('global.click_here')}</Link>\n              }}\n            />\n          </Notice>\n\n          {this.hasItems(items) ? (\n            <div className=\"collection-items\">\n              {items.map(item => (\n                <CollectionItem key={item.id} collection={collection} item={item} />\n              ))}\n            </div>\n          ) : (\n            <div className=\"empty\">\n              <div className=\"sparkles\" />\n              <div>\n                {t('collection_detail_page.start_adding_items')}\n                <br />\n                {t('collection_detail_page.cant_remove')}\n              </div>\n            </div>\n          )}\n        </Narrow>\n      </>\n    )\n  }\n\n  render() {\n    const { isLoading, collection } = this.props\n    const hasAccess = this.hasAccess()\n    const HUGE_PAGE_SIZE = 5000 // TODO: Remove this ASAP and implement pagination\n    return (\n      <CollectionProvider id={collection?.id} itemsPage={1} itemsPageSize={HUGE_PAGE_SIZE}>\n        {({ isLoading: isLoadingCollectionData, items }) => (\n          <LoggedInDetailPage\n            className=\"CollectionDetailPage\"\n            hasNavigation={!hasAccess && !isLoading && !isLoadingCollectionData}\n            isLoading={isLoading || isLoadingCollectionData}\n          >\n            {hasAccess ? this.renderPage(items) : <NotFound />}\n          </LoggedInDetailPage>\n        )}\n      </CollectionProvider>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}