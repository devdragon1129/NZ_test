{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _taggedTemplateLiteral = require(\"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/taggedTemplateLiteral\");\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13, _templateObject14, _templateObject15, _templateObject16, _templateObject17, _templateObject18, _templateObject19, _templateObject20, _templateObject21, _templateObject22, _templateObject23, _templateObject24, _templateObject25, _templateObject26, _templateObject27, _templateObject28, _templateObject29, _templateObject30, _templateObject31, _templateObject32, _templateObject33, _templateObject34, _templateObject35, _templateObject36, _templateObject37, _templateObject38, _templateObject39, _templateObject40, _templateObject41, _templateObject42, _templateObject43, _templateObject44, _templateObject45, _templateObject46, _templateObject47, _templateObject48, _templateObject49, _templateObject50, _templateObject51, _templateObject52, _templateObject53, _templateObject54, _templateObject55, _templateObject56, _templateObject57, _templateObject58, _templateObject59, _templateObject60, _templateObject61, _templateObject62, _templateObject63, _templateObject64, _templateObject65, _templateObject66;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ajv_1 = require(\"ajv\");\n\nvar codegen_1 = require(\"ajv/dist/compile/codegen\");\n\nvar code_1 = require(\"ajv/dist/compile/codegen/code\");\n\nvar context_1 = require(\"ajv/dist/compile/context\");\n\nvar errors_1 = require(\"ajv/dist/compile/errors\");\n\nvar names_1 = require(\"ajv/dist/compile/names\");\n\nvar keyword = \"errorMessage\";\nvar used = new ajv_1.Name(\"emUsed\");\nvar KEYWORD_PROPERTY_PARAMS = {\n  required: \"missingProperty\",\n  dependencies: \"property\",\n  dependentRequired: \"property\"\n};\nvar INTERPOLATION = /\\$\\{[^}]+\\}/;\nvar INTERPOLATION_REPLACE = /\\$\\{([^}]+)\\}/g;\nvar EMPTY_STR = /^\"\"\\s*\\+\\s*|\\s*\\+\\s*\"\"$/g;\n\nfunction errorMessage(options) {\n  return {\n    keyword: keyword,\n    schemaType: [\"string\", \"object\"],\n    post: true,\n    code: function code(cxt) {\n      var gen = cxt.gen,\n          data = cxt.data,\n          schema = cxt.schema,\n          schemaValue = cxt.schemaValue,\n          it = cxt.it;\n      if (it.createErrors === false) return;\n      var sch = schema;\n      var dataPath = codegen_1.strConcat(names_1.default.dataPath, it.errorPath);\n      gen.if(ajv_1._(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\", \" > 0\"])), names_1.default.errors), function () {\n        if (typeof sch == \"object\") {\n          var _keywordErrorsConfig = keywordErrorsConfig(sch),\n              _keywordErrorsConfig2 = _slicedToArray(_keywordErrorsConfig, 2),\n              kwdPropErrors = _keywordErrorsConfig2[0],\n              kwdErrors = _keywordErrorsConfig2[1];\n\n          if (kwdErrors) processKeywordErrors(kwdErrors);\n          if (kwdPropErrors) processKeywordPropErrors(kwdPropErrors);\n          processChildErrors(childErrorsConfig(sch));\n        }\n\n        var schMessage = typeof sch == \"string\" ? sch : sch._;\n        if (schMessage) processAllErrors(schMessage);\n        if (!options.keepErrors) removeUsedErrors();\n      });\n\n      function childErrorsConfig(_ref) {\n        var properties = _ref.properties,\n            items = _ref.items;\n        var errors = {};\n\n        if (properties) {\n          errors.props = {};\n\n          for (var p in properties) {\n            errors.props[p] = [];\n          }\n        }\n\n        if (items) {\n          errors.items = {};\n\n          for (var i = 0; i < items.length; i++) {\n            errors.items[i] = [];\n          }\n        }\n\n        return errors;\n      }\n\n      function keywordErrorsConfig(emSchema) {\n        var propErrors;\n        var errors;\n\n        for (var k in emSchema) {\n          if (k === \"properties\" || k === \"items\") continue;\n          var kwdSch = emSchema[k];\n\n          if (typeof kwdSch == \"object\") {\n            propErrors || (propErrors = {});\n            var errMap = propErrors[k] = {};\n\n            for (var p in kwdSch) {\n              errMap[p] = [];\n            }\n          } else {\n            errors || (errors = {});\n            errors[k] = [];\n          }\n        }\n\n        return [propErrors, errors];\n      }\n\n      function processKeywordErrors(kwdErrors) {\n        var kwdErrs = gen.const(\"emErrors\", ajv_1.stringify(kwdErrors));\n        var templates = gen.const(\"templates\", getTemplatesCode(kwdErrors, schema));\n        gen.forOf(\"err\", names_1.default.vErrors, function (err) {\n          return gen.if(matchKeywordError(err, kwdErrs), function () {\n            return gen.code(ajv_1._(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\", \"[\", \".keyword].push(\", \")\"])), kwdErrs, err, err)).assign(ajv_1._(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\", \".\", \"\"])), err, used), true);\n          });\n        });\n        var singleError = options.singleError;\n\n        if (singleError) {\n          var message = gen.let(\"message\", ajv_1._(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\\"\\\"\"]))));\n          var paramsErrors = gen.let(\"paramsErrors\", ajv_1._(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"[]\"]))));\n          loopErrors(function (key) {\n            gen.if(message, function () {\n              return gen.code(ajv_1._(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\", \" += \", \"\"])), message, typeof singleError == \"string\" ? singleError : \";\"));\n            });\n            gen.code(ajv_1._(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\", \" += \", \"\"])), message, errMessage(key)));\n            gen.assign(paramsErrors, ajv_1._(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([\"\", \".concat(\", \"[\", \"])\"])), paramsErrors, kwdErrs, key));\n          });\n          errors_1.reportError(cxt, {\n            message: message,\n            params: ajv_1._(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([\"{errors: \", \"}\"])), paramsErrors)\n          });\n        } else {\n          loopErrors(function (key) {\n            return errors_1.reportError(cxt, {\n              message: errMessage(key),\n              params: ajv_1._(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([\"{errors: \", \"[\", \"]}\"])), kwdErrs, key)\n            });\n          });\n        }\n\n        function loopErrors(body) {\n          gen.forIn(\"key\", kwdErrs, function (key) {\n            return gen.if(ajv_1._(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([\"\", \"[\", \"].length\"])), kwdErrs, key), function () {\n              return body(key);\n            });\n          });\n        }\n\n        function errMessage(key) {\n          return ajv_1._(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([\"\", \" in \", \" ? \", \"[\", \"]() : \", \"[\", \"]\"])), key, templates, templates, key, schemaValue, key);\n        }\n      }\n\n      function processKeywordPropErrors(kwdPropErrors) {\n        var kwdErrs = gen.const(\"emErrors\", ajv_1.stringify(kwdPropErrors));\n        var templatesCode = [];\n\n        for (var k in kwdPropErrors) {\n          templatesCode.push([k, getTemplatesCode(kwdPropErrors[k], schema[k])]);\n        }\n\n        var templates = gen.const(\"templates\", gen.object.apply(gen, templatesCode));\n        var kwdPropParams = gen.scopeValue(\"obj\", {\n          ref: KEYWORD_PROPERTY_PARAMS,\n          code: ajv_1.stringify(KEYWORD_PROPERTY_PARAMS)\n        });\n        var propParam = gen.let(\"emPropParams\");\n        var paramsErrors = gen.let(\"emParamsErrors\");\n        gen.forOf(\"err\", names_1.default.vErrors, function (err) {\n          return gen.if(matchKeywordError(err, kwdErrs), function () {\n            gen.assign(propParam, ajv_1._(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([\"\", \"[\", \".keyword]\"])), kwdPropParams, err));\n            gen.assign(paramsErrors, ajv_1._(_templateObject14 || (_templateObject14 = _taggedTemplateLiteral([\"\", \"[\", \".keyword][\", \".params[\", \"]]\"])), kwdErrs, err, err, propParam));\n            gen.if(paramsErrors, function () {\n              return gen.code(ajv_1._(_templateObject15 || (_templateObject15 = _taggedTemplateLiteral([\"\", \".push(\", \")\"])), paramsErrors, err)).assign(ajv_1._(_templateObject16 || (_templateObject16 = _taggedTemplateLiteral([\"\", \".\", \"\"])), err, used), true);\n            });\n          });\n        });\n        gen.forIn(\"key\", kwdErrs, function (key) {\n          return gen.forIn(\"keyProp\", ajv_1._(_templateObject17 || (_templateObject17 = _taggedTemplateLiteral([\"\", \"[\", \"]\"])), kwdErrs, key), function (keyProp) {\n            gen.assign(paramsErrors, ajv_1._(_templateObject18 || (_templateObject18 = _taggedTemplateLiteral([\"\", \"[\", \"][\", \"]\"])), kwdErrs, key, keyProp));\n            gen.if(ajv_1._(_templateObject19 || (_templateObject19 = _taggedTemplateLiteral([\"\", \".length\"])), paramsErrors), function () {\n              var tmpl = gen.const(\"tmpl\", ajv_1._(_templateObject20 || (_templateObject20 = _taggedTemplateLiteral([\"\", \"[\", \"] && \", \"[\", \"][\", \"]\"])), templates, key, templates, key, keyProp));\n              errors_1.reportError(cxt, {\n                message: ajv_1._(_templateObject21 || (_templateObject21 = _taggedTemplateLiteral([\"\", \" ? \", \"() : \", \"[\", \"][\", \"]\"])), tmpl, tmpl, schemaValue, key, keyProp),\n                params: ajv_1._(_templateObject22 || (_templateObject22 = _taggedTemplateLiteral([\"{errors: \", \"}\"])), paramsErrors)\n              });\n            });\n          });\n        });\n      }\n\n      function processChildErrors(childErrors) {\n        var props = childErrors.props,\n            items = childErrors.items;\n        if (!props && !items) return;\n\n        var isObj = ajv_1._(_templateObject23 || (_templateObject23 = _taggedTemplateLiteral([\"typeof \", \" == \\\"object\\\"\"])), data);\n\n        var isArr = ajv_1._(_templateObject24 || (_templateObject24 = _taggedTemplateLiteral([\"Array.isArray(\", \")\"])), data);\n\n        var childErrs = gen.let(\"emErrors\");\n        var childKwd;\n        var childProp;\n        var templates = gen.let(\"templates\");\n\n        if (props && items) {\n          childKwd = gen.let(\"emChildKwd\");\n          gen.if(isObj);\n          gen.if(isArr, function () {\n            init(items, schema.items);\n            gen.assign(childKwd, ajv_1.str(_templateObject25 || (_templateObject25 = _taggedTemplateLiteral([\"items\"]))));\n          }, function () {\n            init(props, schema.properties);\n            gen.assign(childKwd, ajv_1.str(_templateObject26 || (_templateObject26 = _taggedTemplateLiteral([\"properties\"]))));\n          });\n          childProp = ajv_1._(_templateObject27 || (_templateObject27 = _taggedTemplateLiteral([\"[\", \"]\"])), childKwd);\n        } else if (items) {\n          gen.if(isArr);\n          init(items, schema.items);\n          childProp = ajv_1._(_templateObject28 || (_templateObject28 = _taggedTemplateLiteral([\".items\"])));\n        } else if (props) {\n          gen.if(codegen_1.and(isObj, codegen_1.not(isArr)));\n          init(props, schema.properties);\n          childProp = ajv_1._(_templateObject29 || (_templateObject29 = _taggedTemplateLiteral([\".properties\"])));\n        }\n\n        gen.forOf(\"err\", names_1.default.vErrors, function (err) {\n          return ifMatchesChildError(err, childErrs, function (child) {\n            return gen.code(ajv_1._(_templateObject30 || (_templateObject30 = _taggedTemplateLiteral([\"\", \"[\", \"].push(\", \")\"])), childErrs, child, err)).assign(ajv_1._(_templateObject31 || (_templateObject31 = _taggedTemplateLiteral([\"\", \".\", \"\"])), err, used), true);\n          });\n        });\n        gen.forIn(\"key\", childErrs, function (key) {\n          return gen.if(ajv_1._(_templateObject32 || (_templateObject32 = _taggedTemplateLiteral([\"\", \"[\", \"].length\"])), childErrs, key), function () {\n            errors_1.reportError(cxt, {\n              message: ajv_1._(_templateObject33 || (_templateObject33 = _taggedTemplateLiteral([\"\", \" in \", \" ? \", \"[\", \"]() : \", \"\", \"[\", \"]\"])), key, templates, templates, key, schemaValue, childProp, key),\n              params: ajv_1._(_templateObject34 || (_templateObject34 = _taggedTemplateLiteral([\"{errors: \", \"[\", \"]}\"])), childErrs, key)\n            });\n            gen.assign(ajv_1._(_templateObject35 || (_templateObject35 = _taggedTemplateLiteral([\"\", \"[\", \"-1].dataPath\"])), names_1.default.vErrors, names_1.default.errors), ajv_1._(_templateObject36 || (_templateObject36 = _taggedTemplateLiteral([\"\", \" + \\\"/\\\" + \", \".replace(/~/g, \\\"~0\\\").replace(/\\\\//g, \\\"~1\\\")\"], [\"\", \" + \\\"/\\\" + \", \".replace(/~/g, \\\"~0\\\").replace(/\\\\\\\\//g, \\\"~1\\\")\"])), dataPath, key));\n          });\n        });\n        gen.endIf();\n\n        function init(children, msgs) {\n          gen.assign(childErrs, ajv_1.stringify(children));\n          gen.assign(templates, getTemplatesCode(children, msgs));\n        }\n      }\n\n      function processAllErrors(schMessage) {\n        var errs = gen.const(\"emErrs\", ajv_1._(_templateObject37 || (_templateObject37 = _taggedTemplateLiteral([\"[]\"]))));\n        gen.forOf(\"err\", names_1.default.vErrors, function (err) {\n          return gen.if(matchAnyError(err), function () {\n            return gen.code(ajv_1._(_templateObject38 || (_templateObject38 = _taggedTemplateLiteral([\"\", \".push(\", \")\"])), errs, err)).assign(ajv_1._(_templateObject39 || (_templateObject39 = _taggedTemplateLiteral([\"\", \".\", \"\"])), err, used), true);\n          });\n        });\n        gen.if(ajv_1._(_templateObject40 || (_templateObject40 = _taggedTemplateLiteral([\"\", \".length\"])), errs), function () {\n          return errors_1.reportError(cxt, {\n            message: templateExpr(schMessage),\n            params: ajv_1._(_templateObject41 || (_templateObject41 = _taggedTemplateLiteral([\"{errors: \", \"}\"])), errs)\n          });\n        });\n      }\n\n      function removeUsedErrors() {\n        var errs = gen.const(\"emErrs\", ajv_1._(_templateObject42 || (_templateObject42 = _taggedTemplateLiteral([\"[]\"]))));\n        gen.forOf(\"err\", names_1.default.vErrors, function (err) {\n          return gen.if(ajv_1._(_templateObject43 || (_templateObject43 = _taggedTemplateLiteral([\"!\", \".\", \"\"])), err, used), function () {\n            return gen.code(ajv_1._(_templateObject44 || (_templateObject44 = _taggedTemplateLiteral([\"\", \".push(\", \")\"])), errs, err));\n          });\n        });\n        gen.assign(names_1.default.vErrors, errs).assign(names_1.default.errors, ajv_1._(_templateObject45 || (_templateObject45 = _taggedTemplateLiteral([\"\", \".length\"])), errs));\n      }\n\n      function matchKeywordError(err, kwdErrs) {\n        return codegen_1.and(ajv_1._(_templateObject46 || (_templateObject46 = _taggedTemplateLiteral([\"\", \".keyword !== \", \"\"])), err, keyword), ajv_1._(_templateObject47 || (_templateObject47 = _taggedTemplateLiteral([\"!\", \".\", \"\"])), err, used), ajv_1._(_templateObject48 || (_templateObject48 = _taggedTemplateLiteral([\"\", \".dataPath === \", \"\"])), err, dataPath), ajv_1._(_templateObject49 || (_templateObject49 = _taggedTemplateLiteral([\"\", \".keyword in \", \"\"])), err, kwdErrs), // TODO match the end of the string?\n        ajv_1._(_templateObject50 || (_templateObject50 = _taggedTemplateLiteral([\"\", \".schemaPath.indexOf(\", \") === 0\"])), err, it.errSchemaPath), ajv_1._(_templateObject51 || (_templateObject51 = _taggedTemplateLiteral([\"/^\\\\/[^\\\\/]*$/.test(\", \".schemaPath.slice(\", \"))\"], [\"/^\\\\\\\\/[^\\\\\\\\/]*$/.test(\", \".schemaPath.slice(\", \"))\"])), err, it.errSchemaPath.length));\n      }\n\n      function ifMatchesChildError(err, childErrs, thenBody) {\n        gen.if(codegen_1.and(ajv_1._(_templateObject52 || (_templateObject52 = _taggedTemplateLiteral([\"\", \".keyword !== \", \"\"])), err, keyword), ajv_1._(_templateObject53 || (_templateObject53 = _taggedTemplateLiteral([\"!\", \".\", \"\"])), err, used), ajv_1._(_templateObject54 || (_templateObject54 = _taggedTemplateLiteral([\"\", \".dataPath.indexOf(\", \") === 0\"])), err, dataPath)), function () {\n          var childRegex = gen.scopeValue(\"pattern\", {\n            ref: /^\\/([^/]*)(?:\\/|$)/,\n            code: ajv_1._(_templateObject55 || (_templateObject55 = _taggedTemplateLiteral([\"new RegExp(\\\"^\\\\/([^/]*)(?:\\\\/|$)\\\")\"], [\"new RegExp(\\\"^\\\\\\\\\\\\/([^/]*)(?:\\\\\\\\\\\\/|$)\\\")\"])))\n          });\n          var matches = gen.const(\"emMatches\", ajv_1._(_templateObject56 || (_templateObject56 = _taggedTemplateLiteral([\"\", \".exec(\", \".dataPath.slice(\", \".length))\"])), childRegex, err, dataPath));\n          var child = gen.const(\"emChild\", ajv_1._(_templateObject57 || (_templateObject57 = _taggedTemplateLiteral([\"\", \" && \", \"[1].replace(/~1/g, \\\"/\\\").replace(/~0/g, \\\"~\\\")\"])), matches, matches));\n          gen.if(ajv_1._(_templateObject58 || (_templateObject58 = _taggedTemplateLiteral([\"\", \" !== undefined && \", \" in \", \"\"])), child, child, childErrs), function () {\n            return thenBody(child);\n          });\n        });\n      }\n\n      function matchAnyError(err) {\n        return codegen_1.and(ajv_1._(_templateObject59 || (_templateObject59 = _taggedTemplateLiteral([\"\", \".keyword !== \", \"\"])), err, keyword), ajv_1._(_templateObject60 || (_templateObject60 = _taggedTemplateLiteral([\"!\", \".\", \"\"])), err, used), codegen_1.or(ajv_1._(_templateObject61 || (_templateObject61 = _taggedTemplateLiteral([\"\", \".dataPath === \", \"\"])), err, dataPath), codegen_1.and(ajv_1._(_templateObject62 || (_templateObject62 = _taggedTemplateLiteral([\"\", \".dataPath.indexOf(\", \") === 0\"])), err, dataPath), ajv_1._(_templateObject63 || (_templateObject63 = _taggedTemplateLiteral([\"\", \".dataPath[\", \".length] === \\\"/\\\"\"])), err, dataPath))), ajv_1._(_templateObject64 || (_templateObject64 = _taggedTemplateLiteral([\"\", \".schemaPath.indexOf(\", \") === 0\"])), err, it.errSchemaPath), ajv_1._(_templateObject65 || (_templateObject65 = _taggedTemplateLiteral([\"\", \".schemaPath[\", \".length] === \\\"/\\\"\"])), err, it.errSchemaPath));\n      }\n\n      function getTemplatesCode(keys, msgs) {\n        var templatesCode = [];\n\n        for (var k in keys) {\n          var msg = msgs[k];\n          if (INTERPOLATION.test(msg)) templatesCode.push([k, templateFunc(msg)]);\n        }\n\n        return gen.object.apply(gen, templatesCode);\n      }\n\n      function templateExpr(msg) {\n        if (!INTERPOLATION.test(msg)) return ajv_1.stringify(msg);\n        return new code_1._Code(code_1.safeStringify(msg).replace(INTERPOLATION_REPLACE, function (_s, ptr) {\n          return \"\\\" + JSON.stringify(\".concat(context_1.getData(ptr, it), \") + \\\"\");\n        }).replace(EMPTY_STR, \"\"));\n      }\n\n      function templateFunc(msg) {\n        return ajv_1._(_templateObject66 || (_templateObject66 = _taggedTemplateLiteral([\"function(){return \", \"}\"])), templateExpr(msg));\n      }\n    },\n    metaSchema: {\n      anyOf: [{\n        type: \"string\"\n      }, {\n        type: \"object\",\n        properties: {\n          properties: {\n            $ref: \"#/$defs/stringMap\"\n          },\n          items: {\n            $ref: \"#/$defs/stringList\"\n          },\n          required: {\n            $ref: \"#/$defs/stringOrMap\"\n          },\n          dependencies: {\n            $ref: \"#/$defs/stringOrMap\"\n          }\n        },\n        additionalProperties: {\n          type: \"string\"\n        }\n      }],\n      $defs: {\n        stringMap: {\n          type: \"object\",\n          additionalProperties: {\n            type: \"string\"\n          }\n        },\n        stringOrMap: {\n          anyOf: [{\n            type: \"string\"\n          }, {\n            $ref: \"#/$defs/stringMap\"\n          }]\n        },\n        stringList: {\n          type: \"array\",\n          items: {\n            type: \"string\"\n          }\n        }\n      }\n    }\n  };\n}\n\nvar ajvErrors = function ajvErrors(ajv) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (!ajv.opts.allErrors) throw new Error(\"ajv-errors: Ajv option allErrors must be true\");\n\n  if (ajv.opts.jsPropertySyntax) {\n    throw new Error(\"ajv-errors: ajv option jsPropertySyntax is not supported\");\n  }\n\n  return ajv.addKeyword(errorMessage(options));\n};\n\nexports.default = ajvErrors;\nmodule.exports = ajvErrors;\nmodule.exports.default = ajvErrors;","map":null,"metadata":{},"sourceType":"script"}