{"ast":null,"code":"import _classCallCheck from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/opt/work/NZ_test/src/components/LocalStorageToast/LocalStorageToast.tsx\";\nimport * as React from 'react';\nimport { Close } from 'decentraland-ui';\nimport { getLocalStorage } from 'decentraland-dapps/dist/lib/localStorage';\nimport { t, T } from 'decentraland-dapps/dist/modules/translation/utils';\nimport { getAnalytics } from 'decentraland-dapps/dist/modules/analytics/utils';\nimport './LocalStorageToast.css';\nexport var LOCAL_STORAGE_SIGN_IN_EVENT = 'Sign in from editor toast';\nexport var LOCALSTORAGE_TOAST_KEY = 'builder-localstorage-signin-toast';\nvar localStorage = getLocalStorage();\n\nvar LocalStorageToast = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(LocalStorageToast, _React$PureComponent);\n\n  function LocalStorageToast() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LocalStorageToast);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LocalStorageToast)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      isVisible: !localStorage.getItem(LOCALSTORAGE_TOAST_KEY) && _this.props.isVisible\n    };\n    _this.analytics = getAnalytics();\n\n    _this.handleClose = function () {\n      _this.setState({\n        isVisible: false\n      });\n\n      localStorage.setItem(LOCALSTORAGE_TOAST_KEY, '1');\n    };\n\n    _this.handleLogin = function () {\n      var _this$props = _this.props,\n          project = _this$props.project,\n          onOpenModal = _this$props.onOpenModal;\n\n      if (project) {\n        _this.analytics.track(LOCAL_STORAGE_SIGN_IN_EVENT);\n\n        onOpenModal('WalletLoginModal');\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(LocalStorageToast, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.isVisible && !localStorage.getItem(LOCALSTORAGE_TOAST_KEY)) {\n        this.setState({\n          isVisible: true\n        });\n      } else if (this.props.isVisible && !nextProps.isVisible) {\n        this.setState({\n          isVisible: false\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.state.isVisible) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"LocalStorageToast\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(T, {\n        id: \"toasts.localstorage\",\n        values: {\n          sign_in: /*#__PURE__*/React.createElement(\"span\", {\n            className: \"sign-in\",\n            onClick: this.handleLogin,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 15\n            }\n          }, \"\\xA0\", t('global.sign_in'), \"\\xA0\")\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"close\",\n        onClick: this.handleClose,\n        title: t('global.dismiss'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Close, {\n        small: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return LocalStorageToast;\n}(React.PureComponent);\n\nexport { LocalStorageToast as default };","map":{"version":3,"sources":["/opt/work/NZ_test/src/components/LocalStorageToast/LocalStorageToast.tsx"],"names":["React","Close","getLocalStorage","t","T","getAnalytics","LOCAL_STORAGE_SIGN_IN_EVENT","LOCALSTORAGE_TOAST_KEY","localStorage","LocalStorageToast","state","isVisible","getItem","props","analytics","handleClose","setState","setItem","handleLogin","project","onOpenModal","track","nextProps","sign_in","PureComponent"],"mappings":";;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,KAAT,QAAsB,iBAAtB;AACA,SAASC,eAAT,QAAgC,0CAAhC;AACA,SAASC,CAAT,EAAYC,CAAZ,QAAqB,mDAArB;AACA,SAASC,YAAT,QAA6B,iDAA7B;AAIA,OAAO,yBAAP;AAEA,OAAO,IAAMC,2BAA2B,GAAG,2BAApC;AACP,OAAO,IAAMC,sBAAsB,GAAG,mCAA/B;AACP,IAAMC,YAAY,GAAGN,eAAe,EAApC;;IAEqBO,iB;;;;;;;;;;;;;;;UACnBC,K,GAAQ;AACNC,MAAAA,SAAS,EAAE,CAACH,YAAY,CAACI,OAAb,CAAqBL,sBAArB,CAAD,IAAiD,MAAKM,KAAL,CAAWF;AADjE,K;UAIRG,S,GAAYT,YAAY,E;;UAUxBU,W,GAAc,YAAM;AAClB,YAAKC,QAAL,CAAc;AAAEL,QAAAA,SAAS,EAAE;AAAb,OAAd;;AACAH,MAAAA,YAAY,CAACS,OAAb,CAAqBV,sBAArB,EAA6C,GAA7C;AACD,K;;UAEDW,W,GAAc,YAAM;AAAA,wBACe,MAAKL,KADpB;AAAA,UACVM,OADU,eACVA,OADU;AAAA,UACDC,WADC,eACDA,WADC;;AAElB,UAAID,OAAJ,EAAa;AACX,cAAKL,SAAL,CAAeO,KAAf,CAAqBf,2BAArB;;AACAc,QAAAA,WAAW,CAAC,kBAAD,CAAX;AACD;AACF,K;;;;;;;8CAnByBE,S,EAAkB;AAC1C,UAAIA,SAAS,CAACX,SAAV,IAAuB,CAACH,YAAY,CAACI,OAAb,CAAqBL,sBAArB,CAA5B,EAA0E;AACxE,aAAKS,QAAL,CAAc;AAAEL,UAAAA,SAAS,EAAE;AAAb,SAAd;AACD,OAFD,MAEO,IAAI,KAAKE,KAAL,CAAWF,SAAX,IAAwB,CAACW,SAAS,CAACX,SAAvC,EAAkD;AACvD,aAAKK,QAAL,CAAc;AAAEL,UAAAA,SAAS,EAAE;AAAb,SAAd;AACD;AACF;;;6BAeQ;AACP,UAAI,CAAC,KAAKD,KAAL,CAAWC,SAAhB,EAA2B;AACzB,eAAO,IAAP;AACD;;AACD,0BACE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,CAAD;AACE,QAAA,EAAE,EAAC,qBADL;AAEE,QAAA,MAAM,EAAE;AACNY,UAAAA,OAAO,eACL;AAAM,YAAA,SAAS,EAAC,SAAhB;AAA0B,YAAA,OAAO,EAAE,KAAKL,WAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACSf,CAAC,CAAC,gBAAD,CADV;AAFI,SAFV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAWE;AAAK,QAAA,SAAS,EAAC,OAAf;AAAuB,QAAA,OAAO,EAAE,KAAKY,WAArC;AAAkD,QAAA,KAAK,EAAEZ,CAAC,CAAC,gBAAD,CAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,KAAD;AAAO,QAAA,KAAK,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAXF,CADF;AAiBD;;;;EAjD4CH,KAAK,CAACwB,a;;SAAhCf,iB","sourcesContent":["import * as React from 'react'\nimport { Close } from 'decentraland-ui'\nimport { getLocalStorage } from 'decentraland-dapps/dist/lib/localStorage'\nimport { t, T } from 'decentraland-dapps/dist/modules/translation/utils'\nimport { getAnalytics } from 'decentraland-dapps/dist/modules/analytics/utils'\n\nimport { Props, State } from './LocalStorageToast.types'\n\nimport './LocalStorageToast.css'\n\nexport const LOCAL_STORAGE_SIGN_IN_EVENT = 'Sign in from editor toast'\nexport const LOCALSTORAGE_TOAST_KEY = 'builder-localstorage-signin-toast'\nconst localStorage = getLocalStorage()\n\nexport default class LocalStorageToast extends React.PureComponent<Props, State> {\n  state = {\n    isVisible: !localStorage.getItem(LOCALSTORAGE_TOAST_KEY) && this.props.isVisible\n  }\n\n  analytics = getAnalytics()\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.isVisible && !localStorage.getItem(LOCALSTORAGE_TOAST_KEY)) {\n      this.setState({ isVisible: true })\n    } else if (this.props.isVisible && !nextProps.isVisible) {\n      this.setState({ isVisible: false })\n    }\n  }\n\n  handleClose = () => {\n    this.setState({ isVisible: false })\n    localStorage.setItem(LOCALSTORAGE_TOAST_KEY, '1')\n  }\n\n  handleLogin = () => {\n    const { project, onOpenModal } = this.props\n    if (project) {\n      this.analytics.track(LOCAL_STORAGE_SIGN_IN_EVENT)\n      onOpenModal('WalletLoginModal')\n    }\n  }\n\n  render() {\n    if (!this.state.isVisible) {\n      return null\n    }\n    return (\n      <div className=\"LocalStorageToast\">\n        <T\n          id=\"toasts.localstorage\"\n          values={{\n            sign_in: (\n              <span className=\"sign-in\" onClick={this.handleLogin}>\n                &nbsp;{t('global.sign_in')}&nbsp;\n              </span>\n            )\n          }}\n        />\n        <div className=\"close\" onClick={this.handleClose} title={t('global.dismiss')}>\n          <Close small />\n        </div>\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}