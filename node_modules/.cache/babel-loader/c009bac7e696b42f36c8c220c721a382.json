{"ast":null,"code":"import { Engine } from \"../Engines/engine\";\n/**\r\n * Class used for the default loading screen\r\n * @see https://doc.babylonjs.com/how_to/creating_a_custom_loading_screen\r\n */\n\nvar DefaultLoadingScreen =\n/** @class */\nfunction () {\n  /**\r\n   * Creates a new default loading screen\r\n   * @param _renderingCanvas defines the canvas used to render the scene\r\n   * @param _loadingText defines the default text to display\r\n   * @param _loadingDivBackgroundColor defines the default background color\r\n   */\n  function DefaultLoadingScreen(_renderingCanvas, _loadingText, _loadingDivBackgroundColor) {\n    var _this = this;\n\n    if (_loadingText === void 0) {\n      _loadingText = \"\";\n    }\n\n    if (_loadingDivBackgroundColor === void 0) {\n      _loadingDivBackgroundColor = \"black\";\n    }\n\n    this._renderingCanvas = _renderingCanvas;\n    this._loadingText = _loadingText;\n    this._loadingDivBackgroundColor = _loadingDivBackgroundColor; // Resize\n\n    this._resizeLoadingUI = function () {\n      var canvasRect = _this._renderingCanvas.getBoundingClientRect();\n\n      var canvasPositioning = window.getComputedStyle(_this._renderingCanvas).position;\n\n      if (!_this._loadingDiv) {\n        return;\n      }\n\n      _this._loadingDiv.style.position = canvasPositioning === \"fixed\" ? \"fixed\" : \"absolute\";\n      _this._loadingDiv.style.left = canvasRect.left + \"px\";\n      _this._loadingDiv.style.top = canvasRect.top + \"px\";\n      _this._loadingDiv.style.width = canvasRect.width + \"px\";\n      _this._loadingDiv.style.height = canvasRect.height + \"px\";\n    };\n  }\n  /**\r\n   * Function called to display the loading screen\r\n   */\n\n\n  DefaultLoadingScreen.prototype.displayLoadingUI = function () {\n    if (this._loadingDiv) {\n      // Do not add a loading screen if there is already one\n      return;\n    }\n\n    this._loadingDiv = document.createElement(\"div\");\n    this._loadingDiv.id = \"babylonjsLoadingDiv\";\n    this._loadingDiv.style.opacity = \"0\";\n    this._loadingDiv.style.transition = \"opacity 1.5s ease\";\n    this._loadingDiv.style.pointerEvents = \"none\";\n    this._loadingDiv.style.display = \"grid\";\n    this._loadingDiv.style.gridTemplateRows = \"100%\";\n    this._loadingDiv.style.gridTemplateColumns = \"100%\";\n    this._loadingDiv.style.justifyItems = \"center\";\n    this._loadingDiv.style.alignItems = \"center\"; // Loading text\n\n    this._loadingTextDiv = document.createElement(\"div\");\n    this._loadingTextDiv.style.position = \"absolute\";\n    this._loadingTextDiv.style.left = \"0\";\n    this._loadingTextDiv.style.top = \"50%\";\n    this._loadingTextDiv.style.marginTop = \"80px\";\n    this._loadingTextDiv.style.width = \"100%\";\n    this._loadingTextDiv.style.height = \"20px\";\n    this._loadingTextDiv.style.fontFamily = \"Arial\";\n    this._loadingTextDiv.style.fontSize = \"14px\";\n    this._loadingTextDiv.style.color = \"white\";\n    this._loadingTextDiv.style.textAlign = \"center\";\n    this._loadingTextDiv.style.zIndex = \"1\";\n    this._loadingTextDiv.innerHTML = \"Loading\";\n\n    this._loadingDiv.appendChild(this._loadingTextDiv); //set the predefined text\n\n\n    this._loadingTextDiv.innerHTML = this._loadingText; // Generating keyframes\n\n    var style = document.createElement('style');\n    style.type = 'text/css';\n    var keyFrames = \"@-webkit-keyframes spin1 {                    0% { -webkit-transform: rotate(0deg);}\\n                    100% { -webkit-transform: rotate(360deg);}\\n                }                @keyframes spin1 {                    0% { transform: rotate(0deg);}\\n                    100% { transform: rotate(360deg);}\\n                }\";\n    style.innerHTML = keyFrames;\n    document.getElementsByTagName('head')[0].appendChild(style);\n    var svgSupport = !!window.SVGSVGElement; // Loading img\n\n    var imgBack = new Image();\n\n    if (!DefaultLoadingScreen.DefaultLogoUrl) {\n      imgBack.src = !svgSupport ? \"https://cdn.babylonjs.com/Assets/babylonLogo.png\" : \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxODAuMTcgMjA4LjA0Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2ZmZjt9LmNscy0ye2ZpbGw6I2UwNjg0Yjt9LmNscy0ze2ZpbGw6I2JiNDY0Yjt9LmNscy00e2ZpbGw6I2UwZGVkODt9LmNscy01e2ZpbGw6I2Q1ZDJjYTt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPkJhYnlsb25Mb2dvPC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iUGFnZV9FbGVtZW50cyIgZGF0YS1uYW1lPSJQYWdlIEVsZW1lbnRzIj48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik05MC4wOSwwLDAsNTJWMTU2bDkwLjA5LDUyLDkwLjA4LTUyVjUyWiIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSIxODAuMTcgNTIuMDEgMTUxLjk3IDM1LjczIDEyNC44NSA1MS4zOSAxNTMuMDUgNjcuNjcgMTgwLjE3IDUyLjAxIi8+PHBvbHlnb24gY2xhc3M9ImNscy0yIiBwb2ludHM9IjI3LjEyIDY3LjY3IDExNy4yMSAxNS42NiA5MC4wOCAwIDAgNTIuMDEgMjcuMTIgNjcuNjciLz48cG9seWdvbiBjbGFzcz0iY2xzLTIiIHBvaW50cz0iNjEuODkgMTIwLjMgOTAuMDggMTM2LjU4IDExOC4yOCAxMjAuMyA5MC4wOCAxMDQuMDIgNjEuODkgMTIwLjMiLz48cG9seWdvbiBjbGFzcz0iY2xzLTMiIHBvaW50cz0iMTUzLjA1IDY3LjY3IDE1My4wNSAxNDAuMzcgOTAuMDggMTc2LjcyIDI3LjEyIDE0MC4zNyAyNy4xMiA2Ny42NyAwIDUyLjAxIDAgMTU2LjAzIDkwLjA4IDIwOC4wNCAxODAuMTcgMTU2LjAzIDE4MC4xNyA1Mi4wMSAxNTMuMDUgNjcuNjciLz48cG9seWdvbiBjbGFzcz0iY2xzLTMiIHBvaW50cz0iOTAuMDggNzEuNDYgNjEuODkgODcuNzQgNjEuODkgMTIwLjMgOTAuMDggMTA0LjAyIDExOC4yOCAxMjAuMyAxMTguMjggODcuNzQgOTAuMDggNzEuNDYiLz48cG9seWdvbiBjbGFzcz0iY2xzLTQiIHBvaW50cz0iMTUzLjA1IDY3LjY3IDExOC4yOCA4Ny43NCAxMTguMjggMTIwLjMgOTAuMDggMTM2LjU4IDkwLjA4IDE3Ni43MiAxNTMuMDUgMTQwLjM3IDE1My4wNSA2Ny42NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtNSIgcG9pbnRzPSIyNy4xMiA2Ny42NyA2MS44OSA4Ny43NCA2MS44OSAxMjAuMyA5MC4wOCAxMzYuNTggOTAuMDggMTc2LjcyIDI3LjEyIDE0MC4zNyAyNy4xMiA2Ny42NyIvPjwvZz48L2c+PC9zdmc+\";\n    } else {\n      imgBack.src = DefaultLoadingScreen.DefaultLogoUrl;\n    }\n\n    imgBack.style.width = \"150px\";\n    imgBack.style.gridColumn = \"1\";\n    imgBack.style.gridRow = \"1\";\n    imgBack.style.top = \"50%\";\n    imgBack.style.left = \"50%\";\n    imgBack.style.transform = \"translate(-50%, -50%)\";\n    imgBack.style.position = \"absolute\";\n    var imageSpinnerContainer = document.createElement(\"div\");\n    imageSpinnerContainer.style.width = \"300px\";\n    imageSpinnerContainer.style.gridColumn = \"1\";\n    imageSpinnerContainer.style.gridRow = \"1\";\n    imageSpinnerContainer.style.top = \"50%\";\n    imageSpinnerContainer.style.left = \"50%\";\n    imageSpinnerContainer.style.transform = \"translate(-50%, -50%)\";\n    imageSpinnerContainer.style.position = \"absolute\"; // Loading spinner\n\n    var imgSpinner = new Image();\n\n    if (!DefaultLoadingScreen.DefaultSpinnerUrl) {\n      imgSpinner.src = !svgSupport ? \"https://cdn.babylonjs.com/Assets/loadingIcon.png\" : \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzOTIgMzkyIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2UwNjg0Yjt9LmNscy0ye2ZpbGw6bm9uZTt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPlNwaW5uZXJJY29uPC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iU3Bpbm5lciI+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNDAuMjEsMTI2LjQzYzMuNy03LjMxLDcuNjctMTQuNDQsMTItMjEuMzJsMy4zNi01LjEsMy41Mi01YzEuMjMtMS42MywyLjQxLTMuMjksMy42NS00LjkxczIuNTMtMy4yMSwzLjgyLTQuNzlBMTg1LjIsMTg1LjIsMCwwLDEsODMuNCw2Ny40M2EyMDgsMjA4LDAsMCwxLDE5LTE1LjY2YzMuMzUtMi40MSw2Ljc0LTQuNzgsMTAuMjUtN3M3LjExLTQuMjgsMTAuNzUtNi4zMmM3LjI5LTQsMTQuNzMtOCwyMi41My0xMS40OSwzLjktMS43Miw3Ljg4LTMuMywxMi00LjY0YTEwNC4yMiwxMDQuMjIsMCwwLDEsMTIuNDQtMy4yMyw2Mi40NCw2Mi40NCwwLDAsMSwxMi43OC0xLjM5QTI1LjkyLDI1LjkyLDAsMCwxLDE5NiwyMS40NGE2LjU1LDYuNTUsMCwwLDEsMi4wNSw5LDYuNjYsNi42NiwwLDAsMS0xLjY0LDEuNzhsLS40MS4yOWEyMi4wNywyMi4wNywwLDAsMS01Ljc4LDMsMzAuNDIsMzAuNDIsMCwwLDEtNS42NywxLjYyLDM3LjgyLDM3LjgyLDAsMCwxLTUuNjkuNzFjLTEsMC0xLjkuMTgtMi44NS4yNmwtMi44NS4yNHEtNS43Mi41MS0xMS40OCwxLjFjLTMuODQuNC03LjcxLjgyLTExLjU4LDEuNGExMTIuMzQsMTEyLjM0LDAsMCwwLTIyLjk0LDUuNjFjLTMuNzIsMS4zNS03LjM0LDMtMTAuOTQsNC42NHMtNy4xNCwzLjUxLTEwLjYsNS41MUExNTEuNiwxNTEuNiwwLDAsMCw2OC41Niw4N0M2Ny4yMyw4OC40OCw2Niw5MCw2NC42NCw5MS41NnMtMi41MSwzLjE1LTMuNzUsNC43M2wtMy41NCw0LjljLTEuMTMsMS42Ni0yLjIzLDMuMzUtMy4zMyw1YTEyNywxMjcsMCwwLDAtMTAuOTMsMjEuNDksMS41OCwxLjU4LDAsMSwxLTMtMS4xNVM0MC4xOSwxMjYuNDcsNDAuMjEsMTI2LjQzWiIvPjxyZWN0IGNsYXNzPSJjbHMtMiIgd2lkdGg9IjM5MiIgaGVpZ2h0PSIzOTIiLz48L2c+PC9nPjwvc3ZnPg==\";\n    } else {\n      imgSpinner.src = DefaultLoadingScreen.DefaultSpinnerUrl;\n    }\n\n    imgSpinner.style.animation = \"spin1 0.75s infinite linear\";\n    imgSpinner.style.webkitAnimation = \"spin1 0.75s infinite linear\";\n    imgSpinner.style.transformOrigin = \"50% 50%\";\n    imgSpinner.style.webkitTransformOrigin = \"50% 50%\";\n\n    if (!svgSupport) {\n      var logoSize = {\n        w: 16,\n        h: 18.5\n      };\n      var loadingSize = {\n        w: 30,\n        h: 30\n      }; // set styling correctly\n\n      imgBack.style.width = logoSize.w + \"vh\";\n      imgBack.style.height = logoSize.h + \"vh\";\n      imgBack.style.left = \"calc(50% - \" + logoSize.w / 2 + \"vh)\";\n      imgBack.style.top = \"calc(50% - \" + logoSize.h / 2 + \"vh)\";\n      imgSpinner.style.width = loadingSize.w + \"vh\";\n      imgSpinner.style.height = loadingSize.h + \"vh\";\n      imgSpinner.style.left = \"calc(50% - \" + loadingSize.w / 2 + \"vh)\";\n      imgSpinner.style.top = \"calc(50% - \" + loadingSize.h / 2 + \"vh)\";\n    }\n\n    imageSpinnerContainer.appendChild(imgSpinner);\n\n    this._loadingDiv.appendChild(imgBack);\n\n    this._loadingDiv.appendChild(imageSpinnerContainer);\n\n    this._resizeLoadingUI();\n\n    window.addEventListener(\"resize\", this._resizeLoadingUI);\n    this._loadingDiv.style.backgroundColor = this._loadingDivBackgroundColor;\n    document.body.appendChild(this._loadingDiv);\n    this._loadingDiv.style.opacity = \"1\";\n  };\n  /**\r\n   * Function called to hide the loading screen\r\n   */\n\n\n  DefaultLoadingScreen.prototype.hideLoadingUI = function () {\n    var _this = this;\n\n    if (!this._loadingDiv) {\n      return;\n    }\n\n    var onTransitionEnd = function onTransitionEnd() {\n      if (!_this._loadingDiv) {\n        return;\n      }\n\n      if (_this._loadingDiv.parentElement) {\n        _this._loadingDiv.parentElement.removeChild(_this._loadingDiv);\n      }\n\n      window.removeEventListener(\"resize\", _this._resizeLoadingUI);\n      _this._loadingDiv = null;\n    };\n\n    this._loadingDiv.style.opacity = \"0\";\n\n    this._loadingDiv.addEventListener(\"transitionend\", onTransitionEnd);\n  };\n\n  Object.defineProperty(DefaultLoadingScreen.prototype, \"loadingUIText\", {\n    get: function get() {\n      return this._loadingText;\n    },\n\n    /**\r\n     * Gets or sets the text to display while loading\r\n     */\n    set: function set(text) {\n      this._loadingText = text;\n\n      if (this._loadingTextDiv) {\n        this._loadingTextDiv.innerHTML = this._loadingText;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(DefaultLoadingScreen.prototype, \"loadingUIBackgroundColor\", {\n    /**\r\n     * Gets or sets the color to use for the background\r\n     */\n    get: function get() {\n      return this._loadingDivBackgroundColor;\n    },\n    set: function set(color) {\n      this._loadingDivBackgroundColor = color;\n\n      if (!this._loadingDiv) {\n        return;\n      }\n\n      this._loadingDiv.style.backgroundColor = this._loadingDivBackgroundColor;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /** Gets or sets the logo url to use for the default loading screen */\n\n  DefaultLoadingScreen.DefaultLogoUrl = \"\";\n  /** Gets or sets the spinner url to use for the default loading screen */\n\n  DefaultLoadingScreen.DefaultSpinnerUrl = \"\";\n  return DefaultLoadingScreen;\n}();\n\nexport { DefaultLoadingScreen };\n\nEngine.DefaultLoadingScreenFactory = function (canvas) {\n  return new DefaultLoadingScreen(canvas);\n};","map":null,"metadata":{},"sourceType":"module"}