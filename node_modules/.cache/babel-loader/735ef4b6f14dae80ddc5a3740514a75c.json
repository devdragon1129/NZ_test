{"ast":null,"code":"import _classCallCheck from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/opt/work/NZ_test/src/components/Modals/TutorialModal/TutorialModal.tsx\";\nimport * as React from 'react';\nimport { Button, Close } from 'decentraland-ui';\nimport { getAnalytics } from 'decentraland-dapps/dist/modules/analytics/utils';\nimport Modal from 'decentraland-dapps/dist/containers/Modal';\nimport { getLocalStorage } from 'decentraland-dapps/dist/lib/localStorage';\nimport { t } from 'decentraland-dapps/dist/modules/translation/utils';\nimport { LOCALSTORAGE_TUTORIAL_KEY } from 'components/EditorPage/EditorPage';\nimport { preventDefault } from 'lib/preventDefault';\nimport { getSlides } from './slides';\nimport './TutorialModal.css';\nvar PUBLIC_URL = process.env.PUBLIC_URL;\nvar localStorage = getLocalStorage(); // Segment Events\n\nvar TUTORIAL_STEP_EVENT = 'Tutorial Step';\nvar TUTORIAL_SKIP_EVENT = 'Tutorial Skip';\nvar TUTORIAL_COMPLETE = 'Tutorial Complete';\nexport var LOCALSTORAGE_TUTORIAL_EMAIL_KEY = 'builder-tutorial-email';\n\nvar TutorialModal = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(TutorialModal, _React$PureComponent);\n\n  function TutorialModal() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TutorialModal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TutorialModal)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      step: 0\n    };\n    _this.slides = getSlides();\n    _this.preventVideoContextMenu = preventDefault();\n    _this.analytics = getAnalytics();\n\n    _this.componentWillMount = function () {\n      _this.analytics.track(TUTORIAL_STEP_EVENT, {\n        step: 0\n      });\n    };\n\n    _this.handleSkip = function () {\n      _this.analytics.track(TUTORIAL_SKIP_EVENT);\n\n      localStorage.setItem(LOCALSTORAGE_TUTORIAL_KEY, '1');\n\n      _this.props.onClose();\n    };\n\n    _this.renderSteps = function () {\n      var step = _this.state.step;\n      var out = [];\n\n      var _loop = function _loop(i) {\n        out.push( /*#__PURE__*/React.createElement(\"div\", {\n          key: \"step-\".concat(i),\n          className: 'step ' + (i === step ? 'active' : ''),\n          onClick: function onClick() {\n            return _this.goToSlide(i);\n          },\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 16\n          }\n        }));\n      };\n\n      for (var i = 0; i < _this.slides.length; i++) {\n        _loop(i);\n      }\n\n      return out;\n    };\n\n    _this.renderSlide = function () {\n      var step = _this.state.step;\n      var slide = _this.slides[step];\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Modal.Header, {\n        __self: _assertThisInitialized(_assertThisInitialized(_this)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 9\n        }\n      }, slide.title), /*#__PURE__*/React.createElement(Modal.Description, {\n        __self: _assertThisInitialized(_assertThisInitialized(_this)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 9\n        }\n      }, slide.description), /*#__PURE__*/React.createElement(Modal.Content, {\n        __self: _assertThisInitialized(_assertThisInitialized(_this)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"slide\",\n        onContextMenu: _this.preventVideoContextMenu,\n        __self: _assertThisInitialized(_assertThisInitialized(_this)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }\n      }, _this.slides.map(function (slide, i) {\n        var isCurrentStep = i === step;\n        return /*#__PURE__*/React.createElement(\"video\", {\n          key: i,\n          src: \"\".concat(PUBLIC_URL, \"/videos/\").concat(slide.thumbnail, \".mp4\"),\n          style: {\n            display: isCurrentStep ? '' : 'none'\n          },\n          preload: \"auto\",\n          autoPlay: true,\n          muted: true,\n          loop: true,\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 17\n          }\n        });\n      }))));\n    };\n\n    _this.goToSlide = function (index) {\n      if (index === _this.slides.length) {\n        localStorage.setItem(LOCALSTORAGE_TUTORIAL_KEY, '1');\n\n        _this.props.onClose();\n\n        _this.analytics.track(TUTORIAL_COMPLETE, {\n          suscribed: false\n        });\n\n        return;\n      }\n\n      _this.setState({\n        step: index\n      });\n\n      _this.analytics.track(TUTORIAL_STEP_EVENT, {\n        step: index\n      });\n    };\n\n    _this.handleNextStep = function () {\n      var nextStep = _this.state.step + 1;\n\n      _this.goToSlide(nextStep);\n    };\n\n    _this.handlePreviousStep = function () {\n      var previousStep = _this.state.step - 1;\n\n      _this.goToSlide(previousStep);\n    };\n\n    return _this;\n  }\n\n  _createClass(TutorialModal, [{\n    key: \"render\",\n    value: function render() {\n      var name = this.props.name;\n      var step = this.state.step;\n      return /*#__PURE__*/React.createElement(Modal, {\n        name: name,\n        onClose: this.handleSkip,\n        closeIcon: /*#__PURE__*/React.createElement(Close, {\n          onClick: this.handleSkip,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 63\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 7\n        }\n      }, this.renderSlide(), /*#__PURE__*/React.createElement(Modal.Actions, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 9\n        }\n      }, step !== 0 ? /*#__PURE__*/React.createElement(Button, {\n        onClick: this.handlePreviousStep,\n        secondary: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }\n      }, t('global.back')) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"spacer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"steps\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }\n      }, this.renderSteps()), /*#__PURE__*/React.createElement(Button, {\n        primary: true,\n        onClick: this.handleNextStep,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }\n      }, step === this.slides.length - 1 ? t('global.done') : t('global.next'))));\n    }\n  }]);\n\n  return TutorialModal;\n}(React.PureComponent);\n\nexport { TutorialModal as default };","map":{"version":3,"sources":["/opt/work/NZ_test/src/components/Modals/TutorialModal/TutorialModal.tsx"],"names":["React","Button","Close","getAnalytics","Modal","getLocalStorage","t","LOCALSTORAGE_TUTORIAL_KEY","preventDefault","getSlides","PUBLIC_URL","process","env","localStorage","TUTORIAL_STEP_EVENT","TUTORIAL_SKIP_EVENT","TUTORIAL_COMPLETE","LOCALSTORAGE_TUTORIAL_EMAIL_KEY","TutorialModal","state","step","slides","preventVideoContextMenu","analytics","componentWillMount","track","handleSkip","setItem","props","onClose","renderSteps","out","i","push","goToSlide","length","renderSlide","slide","title","description","map","isCurrentStep","thumbnail","display","index","suscribed","setState","handleNextStep","nextStep","handlePreviousStep","previousStep","name","PureComponent"],"mappings":"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","sourcesContent":["import * as React from 'react'\nimport { Button, Close } from 'decentraland-ui'\nimport { getAnalytics } from 'decentraland-dapps/dist/modules/analytics/utils'\nimport Modal from 'decentraland-dapps/dist/containers/Modal'\nimport { getLocalStorage } from 'decentraland-dapps/dist/lib/localStorage'\nimport { t } from 'decentraland-dapps/dist/modules/translation/utils'\n\nimport { LOCALSTORAGE_TUTORIAL_KEY } from 'components/EditorPage/EditorPage'\nimport { preventDefault } from 'lib/preventDefault'\nimport { getSlides } from './slides'\nimport { Props, State } from './TutorialModal.types'\nimport './TutorialModal.css'\n\nconst PUBLIC_URL = process.env.PUBLIC_URL\nconst localStorage = getLocalStorage()\n\n// Segment Events\nconst TUTORIAL_STEP_EVENT = 'Tutorial Step'\nconst TUTORIAL_SKIP_EVENT = 'Tutorial Skip'\nconst TUTORIAL_COMPLETE = 'Tutorial Complete'\n\nexport const LOCALSTORAGE_TUTORIAL_EMAIL_KEY = 'builder-tutorial-email'\n\nexport default class TutorialModal extends React.PureComponent<Props, State> {\n  state = {\n    step: 0\n  }\n\n  slides = getSlides()\n\n  preventVideoContextMenu = preventDefault()\n\n  analytics = getAnalytics()\n\n  componentWillMount = () => {\n    this.analytics.track(TUTORIAL_STEP_EVENT, { step: 0 })\n  }\n\n  handleSkip = () => {\n    this.analytics.track(TUTORIAL_SKIP_EVENT)\n    localStorage.setItem(LOCALSTORAGE_TUTORIAL_KEY, '1')\n    this.props.onClose()\n  }\n\n  renderSteps = () => {\n    const { step } = this.state\n    let out: JSX.Element[] = []\n\n    for (let i = 0; i < this.slides.length; i++) {\n      out.push(<div key={`step-${i}`} className={'step ' + (i === step ? 'active' : '')} onClick={() => this.goToSlide(i)} />)\n    }\n\n    return out\n  }\n\n  renderSlide = () => {\n    const { step } = this.state\n    const slide = this.slides[step]\n\n    return (\n      <>\n        <Modal.Header>{slide.title}</Modal.Header>\n        <Modal.Description>{slide.description}</Modal.Description>\n        <Modal.Content>\n          <div className=\"slide\" onContextMenu={this.preventVideoContextMenu}>\n            {this.slides.map((slide, i) => {\n              const isCurrentStep = i === step\n              return (\n                <video\n                  key={i}\n                  src={`${PUBLIC_URL}/videos/${slide.thumbnail}.mp4`}\n                  style={{ display: isCurrentStep ? '' : 'none' }}\n                  preload=\"auto\"\n                  autoPlay\n                  muted\n                  loop\n                />\n              )\n            })}\n            {/* <video src={`${PUBLIC_URL}/videos/${slide.thumbnail}.mp4`} autoPlay muted loop /> */}\n          </div>\n        </Modal.Content>\n      </>\n    )\n  }\n\n  goToSlide = (index: number) => {\n    if (index === this.slides.length) {\n      localStorage.setItem(LOCALSTORAGE_TUTORIAL_KEY, '1')\n      this.props.onClose()\n      this.analytics.track(TUTORIAL_COMPLETE, { suscribed: false })\n      return\n    }\n    this.setState({ step: index })\n\n    this.analytics.track(TUTORIAL_STEP_EVENT, { step: index })\n  }\n\n  handleNextStep = () => {\n    const nextStep = this.state.step + 1\n    this.goToSlide(nextStep)\n  }\n\n  handlePreviousStep = () => {\n    const previousStep = this.state.step - 1\n    this.goToSlide(previousStep)\n  }\n\n  render() {\n    const { name } = this.props\n    const { step } = this.state\n\n    return (\n      <Modal name={name} onClose={this.handleSkip} closeIcon={<Close onClick={this.handleSkip} />}>\n        {this.renderSlide()}\n        <Modal.Actions>\n          {step !== 0 ? (\n            <Button onClick={this.handlePreviousStep} secondary>\n              {t('global.back')}\n            </Button>\n          ) : (\n            <div className=\"spacer\" />\n          )}\n          <div className=\"steps\">{this.renderSteps()}</div>\n          <Button primary onClick={this.handleNextStep}>\n            {step === this.slides.length - 1 ? t('global.done') : t('global.next')}\n          </Button>\n        </Modal.Actions>\n      </Modal>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}