{"ast":null,"code":"import _classCallCheck from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/opt/work/NZ_test/src/components/CollectionDetailPage/CollectionContextMenu/CollectionContextMenu.tsx\";\nimport * as React from 'react';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport { Dropdown, Button, Icon, Popup, Loader } from 'decentraland-ui';\nimport { t } from 'decentraland-dapps/dist/modules/translation/utils';\nimport { buildCollectionForumPost } from 'modules/forum/utils';\nimport { RoleType } from 'modules/collection/types';\nimport { getCollectionEditorURL, getExplorerURL, isOwner as isCollectionOwner, isLocked } from 'modules/collection/utils';\nimport ConfirmDelete from 'components/ConfirmDelete';\nimport styles from './CollectionContextMenu.module.css';\n\nvar CollectionContextMenu = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(CollectionContextMenu, _React$PureComponent);\n\n  function CollectionContextMenu() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CollectionContextMenu);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CollectionContextMenu)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.handleNavigateToForum = function () {\n      var collection = _this.props.collection;\n\n      if (collection.isPublished && collection.forumLink) {\n        _this.navigateTo(collection.forumLink, '_blank');\n      }\n    };\n\n    _this.handleNavigateToExplorer = function () {\n      var collection = _this.props.collection;\n\n      _this.navigateTo(getExplorerURL({\n        collection: collection\n      }), '_blank');\n    };\n\n    _this.handleNavigateToEditor = function () {\n      var _this$props = _this.props,\n          collection = _this$props.collection,\n          items = _this$props.items,\n          onNavigate = _this$props.onNavigate;\n      onNavigate(getCollectionEditorURL(collection, items));\n    };\n\n    _this.handlePostToForum = function () {\n      var _this$props2 = _this.props,\n          collection = _this$props2.collection,\n          items = _this$props2.items,\n          name = _this$props2.name,\n          onPostToForum = _this$props2.onPostToForum;\n\n      if (!collection.forumLink) {\n        onPostToForum(collection, buildCollectionForumPost(collection, items, name));\n      }\n    };\n\n    _this.handleUpdateManagers = function () {\n      var _this$props3 = _this.props,\n          collection = _this$props3.collection,\n          onOpenModal = _this$props3.onOpenModal;\n      onOpenModal('ManageCollectionRoleModal', {\n        type: RoleType.MANAGER,\n        collectionId: collection.id,\n        roles: collection.managers\n      });\n    };\n\n    _this.handleUpdateMinters = function () {\n      var _this$props4 = _this.props,\n          collection = _this$props4.collection,\n          onOpenModal = _this$props4.onOpenModal;\n      onOpenModal('ManageCollectionRoleModal', {\n        type: RoleType.MINTER,\n        collectionId: collection.id,\n        roles: collection.minters\n      });\n    };\n\n    _this.handleAddExistingItem = function () {\n      var _this$props5 = _this.props,\n          collection = _this$props5.collection,\n          onOpenModal = _this$props5.onOpenModal;\n      onOpenModal('AddExistingItemModal', {\n        collectionId: collection.id\n      });\n    };\n\n    _this.handleDeleteCollection = function () {\n      var _this$props6 = _this.props,\n          collection = _this$props6.collection,\n          onDelete = _this$props6.onDelete;\n      onDelete(collection);\n    };\n\n    _this.navigateTo = function (url) {\n      var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var newWindow = window.open(url, target);\n\n      if (newWindow) {\n        newWindow.focus();\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(CollectionContextMenu, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props7 = this.props,\n          collection = _this$props7.collection,\n          wallet = _this$props7.wallet,\n          isForumPostLoading = _this$props7.isForumPostLoading;\n      var isOwner = isCollectionOwner(collection, wallet.address);\n      return /*#__PURE__*/React.createElement(Dropdown, {\n        className: styles.dropdown,\n        trigger: /*#__PURE__*/React.createElement(Button, {\n          basic: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Icon, {\n          className: styles.ellipsis,\n          name: \"ellipsis horizontal\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }\n        })),\n        inline: true,\n        direction: \"left\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Dropdown.Menu, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Dropdown.Item, {\n        text: t('collection_context_menu.see_in_world'),\n        onClick: this.handleNavigateToExplorer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Dropdown.Item, {\n        text: t('global.open_in_editor'),\n        onClick: this.handleNavigateToEditor,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }\n      }), collection.isPublished ? isOwner ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Dropdown.Item, {\n        text: t('collection_context_menu.managers'),\n        onClick: this.handleUpdateManagers,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(Dropdown.Item, {\n        text: t('collection_context_menu.minters'),\n        onClick: this.handleUpdateMinters,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }\n      })) : null : !isLocked(collection) ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Dropdown.Item, {\n        text: t('collection_context_menu.add_existing_item'),\n        onClick: this.handleAddExistingItem,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(ConfirmDelete, {\n        name: collection.name,\n        onDelete: this.handleDeleteCollection,\n        trigger: /*#__PURE__*/React.createElement(Dropdown.Item, {\n          text: t('global.delete'),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 26\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }\n      })) : null, /*#__PURE__*/React.createElement(CopyToClipboard, {\n        text: collection.urn,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Dropdown.Item, {\n        text: t('collection_context_menu.copy_urn'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(Popup, {\n        content: t('collection_context_menu.unpublished'),\n        position: \"right center\",\n        disabled: collection.isPublished,\n        trigger: /*#__PURE__*/React.createElement(CopyToClipboard, {\n          text: collection.contractAddress,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(Dropdown.Item, {\n          disabled: !collection.isPublished,\n          text: t('collection_context_menu.copy_address'),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 17\n          }\n        })),\n        hideOnScroll: true,\n        on: \"hover\",\n        inverted: true,\n        flowing: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Popup, {\n        content: !collection.isPublished ? t('collection_context_menu.unpublished') : !collection.forumLink ? t('collection_context_menu.not_posted') : undefined,\n        disabled: collection.isPublished || !!collection.forumLink,\n        position: \"right center\",\n        trigger: !collection.isPublished || collection.forumLink ? /*#__PURE__*/React.createElement(Dropdown.Item, {\n          disabled: !collection.isPublished,\n          text: t('collection_context_menu.forum_post'),\n          onClick: this.handleNavigateToForum,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 17\n          }\n        }) : isOwner ? /*#__PURE__*/React.createElement(Dropdown.Item, {\n          onClick: this.handlePostToForum,\n          disabled: isForumPostLoading,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 17\n          }\n        }, isForumPostLoading ? /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 21\n          }\n        }, t('collection_context_menu.posting'), \"\\xA0\\xA0\", /*#__PURE__*/React.createElement(Loader, {\n          size: \"mini\",\n          active: true,\n          inline: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 23\n          }\n        })) : t('collection_context_menu.post_to_forum')) : null,\n        hideOnScroll: true,\n        on: \"hover\",\n        inverted: true,\n        flowing: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return CollectionContextMenu;\n}(React.PureComponent);\n\nexport { CollectionContextMenu as default };","map":{"version":3,"sources":["/opt/work/NZ_test/src/components/CollectionDetailPage/CollectionContextMenu/CollectionContextMenu.tsx"],"names":["React","CopyToClipboard","Dropdown","Button","Icon","Popup","Loader","t","buildCollectionForumPost","RoleType","getCollectionEditorURL","getExplorerURL","isOwner","isCollectionOwner","isLocked","ConfirmDelete","styles","CollectionContextMenu","handleNavigateToForum","collection","props","isPublished","forumLink","navigateTo","handleNavigateToExplorer","handleNavigateToEditor","items","onNavigate","handlePostToForum","name","onPostToForum","handleUpdateManagers","onOpenModal","type","MANAGER","collectionId","id","roles","managers","handleUpdateMinters","MINTER","minters","handleAddExistingItem","handleDeleteCollection","onDelete","url","target","newWindow","window","open","focus","wallet","isForumPostLoading","address","dropdown","ellipsis","urn","contractAddress","undefined","PureComponent"],"mappings":"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","sourcesContent":["import * as React from 'react'\nimport CopyToClipboard from 'react-copy-to-clipboard'\nimport { Dropdown, Button, Icon, Popup, Loader } from 'decentraland-ui'\nimport { t } from 'decentraland-dapps/dist/modules/translation/utils'\nimport { buildCollectionForumPost } from 'modules/forum/utils'\nimport { RoleType } from 'modules/collection/types'\nimport { getCollectionEditorURL, getExplorerURL, isOwner as isCollectionOwner, isLocked } from 'modules/collection/utils'\nimport ConfirmDelete from 'components/ConfirmDelete'\nimport { Props } from './CollectionContextMenu.types'\nimport styles from './CollectionContextMenu.module.css'\n\nexport default class CollectionContextMenu extends React.PureComponent<Props> {\n  handleNavigateToForum = () => {\n    const { collection } = this.props\n    if (collection.isPublished && collection.forumLink) {\n      this.navigateTo(collection.forumLink, '_blank')\n    }\n  }\n\n  handleNavigateToExplorer = () => {\n    const { collection } = this.props\n    this.navigateTo(getExplorerURL({ collection }), '_blank')\n  }\n\n  handleNavigateToEditor = () => {\n    const { collection, items, onNavigate } = this.props\n    onNavigate(getCollectionEditorURL(collection, items))\n  }\n\n  handlePostToForum = () => {\n    const { collection, items, name, onPostToForum } = this.props\n    if (!collection.forumLink) {\n      onPostToForum(collection, buildCollectionForumPost(collection, items, name))\n    }\n  }\n\n  handleUpdateManagers = () => {\n    const { collection, onOpenModal } = this.props\n    onOpenModal('ManageCollectionRoleModal', { type: RoleType.MANAGER, collectionId: collection.id, roles: collection.managers })\n  }\n\n  handleUpdateMinters = () => {\n    const { collection, onOpenModal } = this.props\n    onOpenModal('ManageCollectionRoleModal', { type: RoleType.MINTER, collectionId: collection.id, roles: collection.minters })\n  }\n\n  handleAddExistingItem = () => {\n    const { collection, onOpenModal } = this.props\n    onOpenModal('AddExistingItemModal', { collectionId: collection.id })\n  }\n\n  handleDeleteCollection = () => {\n    const { collection, onDelete } = this.props\n    onDelete(collection)\n  }\n\n  navigateTo = (url: string, target: string = '') => {\n    const newWindow = window.open(url, target)\n    if (newWindow) {\n      newWindow.focus()\n    }\n  }\n\n  render() {\n    const { collection, wallet, isForumPostLoading } = this.props\n    const isOwner = isCollectionOwner(collection, wallet.address)\n    return (\n      <Dropdown\n        className={styles.dropdown}\n        trigger={\n          <Button basic>\n            <Icon className={styles.ellipsis} name=\"ellipsis horizontal\" />\n          </Button>\n        }\n        inline\n        direction=\"left\"\n      >\n        <Dropdown.Menu>\n          <Dropdown.Item text={t('collection_context_menu.see_in_world')} onClick={this.handleNavigateToExplorer} />\n          <Dropdown.Item text={t('global.open_in_editor')} onClick={this.handleNavigateToEditor} />\n\n          {collection.isPublished ? (\n            isOwner ? (\n              <>\n                <Dropdown.Item text={t('collection_context_menu.managers')} onClick={this.handleUpdateManagers} />\n                <Dropdown.Item text={t('collection_context_menu.minters')} onClick={this.handleUpdateMinters} />\n              </>\n            ) : null\n          ) : !isLocked(collection) ? (\n            <>\n              <Dropdown.Item text={t('collection_context_menu.add_existing_item')} onClick={this.handleAddExistingItem} />\n              <ConfirmDelete\n                name={collection.name}\n                onDelete={this.handleDeleteCollection}\n                trigger={<Dropdown.Item text={t('global.delete')} />}\n              />\n            </>\n          ) : null}\n\n          <CopyToClipboard text={collection.urn!}>\n            <Dropdown.Item text={t('collection_context_menu.copy_urn')} />\n          </CopyToClipboard>\n\n          <Popup\n            content={t('collection_context_menu.unpublished')}\n            position=\"right center\"\n            disabled={collection.isPublished}\n            trigger={\n              <CopyToClipboard text={collection.contractAddress!}>\n                <Dropdown.Item disabled={!collection.isPublished} text={t('collection_context_menu.copy_address')} />\n              </CopyToClipboard>\n            }\n            hideOnScroll={true}\n            on=\"hover\"\n            inverted\n            flowing\n          />\n\n          <Popup\n            content={\n              !collection.isPublished\n                ? t('collection_context_menu.unpublished')\n                : !collection.forumLink\n                ? t('collection_context_menu.not_posted')\n                : undefined\n            }\n            disabled={collection.isPublished || !!collection.forumLink}\n            position=\"right center\"\n            trigger={\n              !collection.isPublished || collection.forumLink ? (\n                <Dropdown.Item\n                  disabled={!collection.isPublished}\n                  text={t('collection_context_menu.forum_post')}\n                  onClick={this.handleNavigateToForum}\n                />\n              ) : isOwner ? (\n                <Dropdown.Item onClick={this.handlePostToForum} disabled={isForumPostLoading}>\n                  {isForumPostLoading ? (\n                    <div>\n                      {t('collection_context_menu.posting')}&nbsp;&nbsp;\n                      <Loader size=\"mini\" active inline />\n                    </div>\n                  ) : (\n                    t('collection_context_menu.post_to_forum')\n                  )}\n                </Dropdown.Item>\n              ) : null\n            }\n            hideOnScroll={true}\n            on=\"hover\"\n            inverted\n            flowing\n          />\n        </Dropdown.Menu>\n      </Dropdown>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}