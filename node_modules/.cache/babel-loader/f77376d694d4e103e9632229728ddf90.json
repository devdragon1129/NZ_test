{"ast":null,"code":"/**\r\n * @hidden\r\n **/\nvar DepthCullingState =\n/** @class */\nfunction () {\n  /**\r\n   * Initializes the state.\r\n   */\n  function DepthCullingState() {\n    this._isDepthTestDirty = false;\n    this._isDepthMaskDirty = false;\n    this._isDepthFuncDirty = false;\n    this._isCullFaceDirty = false;\n    this._isCullDirty = false;\n    this._isZOffsetDirty = false;\n    this._isFrontFaceDirty = false;\n    this.reset();\n  }\n\n  Object.defineProperty(DepthCullingState.prototype, \"isDirty\", {\n    get: function get() {\n      return this._isDepthFuncDirty || this._isDepthTestDirty || this._isDepthMaskDirty || this._isCullFaceDirty || this._isCullDirty || this._isZOffsetDirty || this._isFrontFaceDirty;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(DepthCullingState.prototype, \"zOffset\", {\n    get: function get() {\n      return this._zOffset;\n    },\n    set: function set(value) {\n      if (this._zOffset === value) {\n        return;\n      }\n\n      this._zOffset = value;\n      this._isZOffsetDirty = true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(DepthCullingState.prototype, \"cullFace\", {\n    get: function get() {\n      return this._cullFace;\n    },\n    set: function set(value) {\n      if (this._cullFace === value) {\n        return;\n      }\n\n      this._cullFace = value;\n      this._isCullFaceDirty = true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(DepthCullingState.prototype, \"cull\", {\n    get: function get() {\n      return this._cull;\n    },\n    set: function set(value) {\n      if (this._cull === value) {\n        return;\n      }\n\n      this._cull = value;\n      this._isCullDirty = true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(DepthCullingState.prototype, \"depthFunc\", {\n    get: function get() {\n      return this._depthFunc;\n    },\n    set: function set(value) {\n      if (this._depthFunc === value) {\n        return;\n      }\n\n      this._depthFunc = value;\n      this._isDepthFuncDirty = true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(DepthCullingState.prototype, \"depthMask\", {\n    get: function get() {\n      return this._depthMask;\n    },\n    set: function set(value) {\n      if (this._depthMask === value) {\n        return;\n      }\n\n      this._depthMask = value;\n      this._isDepthMaskDirty = true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(DepthCullingState.prototype, \"depthTest\", {\n    get: function get() {\n      return this._depthTest;\n    },\n    set: function set(value) {\n      if (this._depthTest === value) {\n        return;\n      }\n\n      this._depthTest = value;\n      this._isDepthTestDirty = true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(DepthCullingState.prototype, \"frontFace\", {\n    get: function get() {\n      return this._frontFace;\n    },\n    set: function set(value) {\n      if (this._frontFace === value) {\n        return;\n      }\n\n      this._frontFace = value;\n      this._isFrontFaceDirty = true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  DepthCullingState.prototype.reset = function () {\n    this._depthMask = true;\n    this._depthTest = true;\n    this._depthFunc = null;\n    this._cullFace = null;\n    this._cull = null;\n    this._zOffset = 0;\n    this._frontFace = null;\n    this._isDepthTestDirty = true;\n    this._isDepthMaskDirty = true;\n    this._isDepthFuncDirty = false;\n    this._isCullFaceDirty = false;\n    this._isCullDirty = false;\n    this._isZOffsetDirty = false;\n    this._isFrontFaceDirty = false;\n  };\n\n  DepthCullingState.prototype.apply = function (gl) {\n    if (!this.isDirty) {\n      return;\n    } // Cull\n\n\n    if (this._isCullDirty) {\n      if (this.cull) {\n        gl.enable(gl.CULL_FACE);\n      } else {\n        gl.disable(gl.CULL_FACE);\n      }\n\n      this._isCullDirty = false;\n    } // Cull face\n\n\n    if (this._isCullFaceDirty) {\n      gl.cullFace(this.cullFace);\n      this._isCullFaceDirty = false;\n    } // Depth mask\n\n\n    if (this._isDepthMaskDirty) {\n      gl.depthMask(this.depthMask);\n      this._isDepthMaskDirty = false;\n    } // Depth test\n\n\n    if (this._isDepthTestDirty) {\n      if (this.depthTest) {\n        gl.enable(gl.DEPTH_TEST);\n      } else {\n        gl.disable(gl.DEPTH_TEST);\n      }\n\n      this._isDepthTestDirty = false;\n    } // Depth func\n\n\n    if (this._isDepthFuncDirty) {\n      gl.depthFunc(this.depthFunc);\n      this._isDepthFuncDirty = false;\n    } // zOffset\n\n\n    if (this._isZOffsetDirty) {\n      if (this.zOffset) {\n        gl.enable(gl.POLYGON_OFFSET_FILL);\n        gl.polygonOffset(this.zOffset, 0);\n      } else {\n        gl.disable(gl.POLYGON_OFFSET_FILL);\n      }\n\n      this._isZOffsetDirty = false;\n    } // Front face\n\n\n    if (this._isFrontFaceDirty) {\n      gl.frontFace(this.frontFace);\n      this._isFrontFaceDirty = false;\n    }\n  };\n\n  return DepthCullingState;\n}();\n\nexport { DepthCullingState };","map":null,"metadata":{},"sourceType":"module"}