{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { Observable } from \"../Misc/observable\";\nimport { Gamepad } from \"../Gamepads/gamepad\";\n/**\r\n * Defines supported buttons for XBox360 compatible gamepads\r\n */\n\nexport var Xbox360Button;\n\n(function (Xbox360Button) {\n  /** A */\n  Xbox360Button[Xbox360Button[\"A\"] = 0] = \"A\";\n  /** B */\n\n  Xbox360Button[Xbox360Button[\"B\"] = 1] = \"B\";\n  /** X */\n\n  Xbox360Button[Xbox360Button[\"X\"] = 2] = \"X\";\n  /** Y */\n\n  Xbox360Button[Xbox360Button[\"Y\"] = 3] = \"Y\";\n  /** Left button */\n\n  Xbox360Button[Xbox360Button[\"LB\"] = 4] = \"LB\";\n  /** Right button */\n\n  Xbox360Button[Xbox360Button[\"RB\"] = 5] = \"RB\";\n  /** Back */\n\n  Xbox360Button[Xbox360Button[\"Back\"] = 8] = \"Back\";\n  /** Start */\n\n  Xbox360Button[Xbox360Button[\"Start\"] = 9] = \"Start\";\n  /** Left stick */\n\n  Xbox360Button[Xbox360Button[\"LeftStick\"] = 10] = \"LeftStick\";\n  /** Right stick */\n\n  Xbox360Button[Xbox360Button[\"RightStick\"] = 11] = \"RightStick\";\n})(Xbox360Button || (Xbox360Button = {}));\n/** Defines values for XBox360 DPad  */\n\n\nexport var Xbox360Dpad;\n\n(function (Xbox360Dpad) {\n  /** Up */\n  Xbox360Dpad[Xbox360Dpad[\"Up\"] = 12] = \"Up\";\n  /** Down */\n\n  Xbox360Dpad[Xbox360Dpad[\"Down\"] = 13] = \"Down\";\n  /** Left */\n\n  Xbox360Dpad[Xbox360Dpad[\"Left\"] = 14] = \"Left\";\n  /** Right */\n\n  Xbox360Dpad[Xbox360Dpad[\"Right\"] = 15] = \"Right\";\n})(Xbox360Dpad || (Xbox360Dpad = {}));\n/**\r\n * Defines a XBox360 gamepad\r\n */\n\n\nvar Xbox360Pad =\n/** @class */\nfunction (_super) {\n  __extends(Xbox360Pad, _super);\n  /**\r\n   * Creates a new XBox360 gamepad object\r\n   * @param id defines the id of this gamepad\r\n   * @param index defines its index\r\n   * @param gamepad defines the internal HTML gamepad object\r\n   * @param xboxOne defines if it is a XBox One gamepad\r\n   */\n\n\n  function Xbox360Pad(id, index, gamepad, xboxOne) {\n    if (xboxOne === void 0) {\n      xboxOne = false;\n    }\n\n    var _this = _super.call(this, id, index, gamepad, 0, 1, 2, 3) || this;\n\n    _this._leftTrigger = 0;\n    _this._rightTrigger = 0;\n    /** Observable raised when a button is pressed */\n\n    _this.onButtonDownObservable = new Observable();\n    /** Observable raised when a button is released */\n\n    _this.onButtonUpObservable = new Observable();\n    /** Observable raised when a pad is pressed */\n\n    _this.onPadDownObservable = new Observable();\n    /** Observable raised when a pad is released */\n\n    _this.onPadUpObservable = new Observable();\n    _this._buttonA = 0;\n    _this._buttonB = 0;\n    _this._buttonX = 0;\n    _this._buttonY = 0;\n    _this._buttonBack = 0;\n    _this._buttonStart = 0;\n    _this._buttonLB = 0;\n    _this._buttonRB = 0;\n    _this._buttonLeftStick = 0;\n    _this._buttonRightStick = 0;\n    _this._dPadUp = 0;\n    _this._dPadDown = 0;\n    _this._dPadLeft = 0;\n    _this._dPadRight = 0;\n    _this._isXboxOnePad = false;\n    _this.type = Gamepad.XBOX;\n    _this._isXboxOnePad = xboxOne;\n    return _this;\n  }\n  /**\r\n   * Defines the callback to call when left trigger is pressed\r\n   * @param callback defines the callback to use\r\n   */\n\n\n  Xbox360Pad.prototype.onlefttriggerchanged = function (callback) {\n    this._onlefttriggerchanged = callback;\n  };\n  /**\r\n   * Defines the callback to call when right trigger is pressed\r\n   * @param callback defines the callback to use\r\n   */\n\n\n  Xbox360Pad.prototype.onrighttriggerchanged = function (callback) {\n    this._onrighttriggerchanged = callback;\n  };\n\n  Object.defineProperty(Xbox360Pad.prototype, \"leftTrigger\", {\n    /**\r\n     * Gets the left trigger value\r\n     */\n    get: function get() {\n      return this._leftTrigger;\n    },\n\n    /**\r\n     * Sets the left trigger value\r\n     */\n    set: function set(newValue) {\n      if (this._onlefttriggerchanged && this._leftTrigger !== newValue) {\n        this._onlefttriggerchanged(newValue);\n      }\n\n      this._leftTrigger = newValue;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Xbox360Pad.prototype, \"rightTrigger\", {\n    /**\r\n     * Gets the right trigger value\r\n     */\n    get: function get() {\n      return this._rightTrigger;\n    },\n\n    /**\r\n     * Sets the right trigger value\r\n     */\n    set: function set(newValue) {\n      if (this._onrighttriggerchanged && this._rightTrigger !== newValue) {\n        this._onrighttriggerchanged(newValue);\n      }\n\n      this._rightTrigger = newValue;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * Defines the callback to call when a button is pressed\r\n   * @param callback defines the callback to use\r\n   */\n\n  Xbox360Pad.prototype.onbuttondown = function (callback) {\n    this._onbuttondown = callback;\n  };\n  /**\r\n   * Defines the callback to call when a button is released\r\n   * @param callback defines the callback to use\r\n   */\n\n\n  Xbox360Pad.prototype.onbuttonup = function (callback) {\n    this._onbuttonup = callback;\n  };\n  /**\r\n   * Defines the callback to call when a pad is pressed\r\n   * @param callback defines the callback to use\r\n   */\n\n\n  Xbox360Pad.prototype.ondpaddown = function (callback) {\n    this._ondpaddown = callback;\n  };\n  /**\r\n   * Defines the callback to call when a pad is released\r\n   * @param callback defines the callback to use\r\n   */\n\n\n  Xbox360Pad.prototype.ondpadup = function (callback) {\n    this._ondpadup = callback;\n  };\n\n  Xbox360Pad.prototype._setButtonValue = function (newValue, currentValue, buttonType) {\n    if (newValue !== currentValue) {\n      if (newValue === 1) {\n        if (this._onbuttondown) {\n          this._onbuttondown(buttonType);\n        }\n\n        this.onButtonDownObservable.notifyObservers(buttonType);\n      }\n\n      if (newValue === 0) {\n        if (this._onbuttonup) {\n          this._onbuttonup(buttonType);\n        }\n\n        this.onButtonUpObservable.notifyObservers(buttonType);\n      }\n    }\n\n    return newValue;\n  };\n\n  Xbox360Pad.prototype._setDPadValue = function (newValue, currentValue, buttonType) {\n    if (newValue !== currentValue) {\n      if (newValue === 1) {\n        if (this._ondpaddown) {\n          this._ondpaddown(buttonType);\n        }\n\n        this.onPadDownObservable.notifyObservers(buttonType);\n      }\n\n      if (newValue === 0) {\n        if (this._ondpadup) {\n          this._ondpadup(buttonType);\n        }\n\n        this.onPadUpObservable.notifyObservers(buttonType);\n      }\n    }\n\n    return newValue;\n  };\n\n  Object.defineProperty(Xbox360Pad.prototype, \"buttonA\", {\n    /**\r\n     * Gets the value of the `A` button\r\n     */\n    get: function get() {\n      return this._buttonA;\n    },\n\n    /**\r\n     * Sets the value of the `A` button\r\n     */\n    set: function set(value) {\n      this._buttonA = this._setButtonValue(value, this._buttonA, Xbox360Button.A);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Xbox360Pad.prototype, \"buttonB\", {\n    /**\r\n     * Gets the value of the `B` button\r\n     */\n    get: function get() {\n      return this._buttonB;\n    },\n\n    /**\r\n     * Sets the value of the `B` button\r\n     */\n    set: function set(value) {\n      this._buttonB = this._setButtonValue(value, this._buttonB, Xbox360Button.B);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Xbox360Pad.prototype, \"buttonX\", {\n    /**\r\n     * Gets the value of the `X` button\r\n     */\n    get: function get() {\n      return this._buttonX;\n    },\n\n    /**\r\n     * Sets the value of the `X` button\r\n     */\n    set: function set(value) {\n      this._buttonX = this._setButtonValue(value, this._buttonX, Xbox360Button.X);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Xbox360Pad.prototype, \"buttonY\", {\n    /**\r\n     * Gets the value of the `Y` button\r\n     */\n    get: function get() {\n      return this._buttonY;\n    },\n\n    /**\r\n     * Sets the value of the `Y` button\r\n     */\n    set: function set(value) {\n      this._buttonY = this._setButtonValue(value, this._buttonY, Xbox360Button.Y);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Xbox360Pad.prototype, \"buttonStart\", {\n    /**\r\n     * Gets the value of the `Start` button\r\n     */\n    get: function get() {\n      return this._buttonStart;\n    },\n\n    /**\r\n     * Sets the value of the `Start` button\r\n     */\n    set: function set(value) {\n      this._buttonStart = this._setButtonValue(value, this._buttonStart, Xbox360Button.Start);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Xbox360Pad.prototype, \"buttonBack\", {\n    /**\r\n     * Gets the value of the `Back` button\r\n     */\n    get: function get() {\n      return this._buttonBack;\n    },\n\n    /**\r\n     * Sets the value of the `Back` button\r\n     */\n    set: function set(value) {\n      this._buttonBack = this._setButtonValue(value, this._buttonBack, Xbox360Button.Back);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Xbox360Pad.prototype, \"buttonLB\", {\n    /**\r\n     * Gets the value of the `Left` button\r\n     */\n    get: function get() {\n      return this._buttonLB;\n    },\n\n    /**\r\n     * Sets the value of the `Left` button\r\n     */\n    set: function set(value) {\n      this._buttonLB = this._setButtonValue(value, this._buttonLB, Xbox360Button.LB);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Xbox360Pad.prototype, \"buttonRB\", {\n    /**\r\n     * Gets the value of the `Right` button\r\n     */\n    get: function get() {\n      return this._buttonRB;\n    },\n\n    /**\r\n     * Sets the value of the `Right` button\r\n     */\n    set: function set(value) {\n      this._buttonRB = this._setButtonValue(value, this._buttonRB, Xbox360Button.RB);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Xbox360Pad.prototype, \"buttonLeftStick\", {\n    /**\r\n     * Gets the value of the Left joystick\r\n     */\n    get: function get() {\n      return this._buttonLeftStick;\n    },\n\n    /**\r\n     * Sets the value of the Left joystick\r\n     */\n    set: function set(value) {\n      this._buttonLeftStick = this._setButtonValue(value, this._buttonLeftStick, Xbox360Button.LeftStick);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Xbox360Pad.prototype, \"buttonRightStick\", {\n    /**\r\n     * Gets the value of the Right joystick\r\n     */\n    get: function get() {\n      return this._buttonRightStick;\n    },\n\n    /**\r\n     * Sets the value of the Right joystick\r\n     */\n    set: function set(value) {\n      this._buttonRightStick = this._setButtonValue(value, this._buttonRightStick, Xbox360Button.RightStick);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Xbox360Pad.prototype, \"dPadUp\", {\n    /**\r\n     * Gets the value of D-pad up\r\n     */\n    get: function get() {\n      return this._dPadUp;\n    },\n\n    /**\r\n     * Sets the value of D-pad up\r\n     */\n    set: function set(value) {\n      this._dPadUp = this._setDPadValue(value, this._dPadUp, Xbox360Dpad.Up);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Xbox360Pad.prototype, \"dPadDown\", {\n    /**\r\n     * Gets the value of D-pad down\r\n     */\n    get: function get() {\n      return this._dPadDown;\n    },\n\n    /**\r\n     * Sets the value of D-pad down\r\n     */\n    set: function set(value) {\n      this._dPadDown = this._setDPadValue(value, this._dPadDown, Xbox360Dpad.Down);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Xbox360Pad.prototype, \"dPadLeft\", {\n    /**\r\n     * Gets the value of D-pad left\r\n     */\n    get: function get() {\n      return this._dPadLeft;\n    },\n\n    /**\r\n     * Sets the value of D-pad left\r\n     */\n    set: function set(value) {\n      this._dPadLeft = this._setDPadValue(value, this._dPadLeft, Xbox360Dpad.Left);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Xbox360Pad.prototype, \"dPadRight\", {\n    /**\r\n     * Gets the value of D-pad right\r\n     */\n    get: function get() {\n      return this._dPadRight;\n    },\n\n    /**\r\n     * Sets the value of D-pad right\r\n     */\n    set: function set(value) {\n      this._dPadRight = this._setDPadValue(value, this._dPadRight, Xbox360Dpad.Right);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * Force the gamepad to synchronize with device values\r\n   */\n\n  Xbox360Pad.prototype.update = function () {\n    _super.prototype.update.call(this);\n\n    if (this._isXboxOnePad) {\n      this.buttonA = this.browserGamepad.buttons[0].value;\n      this.buttonB = this.browserGamepad.buttons[1].value;\n      this.buttonX = this.browserGamepad.buttons[2].value;\n      this.buttonY = this.browserGamepad.buttons[3].value;\n      this.buttonLB = this.browserGamepad.buttons[4].value;\n      this.buttonRB = this.browserGamepad.buttons[5].value;\n      this.leftTrigger = this.browserGamepad.buttons[6].value;\n      this.rightTrigger = this.browserGamepad.buttons[7].value;\n      this.buttonBack = this.browserGamepad.buttons[8].value;\n      this.buttonStart = this.browserGamepad.buttons[9].value;\n      this.buttonLeftStick = this.browserGamepad.buttons[10].value;\n      this.buttonRightStick = this.browserGamepad.buttons[11].value;\n      this.dPadUp = this.browserGamepad.buttons[12].value;\n      this.dPadDown = this.browserGamepad.buttons[13].value;\n      this.dPadLeft = this.browserGamepad.buttons[14].value;\n      this.dPadRight = this.browserGamepad.buttons[15].value;\n    } else {\n      this.buttonA = this.browserGamepad.buttons[0].value;\n      this.buttonB = this.browserGamepad.buttons[1].value;\n      this.buttonX = this.browserGamepad.buttons[2].value;\n      this.buttonY = this.browserGamepad.buttons[3].value;\n      this.buttonLB = this.browserGamepad.buttons[4].value;\n      this.buttonRB = this.browserGamepad.buttons[5].value;\n      this.leftTrigger = this.browserGamepad.buttons[6].value;\n      this.rightTrigger = this.browserGamepad.buttons[7].value;\n      this.buttonBack = this.browserGamepad.buttons[8].value;\n      this.buttonStart = this.browserGamepad.buttons[9].value;\n      this.buttonLeftStick = this.browserGamepad.buttons[10].value;\n      this.buttonRightStick = this.browserGamepad.buttons[11].value;\n      this.dPadUp = this.browserGamepad.buttons[12].value;\n      this.dPadDown = this.browserGamepad.buttons[13].value;\n      this.dPadLeft = this.browserGamepad.buttons[14].value;\n      this.dPadRight = this.browserGamepad.buttons[15].value;\n    }\n  };\n  /**\r\n   * Disposes the gamepad\r\n   */\n\n\n  Xbox360Pad.prototype.dispose = function () {\n    _super.prototype.dispose.call(this);\n\n    this.onButtonDownObservable.clear();\n    this.onButtonUpObservable.clear();\n    this.onPadDownObservable.clear();\n    this.onPadUpObservable.clear();\n  };\n\n  return Xbox360Pad;\n}(Gamepad);\n\nexport { Xbox360Pad };","map":null,"metadata":{},"sourceType":"module"}