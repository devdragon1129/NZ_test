{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createAnalyticsMiddleware = void 0;\n\nvar utils_1 = require(\"./utils\");\n\nrequire(\"./snippet\");\n\nvar disabledMiddleware = function disabledMiddleware(_) {\n  return function (next) {\n    return function (action) {\n      next(action);\n    };\n  };\n};\n\nfunction createAnalyticsMiddleware(apiKey) {\n  if (!apiKey) {\n    console.warn('Analytics: middleware disabled due to missing API key');\n    return disabledMiddleware;\n  }\n\n  var analytics = utils_1.getAnalytics();\n\n  if (!analytics) {\n    console.warn('Analytics: middleware disabled because `window.analytics` is not present');\n    return disabledMiddleware;\n  }\n\n  analytics.load(apiKey);\n  return function (_) {\n    return function (next) {\n      return function (action) {\n        utils_1.track(action);\n        next(action);\n      };\n    };\n  };\n}\n\nexports.createAnalyticsMiddleware = createAnalyticsMiddleware;","map":null,"metadata":{},"sourceType":"script"}