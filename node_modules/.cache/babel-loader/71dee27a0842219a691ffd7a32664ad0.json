{"ast":null,"code":"\"use strict\";\n/*\n  This file is part of web3x.\n\n  web3x is free software: you can redistribute it and/or modify\n  it under the terms of the GNU Lesser General Public License as published by\n  the Free Software Foundation, either version 3 of the License, or\n  (at your option) any later version.\n\n  web3x is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  GNU Lesser General Public License for more details.\n\n  You should have received a copy of the GNU Lesser General Public License\n  along with web3x.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nvar _objectWithoutProperties = require(\"/opt/work/NZ_test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectWithoutProperties\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar formatters_1 = require(\"../../formatters\");\n\nvar subscriptions_1 = require(\"../../subscriptions\");\n\nfunction subscribeForLogs(eth) {\n  var logRequest = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var fromBlock = logRequest.fromBlock,\n      subscriptionLogRequest = _objectWithoutProperties(logRequest, [\"fromBlock\"]);\n\n  var params = [formatters_1.toRawLogRequest(subscriptionLogRequest)];\n  var subscription = new subscriptions_1.Subscription('eth', 'logs', params, eth.provider, function (result, sub) {\n    var output = formatters_1.fromRawLogResponse(result);\n    sub.emit(output.removed ? 'changed' : 'data', output, sub);\n  }, false);\n\n  if (fromBlock !== undefined) {\n    eth.getPastLogs(logRequest).then(function (logs) {\n      logs.forEach(function (log) {\n        return subscription.emit('data', log, subscription);\n      });\n      subscription.subscribe();\n    }).catch(function (err) {\n      subscription.emit('error', err, subscription);\n    });\n  } else {\n    subscription.subscribe();\n  }\n\n  return subscription;\n}\n\nexports.subscribeForLogs = subscribeForLogs;","map":null,"metadata":{},"sourceType":"script"}