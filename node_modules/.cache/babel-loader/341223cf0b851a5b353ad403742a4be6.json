{"ast":null,"code":"!function (t, e) {\n  for (var n in e) {\n    t[n] = e[n];\n  }\n}(this, function (t) {\n  var e = {};\n\n  function n(o) {\n    if (e[o]) return e[o].exports;\n    var r = e[o] = {\n      i: o,\n      l: !1,\n      exports: {}\n    };\n    return t[o].call(r.exports, r, r.exports, n), r.l = !0, r.exports;\n  }\n\n  return n.m = t, n.c = e, n.d = function (t, e, o) {\n    n.o(t, e) || Object.defineProperty(t, e, {\n      enumerable: !0,\n      get: o\n    });\n  }, n.r = function (t) {\n    \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {\n      value: \"Module\"\n    }), Object.defineProperty(t, \"__esModule\", {\n      value: !0\n    });\n  }, n.t = function (t, e) {\n    if (1 & e && (t = n(t)), 8 & e) return t;\n    if (4 & e && \"object\" == typeof t && t && t.__esModule) return t;\n    var o = Object.create(null);\n    if (n.r(o), Object.defineProperty(o, \"default\", {\n      enumerable: !0,\n      value: t\n    }), 2 & e && \"string\" != typeof t) for (var r in t) {\n      n.d(o, r, function (e) {\n        return t[e];\n      }.bind(null, r));\n    }\n    return o;\n  }, n.n = function (t) {\n    var e = t && t.__esModule ? function () {\n      return t.default;\n    } : function () {\n      return t;\n    };\n    return n.d(e, \"a\", e), e;\n  }, n.o = function (t, e) {\n    return Object.prototype.hasOwnProperty.call(t, e);\n  }, n.p = \"\", n(n.s = 30);\n}([function (t, e, n) {\n  \"use strict\";\n\n  var o = this && this.__assign || function () {\n    return (o = Object.assign || function (t) {\n      for (var e, n = 1, o = arguments.length; n < o; n++) {\n        for (var r in e = arguments[n]) {\n          Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);\n        }\n      }\n\n      return t;\n    }).apply(this, arguments);\n  },\n      r = this && this.__decorate || function (t, e, n, o) {\n    var r,\n        i = arguments.length,\n        s = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) s = Reflect.decorate(t, e, n, o);else for (var a = t.length - 1; a >= 0; a--) {\n      (r = t[a]) && (s = (i < 3 ? r(s) : i > 3 ? r(e, n, s) : r(e, n)) || s);\n    }\n    return i > 3 && s && Object.defineProperty(e, n, s), s;\n  },\n      i = this && this.__read || function (t, e) {\n    var n = \"function\" == typeof Symbol && t[Symbol.iterator];\n    if (!n) return t;\n    var o,\n        r,\n        i = n.call(t),\n        s = [];\n\n    try {\n      for (; (void 0 === e || e-- > 0) && !(o = i.next()).done;) {\n        s.push(o.value);\n      }\n    } catch (t) {\n      r = {\n        error: t\n      };\n    } finally {\n      try {\n        o && !o.done && (n = i.return) && n.call(i);\n      } finally {\n        if (r) throw r.error;\n      }\n    }\n\n    return s;\n  },\n      s = this && this.__spread || function () {\n    for (var t = [], e = 0; e < arguments.length; e++) {\n      t = t.concat(i(arguments[e]));\n    }\n\n    return t;\n  };\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.isDisposableComponent = e.ObservableComponent = e.getComponentId = e.getComponentClassId = e.getComponentName = e.DisposableComponent = e.Component = e.DisposableComponentUpdated = e.DisposableComponentRemoved = e.DisposableComponentCreated = void 0;\n\n  var a = n(1),\n      p = n(8),\n      u = n(18),\n      l = function () {\n    function t(t, e, n) {\n      this.componentId = t, this.componentName = e, this.classId = n;\n    }\n\n    return t = r([p.EventConstructor()], t);\n  }();\n\n  e.DisposableComponentCreated = l;\n\n  var c = function () {\n    function t(t) {\n      this.componentId = t;\n    }\n\n    return t = r([p.EventConstructor()], t);\n  }();\n\n  e.DisposableComponentRemoved = c;\n\n  var h = function () {\n    function t(t, e) {\n      this.componentId = t, this.component = e;\n    }\n\n    return t = r([p.EventConstructor()], t);\n  }();\n\n  function d(t, e) {\n    return function (n) {\n      if (n.isComponent) throw new TypeError(\"You cannot extend a component. Trying to extend \" + n.originalClassName + \" with: \" + t);\n      if (\"number\" != typeof e || isNaN(e)) throw new Error(\"classId: \" + e + \" is an invalid integer\");\n\n      var o = n,\n          r = function r() {\n        if (!d.engine) throw new Error(\"You need to set a DisposableComponent.engine before creating disposable components\");\n        var n = Array.prototype.slice.call(arguments),\n            r = new (o.bind.apply(o, s([void 0], n)))(),\n            i = a.newId(\"C\");\n        return Object.defineProperty(r, \"__name__symbol_\", {\n          enumerable: !1,\n          writable: !1,\n          configurable: !1,\n          value: t\n        }), Object.defineProperty(r, \"__component__id_\", {\n          enumerable: !1,\n          writable: !1,\n          configurable: !1,\n          value: i\n        }), void 0 !== e && Object.defineProperty(r, \"__classId__symbol_\", {\n          enumerable: !1,\n          writable: !1,\n          configurable: !1,\n          value: e\n        }), d.engine && d.engine.registerComponent(r), r;\n      };\n\n      return void 0 !== e && (r.__classId__symbol_ = e), r.__name__symbol_ = t, r.isComponent = !0, r.isDisposableComponent = !0, r.originalClassName = t, (r.prototype = n.prototype).constructor = n, r;\n    };\n  }\n\n  function f(t) {\n    if (!t) throw new TypeError(t + \" is not a component.\");\n    if (t.__component__id_) return t.__component__id_;\n    throw new TypeError(t + \" is not a registered disposable component.\");\n  }\n\n  e.DisposableComponentUpdated = h, e.Component = function (t, e) {\n    return function (n) {\n      if (n.isComponent) throw new TypeError(\"You cannot extend a component. Trying to extend \" + n.originalClassName + \" with: \" + t);\n\n      var o = n,\n          r = function r() {\n        var n = Array.prototype.slice.call(arguments),\n            r = new (o.bind.apply(o, s([void 0], n)))();\n        return Object.defineProperty(r, \"__name__symbol_\", {\n          enumerable: !1,\n          writable: !1,\n          configurable: !1,\n          value: t\n        }), void 0 !== e && Object.defineProperty(r, \"__classId__symbol_\", {\n          enumerable: !1,\n          writable: !1,\n          configurable: !1,\n          value: e\n        }), r;\n      };\n\n      return void 0 !== e && (r.__classId__symbol_ = e), r.__name__symbol_ = t, r.isComponent = !0, r.originalClassName = t, (r.prototype = n.prototype).constructor = n, r;\n    };\n  }, e.DisposableComponent = d, function (t) {\n    t.engine = null;\n  }(d = e.DisposableComponent || (e.DisposableComponent = {})), e.getComponentName = function (t) {\n    if (!t) throw new TypeError(t + \" is not a component.\");\n    if (t.__name__symbol_) return t.__name__symbol_;\n    throw new TypeError(t + \" is not a registered component.\");\n  }, e.getComponentClassId = function (t) {\n    if (!t) throw new TypeError(t + \" is not a component.\");\n    if (t.__classId__symbol_) return t.__classId__symbol_;\n    if (!t.__name__symbol_) throw new TypeError(t + \" is not a registered component.\");\n    return null;\n  }, e.getComponentId = f;\n\n  var y = function () {\n    function t() {\n      this.dirty = !1, this.data = {}, this.subscriptions = [];\n    }\n\n    return t.component = function (t, e) {\n      if (delete t[e]) {\n        var n = e + \"_\" + Math.random();\n        t[n] = void 0, Object.defineProperty(t, n, o(o({}, Object.getOwnPropertyDescriptor(t, n)), {\n          enumerable: !1\n        })), Object.defineProperty(t, e.toString(), {\n          get: function get() {\n            return this[n];\n          },\n          set: function set(t) {\n            var o = this[n];\n\n            if (this.data[e] = t ? f(t) : null, this[n] = t, t !== o) {\n              this.dirty = !0;\n\n              for (var r = 0; r < this.subscriptions.length; r++) {\n                this.subscriptions[r](e, t, o);\n              }\n            }\n          },\n          enumerable: !0\n        });\n      }\n    }, t.field = function (t, e) {\n      delete t[e] && Object.defineProperty(t, e.toString(), {\n        get: function get() {\n          return this.data[e];\n        },\n        set: function set(t) {\n          var n = this.data[e];\n\n          if (this.data[e] = t, t !== n) {\n            this.dirty = !0;\n\n            for (var o = 0; o < this.subscriptions.length; o++) {\n              this.subscriptions[o](e, t, n);\n            }\n          }\n        },\n        enumerable: !0\n      });\n    }, t.uiValue = function (t, e) {\n      delete t[e] && Object.defineProperty(t, e.toString(), {\n        get: function get() {\n          return this.data[e].toString();\n        },\n        set: function set(t) {\n          var n = this.data[e],\n              o = new u.UIValue(t);\n\n          if (this.data[e] = o, o !== n) {\n            this.dirty = !0;\n\n            for (var r = 0; r < this.subscriptions.length; r++) {\n              this.subscriptions[r](e, o, n);\n            }\n          }\n        },\n        enumerable: !0\n      });\n    }, t.readonly = function (t, e) {\n      delete t[e] && Object.defineProperty(t, e.toString(), {\n        get: function get() {\n          if (e in this.data == !1) throw new Error(\"The field \" + e + \" is uninitialized\");\n          return this.data[e];\n        },\n        set: function set(t) {\n          if (e in this.data) throw new Error(\"The field \" + e + \" is readonly\");\n          this.data[e] = t, this.dirty = !0;\n        },\n        enumerable: !0,\n        configurable: !1\n      });\n    }, t.prototype.onChange = function (t) {\n      return this.subscriptions.push(t), this;\n    }, t.prototype.toJSON = function () {\n      return this.data;\n    }, t;\n  }();\n\n  e.ObservableComponent = y, e.isDisposableComponent = function (t) {\n    return \"__component__id_\" in t;\n  };\n}, function (t, e, n) {\n  \"use strict\";\n\n  var o = this && this.__read || function (t, e) {\n    var n = \"function\" == typeof Symbol && t[Symbol.iterator];\n    if (!n) return t;\n    var o,\n        r,\n        i = n.call(t),\n        s = [];\n\n    try {\n      for (; (void 0 === e || e-- > 0) && !(o = i.next()).done;) {\n        s.push(o.value);\n      }\n    } catch (t) {\n      r = {\n        error: t\n      };\n    } finally {\n      try {\n        o && !o.done && (n = i.return) && n.call(i);\n      } finally {\n        if (r) throw r.error;\n      }\n    }\n\n    return s;\n  },\n      r = this && this.__spread || function () {\n    for (var t = [], e = 0; e < arguments.length; e++) {\n      t = t.concat(o(arguments[e]));\n    }\n\n    return t;\n  };\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.openNFTDialog = e.openExternalURL = e.buildArray = e.uuid = e.newId = e.error = e.log = void 0;\n  var i = 0;\n  e.log = function () {\n    for (var t = [], e = 0; e < arguments.length; e++) {\n      t[e] = arguments[e];\n    }\n\n    \"undefined\" != typeof dcl ? dcl.log.apply(dcl, r(t)) : console.log.apply(console, r([\"DEBUG:\"], t));\n  }, e.error = function (t, e) {\n    \"undefined\" != typeof dcl ? dcl.error(t, e) : console.error(\"ERROR:\", t, e);\n  }, e.newId = function (t) {\n    if (i++, 0 === t.length) throw new Error(\"newId(type: string): type cannot be empty\");\n    return t + i.toString(36);\n  }, e.uuid = function () {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (t) {\n      var e = 16 * Math.random() | 0;\n      return (\"x\" === t ? e : 3 & e | 8).toString(16);\n    });\n  }, e.buildArray = function (t, e) {\n    for (var n = [], o = 0; o < t; ++o) {\n      n.push(e());\n    }\n\n    return n;\n  }, e.openExternalURL = function (t) {\n    \"undefined\" != typeof dcl ? dcl.openExternalUrl(t) : console.error(\"ERROR: openExternalURL dcl is undefined\");\n  }, e.openNFTDialog = function (t, e) {\n    if (void 0 === e && (e = null), \"undefined\" != typeof dcl) {\n      var n = t.match(/ethereum:\\/\\/(.+)\\/(.+)/);\n      if (!n || n.length < 3) return;\n      dcl.openNFTDialog(n[1], n[2], e);\n    } else console.error(\"ERROR: openNFTDialog dcl is undefined\");\n  };\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.RAD2DEG = e.DEG2RAD = e.Epsilon = e.ToLinearSpace = e.ToGammaSpace = e.Space = e.Orientation = void 0, function (t) {\n    t[t.CW = 0] = \"CW\", t[t.CCW = 1] = \"CCW\";\n  }(e.Orientation || (e.Orientation = {})), function (t) {\n    t[t.LOCAL = 0] = \"LOCAL\", t[t.WORLD = 1] = \"WORLD\", t[t.BONE = 2] = \"BONE\";\n  }(e.Space || (e.Space = {})), e.ToGammaSpace = 1 / 2.2, e.ToLinearSpace = 2.2, e.Epsilon = 1e-6, e.DEG2RAD = Math.PI / 180, e.RAD2DEG = 360 / (2 * Math.PI);\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Vector3 = void 0;\n\n  var o = n(9),\n      r = n(2),\n      i = n(10),\n      s = n(6),\n      a = function () {\n    function t(t, e, n) {\n      void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === n && (n = 0), this.x = t, this.y = e, this.z = n;\n    }\n\n    return Object.defineProperty(t.prototype, \"isNonUniform\", {\n      get: function get() {\n        var t = Math.abs(this.x),\n            e = Math.abs(this.y);\n        if (t !== e) return !0;\n        var n = Math.abs(this.z);\n        return t !== n || e !== n;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), t.Add = function (e, n) {\n      return new t(e.x, e.y, e.z).addInPlace(n);\n    }, t.GetClipFactor = function (e, n, o, r) {\n      var i = t.Dot(e, o) - r;\n      return i / (i - (t.Dot(n, o) - r));\n    }, t.GetAngleBetweenVectors = function (e, n, r) {\n      var i = e.normalizeToRef(o.MathTmp.Vector3[1]),\n          s = n.normalizeToRef(o.MathTmp.Vector3[2]),\n          a = t.Dot(i, s),\n          p = o.MathTmp.Vector3[3];\n      return t.CrossToRef(i, s, p), t.Dot(p, r) > 0 ? Math.acos(a) : -Math.acos(a);\n    }, t.FromArray = function (e, n) {\n      return void 0 === n && (n = 0), new t(e[n], e[n + 1], e[n + 2]);\n    }, t.FromFloatArray = function (e, n) {\n      return t.FromArray(e, n);\n    }, t.FromArrayToRef = function (t, e, n) {\n      n.x = t[e], n.y = t[e + 1], n.z = t[e + 2];\n    }, t.FromFloatArrayToRef = function (e, n, o) {\n      return t.FromArrayToRef(e, n, o);\n    }, t.FromFloatsToRef = function (t, e, n, o) {\n      o.copyFromFloats(t, e, n);\n    }, t.Zero = function () {\n      return new t(0, 0, 0);\n    }, t.One = function () {\n      return new t(1, 1, 1);\n    }, t.Up = function () {\n      return new t(0, 1, 0);\n    }, t.Down = function () {\n      return new t(0, -1, 0);\n    }, t.Forward = function () {\n      return new t(0, 0, 1);\n    }, t.Backward = function () {\n      return new t(0, 0, -1);\n    }, t.Right = function () {\n      return new t(1, 0, 0);\n    }, t.Left = function () {\n      return new t(-1, 0, 0);\n    }, t.TransformCoordinates = function (e, n) {\n      var o = t.Zero();\n      return t.TransformCoordinatesToRef(e, n, o), o;\n    }, t.TransformCoordinatesToRef = function (e, n, o) {\n      return t.TransformCoordinatesFromFloatsToRef(e.x, e.y, e.z, n, o);\n    }, t.TransformCoordinatesFromFloatsToRef = function (t, e, n, o, r) {\n      var i = o.m,\n          s = t * i[0] + e * i[4] + n * i[8] + i[12],\n          a = t * i[1] + e * i[5] + n * i[9] + i[13],\n          p = t * i[2] + e * i[6] + n * i[10] + i[14],\n          u = 1 / (t * i[3] + e * i[7] + n * i[11] + i[15]);\n      r.x = s * u, r.y = a * u, r.z = p * u;\n    }, t.TransformNormal = function (e, n) {\n      var o = t.Zero();\n      return t.TransformNormalToRef(e, n, o), o;\n    }, t.TransformNormalToRef = function (t, e, n) {\n      this.TransformNormalFromFloatsToRef(t.x, t.y, t.z, e, n);\n    }, t.TransformNormalFromFloatsToRef = function (t, e, n, o, r) {\n      var i = o.m;\n      r.x = t * i[0] + e * i[4] + n * i[8], r.y = t * i[1] + e * i[5] + n * i[9], r.z = t * i[2] + e * i[6] + n * i[10];\n    }, t.CatmullRom = function (e, n, o, r, i) {\n      var s = i * i,\n          a = i * s;\n      return new t(.5 * (2 * n.x + (-e.x + o.x) * i + (2 * e.x - 5 * n.x + 4 * o.x - r.x) * s + (-e.x + 3 * n.x - 3 * o.x + r.x) * a), .5 * (2 * n.y + (-e.y + o.y) * i + (2 * e.y - 5 * n.y + 4 * o.y - r.y) * s + (-e.y + 3 * n.y - 3 * o.y + r.y) * a), .5 * (2 * n.z + (-e.z + o.z) * i + (2 * e.z - 5 * n.z + 4 * o.z - r.z) * s + (-e.z + 3 * n.z - 3 * o.z + r.z) * a));\n    }, t.Clamp = function (e, n, o) {\n      var r = new t();\n      return t.ClampToRef(e, n, o, r), r;\n    }, t.ClampToRef = function (t, e, n, o) {\n      var r = t.x;\n      r = (r = r > n.x ? n.x : r) < e.x ? e.x : r;\n      var i = t.y;\n      i = (i = i > n.y ? n.y : i) < e.y ? e.y : i;\n      var s = t.z;\n      s = (s = s > n.z ? n.z : s) < e.z ? e.z : s, o.copyFromFloats(r, i, s);\n    }, t.Hermite = function (e, n, o, r, i) {\n      var s = i * i,\n          a = i * s,\n          p = 2 * a - 3 * s + 1,\n          u = -2 * a + 3 * s,\n          l = a - 2 * s + i,\n          c = a - s;\n      return new t(e.x * p + o.x * u + n.x * l + r.x * c, e.y * p + o.y * u + n.y * l + r.y * c, e.z * p + o.z * u + n.z * l + r.z * c);\n    }, t.Lerp = function (e, n, o) {\n      var r = new t(0, 0, 0);\n      return t.LerpToRef(e, n, o, r), r;\n    }, t.LerpToRef = function (t, e, n, o) {\n      o.x = t.x + (e.x - t.x) * n, o.y = t.y + (e.y - t.y) * n, o.z = t.z + (e.z - t.z) * n;\n    }, t.Dot = function (t, e) {\n      return t.x * e.x + t.y * e.y + t.z * e.z;\n    }, t.Cross = function (e, n) {\n      var o = t.Zero();\n      return t.CrossToRef(e, n, o), o;\n    }, t.CrossToRef = function (t, e, n) {\n      var o = t.y * e.z - t.z * e.y,\n          r = t.z * e.x - t.x * e.z,\n          i = t.x * e.y - t.y * e.x;\n      n.copyFromFloats(o, r, i);\n    }, t.Normalize = function (e) {\n      var n = t.Zero();\n      return t.NormalizeToRef(e, n), n;\n    }, t.NormalizeToRef = function (t, e) {\n      t.normalizeToRef(e);\n    }, t.Minimize = function (e, n) {\n      var o = new t(e.x, e.y, e.z);\n      return o.minimizeInPlace(n), o;\n    }, t.Maximize = function (e, n) {\n      var o = new t(e.x, e.y, e.z);\n      return o.maximizeInPlace(n), o;\n    }, t.Distance = function (e, n) {\n      return Math.sqrt(t.DistanceSquared(e, n));\n    }, t.DistanceSquared = function (t, e) {\n      var n = t.x - e.x,\n          o = t.y - e.y,\n          r = t.z - e.z;\n      return n * n + o * o + r * r;\n    }, t.Center = function (e, n) {\n      var o = t.Add(e, n);\n      return o.scaleInPlace(.5), o;\n    }, t.RotationFromAxis = function (e, n, o) {\n      var r = t.Zero();\n      return t.RotationFromAxisToRef(e, n, o, r), r;\n    }, t.RotationFromAxisToRef = function (t, e, n, r) {\n      var s = o.MathTmp.Quaternion[0];\n      i.Quaternion.RotationQuaternionFromAxisToRef(t, e, n, s), r.copyFrom(s.eulerAngles);\n    }, t.prototype.toString = function () {\n      return \"(\" + this.x + \", \" + this.y + \", \" + this.z + \")\";\n    }, t.prototype.getClassName = function () {\n      return \"Vector3\";\n    }, t.prototype.getHashCode = function () {\n      var t = this.x || 0;\n      return t = 397 * (t = 397 * t ^ (this.y || 0)) ^ (this.z || 0);\n    }, t.prototype.asArray = function () {\n      var t = [];\n      return this.toArray(t, 0), t;\n    }, t.prototype.toArray = function (t, e) {\n      return void 0 === e && (e = 0), t[e] = this.x, t[e + 1] = this.y, t[e + 2] = this.z, this;\n    }, t.prototype.toQuaternion = function () {\n      return i.Quaternion.Identity.setEuler(this.y, this.x, this.z);\n    }, t.prototype.addInPlace = function (t) {\n      return this.addInPlaceFromFloats(t.x, t.y, t.z);\n    }, t.prototype.addInPlaceFromFloats = function (t, e, n) {\n      return this.x += t, this.y += e, this.z += n, this;\n    }, t.prototype.add = function (e) {\n      return new t(this.x + e.x, this.y + e.y, this.z + e.z);\n    }, t.prototype.addToRef = function (t, e) {\n      return e.copyFromFloats(this.x + t.x, this.y + t.y, this.z + t.z);\n    }, t.prototype.subtractInPlace = function (t) {\n      return this.x -= t.x, this.y -= t.y, this.z -= t.z, this;\n    }, t.prototype.subtract = function (e) {\n      return new t(this.x - e.x, this.y - e.y, this.z - e.z);\n    }, t.prototype.subtractToRef = function (t, e) {\n      return this.subtractFromFloatsToRef(t.x, t.y, t.z, e);\n    }, t.prototype.subtractFromFloats = function (e, n, o) {\n      return new t(this.x - e, this.y - n, this.z - o);\n    }, t.prototype.subtractFromFloatsToRef = function (t, e, n, o) {\n      return o.copyFromFloats(this.x - t, this.y - e, this.z - n);\n    }, t.prototype.applyMatrix4 = function (t) {\n      this.applyMatrix4ToRef(t, this);\n    }, t.prototype.applyMatrix4ToRef = function (t, e) {\n      var n = this.x,\n          o = this.y,\n          r = this.z,\n          i = t.m,\n          s = 1 / (i[3] * n + i[7] * o + i[11] * r + i[15]);\n      return e.x = (i[0] * n + i[4] * o + i[8] * r + i[12]) * s, e.y = (i[1] * n + i[5] * o + i[9] * r + i[13]) * s, e.z = (i[2] * n + i[6] * o + i[10] * r + i[14]) * s, e;\n    }, t.prototype.rotate = function (t) {\n      return this.rotateToRef(t, this);\n    }, t.prototype.rotateToRef = function (t, e) {\n      var n = this.x,\n          o = this.y,\n          r = this.z,\n          i = t.x,\n          s = t.y,\n          a = t.z,\n          p = t.w,\n          u = p * n + s * r - a * o,\n          l = p * o + a * n - i * r,\n          c = p * r + i * o - s * n,\n          h = -i * n - s * o - a * r;\n      return e.x = u * p + h * -i + l * -a - c * -s, e.y = l * p + h * -s + c * -i - u * -a, e.z = c * p + h * -a + u * -s - l * -i, e;\n    }, t.prototype.negate = function () {\n      return new t(-this.x, -this.y, -this.z);\n    }, t.prototype.scaleInPlace = function (t) {\n      return this.x *= t, this.y *= t, this.z *= t, this;\n    }, t.prototype.scale = function (e) {\n      return new t(this.x * e, this.y * e, this.z * e);\n    }, t.prototype.scaleToRef = function (t, e) {\n      return e.copyFromFloats(this.x * t, this.y * t, this.z * t);\n    }, t.prototype.scaleAndAddToRef = function (t, e) {\n      return e.addInPlaceFromFloats(this.x * t, this.y * t, this.z * t);\n    }, t.prototype.equals = function (t) {\n      return t && this.x === t.x && this.y === t.y && this.z === t.z;\n    }, t.prototype.equalsWithEpsilon = function (t, e) {\n      return void 0 === e && (e = r.Epsilon), t && s.Scalar.WithinEpsilon(this.x, t.x, e) && s.Scalar.WithinEpsilon(this.y, t.y, e) && s.Scalar.WithinEpsilon(this.z, t.z, e);\n    }, t.prototype.equalsToFloats = function (t, e, n) {\n      return this.x === t && this.y === e && this.z === n;\n    }, t.prototype.multiplyInPlace = function (t) {\n      return this.x *= t.x, this.y *= t.y, this.z *= t.z, this;\n    }, t.prototype.multiply = function (t) {\n      return this.multiplyByFloats(t.x, t.y, t.z);\n    }, t.prototype.multiplyToRef = function (t, e) {\n      return e.copyFromFloats(this.x * t.x, this.y * t.y, this.z * t.z);\n    }, t.prototype.multiplyByFloats = function (e, n, o) {\n      return new t(this.x * e, this.y * n, this.z * o);\n    }, t.prototype.divide = function (e) {\n      return new t(this.x / e.x, this.y / e.y, this.z / e.z);\n    }, t.prototype.divideToRef = function (t, e) {\n      return e.copyFromFloats(this.x / t.x, this.y / t.y, this.z / t.z);\n    }, t.prototype.divideInPlace = function (t) {\n      return this.divideToRef(t, this);\n    }, t.prototype.minimizeInPlace = function (t) {\n      return this.minimizeInPlaceFromFloats(t.x, t.y, t.z);\n    }, t.prototype.maximizeInPlace = function (t) {\n      return this.maximizeInPlaceFromFloats(t.x, t.y, t.z);\n    }, t.prototype.minimizeInPlaceFromFloats = function (t, e, n) {\n      return t < this.x && (this.x = t), e < this.y && (this.y = e), n < this.z && (this.z = n), this;\n    }, t.prototype.maximizeInPlaceFromFloats = function (t, e, n) {\n      return t > this.x && (this.x = t), e > this.y && (this.y = e), n > this.z && (this.z = n), this;\n    }, t.prototype.floor = function () {\n      return new t(Math.floor(this.x), Math.floor(this.y), Math.floor(this.z));\n    }, t.prototype.fract = function () {\n      return new t(this.x - Math.floor(this.x), this.y - Math.floor(this.y), this.z - Math.floor(this.z));\n    }, t.prototype.length = function () {\n      return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n    }, t.prototype.lengthSquared = function () {\n      return this.x * this.x + this.y * this.y + this.z * this.z;\n    }, t.prototype.normalize = function () {\n      return this.normalizeFromLength(this.length());\n    }, t.prototype.normalizeFromLength = function (t) {\n      return 0 === t || 1 === t ? this : this.scaleInPlace(1 / t);\n    }, t.prototype.normalizeToNew = function () {\n      var e = new t(0, 0, 0);\n      return this.normalizeToRef(e), e;\n    }, t.prototype.normalizeToRef = function (t) {\n      var e = this.length();\n      return 0 === e || 1 === e ? t.copyFromFloats(this.x, this.y, this.z) : this.scaleToRef(1 / e, t);\n    }, t.prototype.clone = function () {\n      return new t(this.x, this.y, this.z);\n    }, t.prototype.copyFrom = function (t) {\n      return this.copyFromFloats(t.x, t.y, t.z);\n    }, t.prototype.copyFromFloats = function (t, e, n) {\n      return this.x = t, this.y = e, this.z = n, this;\n    }, t.prototype.set = function (t, e, n) {\n      return this.copyFromFloats(t, e, n);\n    }, t.prototype.setAll = function (t) {\n      return this.x = this.y = this.z = t, this;\n    }, t;\n  }();\n\n  e.Vector3 = a;\n}, function (t, e, n) {\n  \"use strict\";\n\n  var _o,\n      r = this && this.__extends || (_o = function o(t, e) {\n    return (_o = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (t, e) {\n      t.__proto__ = e;\n    } || function (t, e) {\n      for (var n in e) {\n        Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n      }\n    })(t, e);\n  }, function (t, e) {\n    function n() {\n      this.constructor = t;\n    }\n\n    _o(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n  }),\n      i = this && this.__assign || function () {\n    return (i = Object.assign || function (t) {\n      for (var e, n = 1, o = arguments.length; n < o; n++) {\n        for (var r in e = arguments[n]) {\n          Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);\n        }\n      }\n\n      return t;\n    }).apply(this, arguments);\n  },\n      s = this && this.__decorate || function (t, e, n, o) {\n    var r,\n        i = arguments.length,\n        s = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) s = Reflect.decorate(t, e, n, o);else for (var a = t.length - 1; a >= 0; a--) {\n      (r = t[a]) && (s = (i < 3 ? r(s) : i > 3 ? r(e, n, s) : r(e, n)) || s);\n    }\n    return i > 3 && s && Object.defineProperty(e, n, s), s;\n  };\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.VideoTexture = e.VideoClip = e.SmartItem = e.OnAnimationEnd = e.OnPointerLock = e.OnPointerUUIDEvent = e.OnUUIDEvent = e.BasicMaterial = e.Material = e.TransparencyMode = e.TextShape = e.Fonts = e.Font = e.OBJShape = e.Animator = e.Texture = e.NFTShape = e.PictureFrameStyle = e.GLTFShape = e.CylinderShape = e.ConeShape = e.PlaneShape = e.CircleShape = e.SphereShape = e.BoxShape = e.Shape = e.Billboard = e.Transform = e.AvatarModifierArea = e.AvatarModifiers = e.CLASS_ID = void 0;\n  var a,\n      p = n(0),\n      u = n(5),\n      l = n(26),\n      c = n(1),\n      h = n(16);\n  !function (t) {\n    t[t.TRANSFORM = 1] = \"TRANSFORM\", t[t.UUID_CALLBACK = 8] = \"UUID_CALLBACK\", t[t.BOX_SHAPE = 16] = \"BOX_SHAPE\", t[t.SPHERE_SHAPE = 17] = \"SPHERE_SHAPE\", t[t.PLANE_SHAPE = 18] = \"PLANE_SHAPE\", t[t.CONE_SHAPE = 19] = \"CONE_SHAPE\", t[t.CYLINDER_SHAPE = 20] = \"CYLINDER_SHAPE\", t[t.TEXT_SHAPE = 21] = \"TEXT_SHAPE\", t[t.NFT_SHAPE = 22] = \"NFT_SHAPE\", t[t.UI_WORLD_SPACE_SHAPE = 23] = \"UI_WORLD_SPACE_SHAPE\", t[t.UI_SCREEN_SPACE_SHAPE = 24] = \"UI_SCREEN_SPACE_SHAPE\", t[t.UI_CONTAINER_RECT = 25] = \"UI_CONTAINER_RECT\", t[t.UI_CONTAINER_STACK = 26] = \"UI_CONTAINER_STACK\", t[t.UI_TEXT_SHAPE = 27] = \"UI_TEXT_SHAPE\", t[t.UI_INPUT_TEXT_SHAPE = 28] = \"UI_INPUT_TEXT_SHAPE\", t[t.UI_IMAGE_SHAPE = 29] = \"UI_IMAGE_SHAPE\", t[t.UI_SLIDER_SHAPE = 30] = \"UI_SLIDER_SHAPE\", t[t.CIRCLE_SHAPE = 31] = \"CIRCLE_SHAPE\", t[t.BILLBOARD = 32] = \"BILLBOARD\", t[t.ANIMATION = 33] = \"ANIMATION\", t[t.FONT = 34] = \"FONT\", t[t.UI_FULLSCREEN_SHAPE = 40] = \"UI_FULLSCREEN_SHAPE\", t[t.UI_BUTTON_SHAPE = 41] = \"UI_BUTTON_SHAPE\", t[t.GLTF_SHAPE = 54] = \"GLTF_SHAPE\", t[t.OBJ_SHAPE = 55] = \"OBJ_SHAPE\", t[t.AVATAR_SHAPE = 56] = \"AVATAR_SHAPE\", t[t.BASIC_MATERIAL = 64] = \"BASIC_MATERIAL\", t[t.PBR_MATERIAL = 65] = \"PBR_MATERIAL\", t[t.HIGHLIGHT_ENTITY = 66] = \"HIGHLIGHT_ENTITY\", t[t.SOUND = 67] = \"SOUND\", t[t.TEXTURE = 68] = \"TEXTURE\", t[t.VIDEO_CLIP = 70] = \"VIDEO_CLIP\", t[t.VIDEO_TEXTURE = 71] = \"VIDEO_TEXTURE\", t[t.AUDIO_CLIP = 200] = \"AUDIO_CLIP\", t[t.AUDIO_SOURCE = 201] = \"AUDIO_SOURCE\", t[t.AUDIO_STREAM = 202] = \"AUDIO_STREAM\", t[t.GIZMOS = 203] = \"GIZMOS\", t[t.SMART_ITEM = 204] = \"SMART_ITEM\", t[t.AVATAR_MODIFIER_AREA = 205] = \"AVATAR_MODIFIER_AREA\";\n  }(a = e.CLASS_ID || (e.CLASS_ID = {})), function (t) {\n    t.HIDE_AVATARS = \"HIDE_AVATARS\", t.DISABLE_PASSPORTS = \"DISABLE_PASSPORTS\";\n  }(e.AvatarModifiers || (e.AvatarModifiers = {}));\n\n  var d = function (t) {\n    function e(e) {\n      var n = t.call(this) || this;\n      return n.area = e.area, n.modifiers = e.modifiers, n;\n    }\n\n    return r(e, t), s([p.ObservableComponent.field], e.prototype, \"area\", void 0), s([p.ObservableComponent.field], e.prototype, \"modifiers\", void 0), e = s([p.Component(\"engine.avatarModifierArea\", a.AVATAR_MODIFIER_AREA)], e);\n  }(p.ObservableComponent);\n\n  e.AvatarModifierArea = d;\n\n  var f = function (t) {\n    function e(e) {\n      void 0 === e && (e = {});\n      var n = t.call(this) || this;\n      return n.position = e.position || u.Vector3.Zero(), n.rotation = e.rotation || u.Quaternion.Identity, n.scale = e.scale || new u.Vector3(1, 1, 1), n;\n    }\n\n    return r(e, t), Object.defineProperty(e.prototype, \"eulerAngles\", {\n      get: function get() {\n        return this.rotation.eulerAngles;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), e.prototype.lookAt = function (t, e) {\n      void 0 === e && (e = u.MathTmp.staticUp);\n      var n = new u.Matrix();\n      return u.Matrix.LookAtLHToRef(this.position, t, e, n), n.invert(), u.Quaternion.FromRotationMatrixToRef(n, this.rotation), this;\n    }, e.prototype.rotate = function (t, e) {\n      return this.rotation.multiplyInPlace(this.rotation.angleAxis(e, t)), this;\n    }, e.prototype.translate = function (t) {\n      return this.position.addInPlace(t), this;\n    }, s([p.ObservableComponent.field], e.prototype, \"position\", void 0), s([p.ObservableComponent.field], e.prototype, \"rotation\", void 0), s([p.ObservableComponent.field], e.prototype, \"scale\", void 0), e = s([p.Component(\"engine.transform\", a.TRANSFORM)], e);\n  }(p.ObservableComponent);\n\n  e.Transform = f;\n\n  var y = function (t) {\n    function e(e, n, o) {\n      void 0 === e && (e = !0), void 0 === n && (n = !0), void 0 === o && (o = !0);\n      var r = t.call(this) || this;\n      return r.x = !0, r.y = !0, r.z = !0, r.x = e, r.y = n, r.z = o, r;\n    }\n\n    return r(e, t), s([p.ObservableComponent.field], e.prototype, \"x\", void 0), s([p.ObservableComponent.field], e.prototype, \"y\", void 0), s([p.ObservableComponent.field], e.prototype, \"z\", void 0), e = s([p.Component(\"engine.billboard\", a.BILLBOARD)], e);\n  }(p.ObservableComponent);\n\n  e.Billboard = y;\n\n  var v = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.withCollisions = !0, e.isPointerBlocker = !0, e.visible = !0, e;\n    }\n\n    return r(e, t), s([p.ObservableComponent.field], e.prototype, \"withCollisions\", void 0), s([p.ObservableComponent.field], e.prototype, \"isPointerBlocker\", void 0), s([p.ObservableComponent.field], e.prototype, \"visible\", void 0), e;\n  }(p.ObservableComponent);\n\n  e.Shape = v;\n\n  var m = function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return r(e, t), e = s([p.DisposableComponent(\"engine.shape\", a.BOX_SHAPE)], e);\n  }(v);\n\n  e.BoxShape = m;\n\n  var b = function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return r(e, t), e = s([p.DisposableComponent(\"engine.shape\", a.SPHERE_SHAPE)], e);\n  }(v);\n\n  e.SphereShape = b;\n\n  var g = function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return r(e, t), s([p.ObservableComponent.field], e.prototype, \"segments\", void 0), s([p.ObservableComponent.field], e.prototype, \"arc\", void 0), e = s([p.DisposableComponent(\"engine.shape\", a.CIRCLE_SHAPE)], e);\n  }(v);\n\n  e.CircleShape = g;\n\n  var _ = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.width = 1, e.height = 1, e;\n    }\n\n    return r(e, t), s([p.ObservableComponent.field], e.prototype, \"width\", void 0), s([p.ObservableComponent.field], e.prototype, \"height\", void 0), s([p.ObservableComponent.field], e.prototype, \"uvs\", void 0), e = s([p.DisposableComponent(\"engine.shape\", a.PLANE_SHAPE)], e);\n  }(v);\n\n  e.PlaneShape = _;\n\n  var C = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.radiusTop = 0, e.radiusBottom = 1, e.segmentsHeight = 1, e.segmentsRadial = 36, e.openEnded = !1, e.radius = null, e.arc = 360, e;\n    }\n\n    return r(e, t), s([p.ObservableComponent.field], e.prototype, \"radiusTop\", void 0), s([p.ObservableComponent.field], e.prototype, \"radiusBottom\", void 0), s([p.ObservableComponent.field], e.prototype, \"segmentsHeight\", void 0), s([p.ObservableComponent.field], e.prototype, \"segmentsRadial\", void 0), s([p.ObservableComponent.field], e.prototype, \"openEnded\", void 0), s([p.ObservableComponent.field], e.prototype, \"radius\", void 0), s([p.ObservableComponent.field], e.prototype, \"arc\", void 0), e = s([p.DisposableComponent(\"engine.shape\", a.CONE_SHAPE)], e);\n  }(v);\n\n  e.ConeShape = C;\n\n  var O = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.radiusTop = 1, e.radiusBottom = 1, e.segmentsHeight = 1, e.segmentsRadial = 36, e.openEnded = !1, e.radius = null, e.arc = 360, e;\n    }\n\n    return r(e, t), s([p.ObservableComponent.field], e.prototype, \"radiusTop\", void 0), s([p.ObservableComponent.field], e.prototype, \"radiusBottom\", void 0), s([p.ObservableComponent.field], e.prototype, \"segmentsHeight\", void 0), s([p.ObservableComponent.field], e.prototype, \"segmentsRadial\", void 0), s([p.ObservableComponent.field], e.prototype, \"openEnded\", void 0), s([p.ObservableComponent.field], e.prototype, \"radius\", void 0), s([p.ObservableComponent.field], e.prototype, \"arc\", void 0), e = s([p.DisposableComponent(\"engine.shape\", a.CYLINDER_SHAPE)], e);\n  }(v);\n\n  e.CylinderShape = O;\n\n  var x,\n      w = function (t) {\n    function e(e) {\n      var n = t.call(this) || this;\n      return n.src = e, n;\n    }\n\n    return r(e, t), s([v.readonly], e.prototype, \"src\", void 0), e = s([p.DisposableComponent(\"engine.shape\", a.GLTF_SHAPE)], e);\n  }(v);\n\n  e.GLTFShape = w, function (t) {\n    t[t.Classic = 0] = \"Classic\", t[t.Baroque_Ornament = 1] = \"Baroque_Ornament\", t[t.Diamond_Ornament = 2] = \"Diamond_Ornament\", t[t.Minimal_Wide = 3] = \"Minimal_Wide\", t[t.Minimal_Grey = 4] = \"Minimal_Grey\", t[t.Blocky = 5] = \"Blocky\", t[t.Gold_Edges = 6] = \"Gold_Edges\", t[t.Gold_Carved = 7] = \"Gold_Carved\", t[t.Gold_Wide = 8] = \"Gold_Wide\", t[t.Gold_Rounded = 9] = \"Gold_Rounded\", t[t.Metal_Medium = 10] = \"Metal_Medium\", t[t.Metal_Wide = 11] = \"Metal_Wide\", t[t.Metal_Slim = 12] = \"Metal_Slim\", t[t.Metal_Rounded = 13] = \"Metal_Rounded\", t[t.Pins = 14] = \"Pins\", t[t.Minimal_Black = 15] = \"Minimal_Black\", t[t.Minimal_White = 16] = \"Minimal_White\", t[t.Tape = 17] = \"Tape\", t[t.Wood_Slim = 18] = \"Wood_Slim\", t[t.Wood_Wide = 19] = \"Wood_Wide\", t[t.Wood_Twigs = 20] = \"Wood_Twigs\", t[t.Canvas = 21] = \"Canvas\";\n  }(x = e.PictureFrameStyle || (e.PictureFrameStyle = {}));\n\n  var T = function (t) {\n    function e(e, n) {\n      void 0 === n && (n = {});\n      var o = t.call(this) || this;\n      o.src = e;\n      var r = new u.Color3(.6404918, .611472, .8584906),\n          i = x.Classic;\n      return n instanceof u.Color3 ? r = n : null != n && (n.color && (r = n.color), n.style && (i = n.style)), o.color = r, o.style = i, o;\n    }\n\n    return r(e, t), s([v.readonly], e.prototype, \"src\", void 0), s([v.readonly], e.prototype, \"style\", void 0), s([p.ObservableComponent.field], e.prototype, \"color\", void 0), e = s([p.DisposableComponent(\"engine.shape\", a.NFT_SHAPE)], e);\n  }(v);\n\n  e.NFTShape = T;\n\n  var R = function (t) {\n    function e(e, n) {\n      var o = t.call(this) || this;\n      if (o.src = e, n) for (var r in n) {\n        o[r] = n[r];\n      }\n      return o;\n    }\n\n    return r(e, t), s([p.ObservableComponent.readonly], e.prototype, \"src\", void 0), s([p.ObservableComponent.readonly], e.prototype, \"samplingMode\", void 0), s([p.ObservableComponent.readonly], e.prototype, \"wrap\", void 0), s([p.ObservableComponent.readonly], e.prototype, \"hasAlpha\", void 0), e = s([p.DisposableComponent(\"engine.texture\", a.TEXTURE)], e);\n  }(p.ObservableComponent);\n\n  e.Texture = R;\n\n  var A = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.states = [], e;\n    }\n\n    return r(e, t), e.prototype.addClip = function (t) {\n      var e = this;\n      return this.states.push(t), t.onChange(function () {\n        e.dirty = !0;\n      }), this;\n    }, e.prototype.getClip = function (t) {\n      for (var e = 0; e < this.states.length; e++) {\n        var n = this.states[e];\n        if (n.clip === t) return n;\n      }\n\n      var o = new l.AnimationState(t);\n      return this.addClip(o), o;\n    }, s([p.ObservableComponent.readonly], e.prototype, \"states\", void 0), e = s([p.Component(\"engine.animator\", a.ANIMATION)], e);\n  }(v);\n\n  e.Animator = A;\n\n  var E = function (t) {\n    function e(e) {\n      var n = t.call(this) || this;\n      return n.src = e, n;\n    }\n\n    return r(e, t), s([p.ObservableComponent.readonly], e.prototype, \"src\", void 0), e = s([p.DisposableComponent(\"engine.shape\", a.OBJ_SHAPE)], e);\n  }(v);\n\n  e.OBJShape = E;\n\n  var S = function (t) {\n    function e(e) {\n      void 0 === e && (e = \"\");\n      var n = t.call(this) || this;\n      return n.src = e, n;\n    }\n\n    return r(e, t), s([p.ObservableComponent.readonly], e.prototype, \"src\", void 0), e = s([p.DisposableComponent(\"engine.font\", a.FONT)], e);\n  }(p.ObservableComponent);\n\n  e.Font = S, function (t) {\n    t.SanFrancisco = \"builtin:SF-UI-Text-Regular SDF\", t.SanFrancisco_Heavy = \"builtin:SF-UI-Text-Heavy SDF\", t.SanFrancisco_Semibold = \"builtin:SF-UI-Text-Semibold SDF\", t.LiberationSans = \"builtin:LiberationSans SDF\";\n  }(e.Fonts || (e.Fonts = {}));\n\n  var P,\n      I = function (t) {\n    function e(e) {\n      var n = t.call(this) || this;\n      return n.outlineWidth = 0, n.outlineColor = new u.Color3(1, 1, 1), n.color = new u.Color3(1, 1, 1), n.fontSize = 10, n.fontWeight = \"normal\", n.opacity = 1, n.value = \"\", n.lineSpacing = \"0px\", n.lineCount = 0, n.resizeToFit = !1, n.textWrapping = !1, n.shadowBlur = 0, n.shadowOffsetX = 0, n.shadowOffsetY = 0, n.shadowColor = new u.Color3(1, 1, 1), n.zIndex = 0, n.hTextAlign = \"center\", n.vTextAlign = \"center\", n.width = 1, n.height = 1, n.paddingTop = 0, n.paddingRight = 0, n.paddingBottom = 0, n.paddingLeft = 0, n.isPickable = !1, n.billboard = !1, n.visible = !0, e && (n.value = e), n;\n    }\n\n    return r(e, t), s([p.ObservableComponent.field], e.prototype, \"outlineWidth\", void 0), s([p.ObservableComponent.field], e.prototype, \"outlineColor\", void 0), s([p.ObservableComponent.field], e.prototype, \"color\", void 0), s([p.ObservableComponent.field], e.prototype, \"fontSize\", void 0), s([p.ObservableComponent.field], e.prototype, \"fontWeight\", void 0), s([p.ObservableComponent.component], e.prototype, \"font\", void 0), s([p.ObservableComponent.field], e.prototype, \"opacity\", void 0), s([p.ObservableComponent.field], e.prototype, \"value\", void 0), s([p.ObservableComponent.field], e.prototype, \"lineSpacing\", void 0), s([p.ObservableComponent.field], e.prototype, \"lineCount\", void 0), s([p.ObservableComponent.field], e.prototype, \"resizeToFit\", void 0), s([p.ObservableComponent.field], e.prototype, \"textWrapping\", void 0), s([p.ObservableComponent.field], e.prototype, \"shadowBlur\", void 0), s([p.ObservableComponent.field], e.prototype, \"shadowOffsetX\", void 0), s([p.ObservableComponent.field], e.prototype, \"shadowOffsetY\", void 0), s([p.ObservableComponent.field], e.prototype, \"shadowColor\", void 0), s([p.ObservableComponent.field], e.prototype, \"zIndex\", void 0), s([p.ObservableComponent.field], e.prototype, \"hTextAlign\", void 0), s([p.ObservableComponent.field], e.prototype, \"vTextAlign\", void 0), s([p.ObservableComponent.field], e.prototype, \"width\", void 0), s([p.ObservableComponent.field], e.prototype, \"height\", void 0), s([p.ObservableComponent.field], e.prototype, \"paddingTop\", void 0), s([p.ObservableComponent.field], e.prototype, \"paddingRight\", void 0), s([p.ObservableComponent.field], e.prototype, \"paddingBottom\", void 0), s([p.ObservableComponent.field], e.prototype, \"paddingLeft\", void 0), s([p.ObservableComponent.field], e.prototype, \"isPickable\", void 0), s([p.ObservableComponent.field], e.prototype, \"billboard\", void 0), s([p.ObservableComponent.field], e.prototype, \"visible\", void 0), e = s([p.Component(\"engine.text\", a.TEXT_SHAPE)], e);\n  }(p.ObservableComponent);\n\n  e.TextShape = I, function (t) {\n    t[t.OPAQUE = 0] = \"OPAQUE\", t[t.ALPHA_TEST = 1] = \"ALPHA_TEST\", t[t.ALPHA_BLEND = 2] = \"ALPHA_BLEND\", t[t.ALPHA_TEST_AND_BLEND = 3] = \"ALPHA_TEST_AND_BLEND\", t[t.AUTO = 4] = \"AUTO\";\n  }(P = e.TransparencyMode || (e.TransparencyMode = {}));\n\n  var z = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.alphaTest = .5, e.castShadows = !0, e.transparencyMode = P.AUTO, e;\n    }\n\n    return r(e, t), s([p.ObservableComponent.field], e.prototype, \"alphaTest\", void 0), s([p.ObservableComponent.field], e.prototype, \"albedoColor\", void 0), s([p.ObservableComponent.field], e.prototype, \"emissiveColor\", void 0), s([p.ObservableComponent.field], e.prototype, \"metallic\", void 0), s([p.ObservableComponent.field], e.prototype, \"roughness\", void 0), s([p.ObservableComponent.field], e.prototype, \"ambientColor\", void 0), s([p.ObservableComponent.field], e.prototype, \"reflectionColor\", void 0), s([p.ObservableComponent.field], e.prototype, \"reflectivityColor\", void 0), s([p.ObservableComponent.field], e.prototype, \"directIntensity\", void 0), s([p.ObservableComponent.field], e.prototype, \"microSurface\", void 0), s([p.ObservableComponent.field], e.prototype, \"emissiveIntensity\", void 0), s([p.ObservableComponent.field], e.prototype, \"environmentIntensity\", void 0), s([p.ObservableComponent.field], e.prototype, \"specularIntensity\", void 0), s([p.ObservableComponent.component], e.prototype, \"albedoTexture\", void 0), s([p.ObservableComponent.component], e.prototype, \"alphaTexture\", void 0), s([p.ObservableComponent.component], e.prototype, \"emissiveTexture\", void 0), s([p.ObservableComponent.component], e.prototype, \"bumpTexture\", void 0), s([p.ObservableComponent.component], e.prototype, \"refractionTexture\", void 0), s([p.ObservableComponent.field], e.prototype, \"castShadows\", void 0), s([p.ObservableComponent.field], e.prototype, \"transparencyMode\", void 0), e = s([p.DisposableComponent(\"engine.material\", a.PBR_MATERIAL)], e);\n  }(p.ObservableComponent);\n\n  e.Material = z;\n\n  var M = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.alphaTest = .5, e.castShadows = !0, e;\n    }\n\n    return r(e, t), s([p.ObservableComponent.component], e.prototype, \"texture\", void 0), s([p.ObservableComponent.field], e.prototype, \"alphaTest\", void 0), s([p.ObservableComponent.field], e.prototype, \"castShadows\", void 0), e = s([p.DisposableComponent(\"engine.material\", a.BASIC_MATERIAL)], e);\n  }(p.ObservableComponent);\n\n  e.BasicMaterial = M;\n\n  var D = function (t) {\n    function e(e) {\n      var n = t.call(this) || this;\n      if (n.uuid = c.newId(\"UUID\"), !e || !(\"apply\" in e) || !(\"call\" in e)) throw new Error(\"Callback is not a function\");\n      return n.callback = e, n;\n    }\n\n    return r(e, t), e.uuidEvent = function (t, n) {\n      if (delete t[n]) {\n        var o = n + \"_\" + Math.random();\n        t[o] = void 0, Object.defineProperty(t, o, i(i({}, Object.getOwnPropertyDescriptor(t, o)), {\n          enumerable: !1\n        })), Object.defineProperty(t, n.toString(), {\n          get: function get() {\n            return this[o];\n          },\n          set: function set(t) {\n            var r = this[o];\n\n            if (t) {\n              if (!(t instanceof e)) throw new Error(\"value is not an OnUUIDEvent\");\n              this.data[n] = t.uuid;\n            } else this.data[n] = null;\n\n            if (this[o] = t, t !== r) {\n              this.dirty = !0;\n\n              for (var i = 0; i < this.subscriptions.length; i++) {\n                this.subscriptions[i](n, t, r);\n              }\n            }\n          },\n          enumerable: !0\n        });\n      }\n    }, e.prototype.toJSON = function () {\n      return {\n        uuid: this.uuid,\n        type: this.type\n      };\n    }, s([p.ObservableComponent.field], e.prototype, \"callback\", void 0), e;\n  }(p.ObservableComponent);\n\n  e.OnUUIDEvent = D;\n\n  var F = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.button = h.ActionButton.ANY, e.hoverText = \"Interact\", e.distance = 10, e.showFeedback = !0, e;\n    }\n\n    return r(e, t), e.prototype.toJSON = function () {\n      return {\n        uuid: this.uuid,\n        type: this.type,\n        button: this.button,\n        hoverText: this.hoverText,\n        distance: this.distance,\n        showFeedback: this.showFeedback\n      };\n    }, s([p.ObservableComponent.field], e.prototype, \"button\", void 0), s([p.ObservableComponent.field], e.prototype, \"hoverText\", void 0), s([p.ObservableComponent.field], e.prototype, \"distance\", void 0), s([p.ObservableComponent.field], e.prototype, \"showFeedback\", void 0), e;\n  }(D);\n\n  e.OnPointerUUIDEvent = F;\n\n  var U = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.type = \"onPointerLock\", e;\n    }\n\n    return r(e, t), s([p.ObservableComponent.readonly], e.prototype, \"type\", void 0), e = s([p.Component(\"engine.onPointerLock\", a.UUID_CALLBACK)], e);\n  }(D);\n\n  e.OnPointerLock = U;\n\n  var L = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.type = \"onAnimationEnd\", e;\n    }\n\n    return r(e, t), s([p.ObservableComponent.readonly], e.prototype, \"type\", void 0), e = s([p.Component(\"engine.onAnimationEnd\", a.UUID_CALLBACK)], e);\n  }(D);\n\n  e.OnAnimationEnd = L;\n\n  var N = function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return r(e, t), e = s([p.Component(\"engine.smartItem\", a.SMART_ITEM)], e);\n  }(p.ObservableComponent);\n\n  e.SmartItem = N;\n\n  var V = function (t) {\n    function e(e) {\n      var n = t.call(this) || this;\n      return n.url = e, n;\n    }\n\n    return r(e, t), s([p.ObservableComponent.readonly], e.prototype, \"url\", void 0), e = s([p.DisposableComponent(\"engine.VideoClip\", a.VIDEO_CLIP)], e);\n  }(p.ObservableComponent);\n\n  e.VideoClip = V;\n\n  var j = function (t) {\n    function e(e, n) {\n      var o = t.call(this) || this;\n      if (o.volume = 1, o.playbackRate = 1, o.loop = !1, o.seek = -1, o.playing = !1, !(e instanceof V)) throw new Error(\"Trying to create VideoTexture(VideoClip) with an invalid VideoClip\");\n      if (o.videoClipId = p.getComponentId(e), n) for (var r in n) {\n        o[r] = n[r];\n      }\n      return o;\n    }\n\n    return r(e, t), e.prototype.play = function () {\n      this.playing = !0;\n    }, e.prototype.pause = function () {\n      this.playing = !1;\n    }, e.prototype.reset = function () {\n      this.seekTime(0);\n    }, e.prototype.seekTime = function (t) {\n      this.seek = t, this.dirty = !0, this.data.nonce = Math.random();\n    }, e.prototype.toJSON = function () {\n      if (this.seek < 0) return t.prototype.toJSON.call(this);\n      var e = JSON.parse(JSON.stringify(t.prototype.toJSON.call(this)));\n      return this.seek = -1, e;\n    }, s([p.ObservableComponent.readonly], e.prototype, \"videoClipId\", void 0), s([p.ObservableComponent.readonly], e.prototype, \"samplingMode\", void 0), s([p.ObservableComponent.readonly], e.prototype, \"wrap\", void 0), s([p.ObservableComponent.field], e.prototype, \"volume\", void 0), s([p.ObservableComponent.field], e.prototype, \"playbackRate\", void 0), s([p.ObservableComponent.field], e.prototype, \"loop\", void 0), s([p.ObservableComponent.field], e.prototype, \"seek\", void 0), s([p.ObservableComponent.field], e.prototype, \"playing\", void 0), e = s([p.DisposableComponent(\"engine.VideoTexture\", a.VIDEO_TEXTURE)], e);\n  }(p.ObservableComponent);\n\n  e.VideoTexture = j;\n}, function (t, e, n) {\n  \"use strict\";\n\n  var o = this && this.__createBinding || (Object.create ? function (t, e, n, o) {\n    void 0 === o && (o = n), Object.defineProperty(t, o, {\n      enumerable: !0,\n      get: function get() {\n        return e[n];\n      }\n    });\n  } : function (t, e, n, o) {\n    void 0 === o && (o = n), t[o] = e[n];\n  }),\n      r = this && this.__exportStar || function (t, e) {\n    for (var n in t) {\n      \"default\" === n || Object.prototype.hasOwnProperty.call(e, n) || o(e, t, n);\n    }\n  };\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), r(n(2), e), r(n(9), e), r(n(22), e), r(n(23), e), r(n(36), e), r(n(37), e), r(n(38), e), r(n(24), e), r(n(39), e), r(n(40), e), r(n(11), e), r(n(41), e), r(n(42), e), r(n(25), e), r(n(10), e), r(n(6), e), r(n(43), e), r(n(15), e), r(n(3), e), r(n(21), e), r(n(5), e);\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Scalar = void 0;\n\n  var o = function () {\n    function t() {}\n\n    return t.WithinEpsilon = function (t, e, n) {\n      void 0 === n && (n = 1401298e-51);\n      var o = t - e;\n      return -n <= o && o <= n;\n    }, t.ToHex = function (t) {\n      var e = t.toString(16);\n      return t <= 15 ? (\"0\" + e).toUpperCase() : e.toUpperCase();\n    }, t.Sign = function (t) {\n      var e = +t;\n      return 0 === e || isNaN(e) ? e : e > 0 ? 1 : -1;\n    }, t.Clamp = function (t, e, n) {\n      return void 0 === e && (e = 0), void 0 === n && (n = 1), Math.min(n, Math.max(e, t));\n    }, t.Log2 = function (t) {\n      return Math.log(t) * Math.LOG2E;\n    }, t.Repeat = function (t, e) {\n      return t - Math.floor(t / e) * e;\n    }, t.Normalize = function (t, e, n) {\n      return (t - e) / (n - e);\n    }, t.Denormalize = function (t, e, n) {\n      return t * (n - e) + e;\n    }, t.DeltaAngle = function (e, n) {\n      var o = t.Repeat(n - e, 360);\n      return o > 180 && (o -= 360), o;\n    }, t.PingPong = function (e, n) {\n      var o = t.Repeat(e, 2 * n);\n      return n - Math.abs(o - n);\n    }, t.SmoothStep = function (e, n, o) {\n      var r = t.Clamp(o);\n      return n * (r = -2 * r * r * r + 3 * r * r) + e * (1 - r);\n    }, t.MoveTowards = function (e, n, o) {\n      return Math.abs(n - e) <= o ? n : e + t.Sign(n - e) * o;\n    }, t.MoveTowardsAngle = function (e, n, o) {\n      var r = t.DeltaAngle(e, n);\n      return -o < r && r < o ? n : t.MoveTowards(e, e + r, o);\n    }, t.Lerp = function (t, e, n) {\n      return t + (e - t) * n;\n    }, t.LerpAngle = function (e, n, o) {\n      var r = t.Repeat(n - e, 360);\n      return r > 180 && (r -= 360), e + r * t.Clamp(o);\n    }, t.InverseLerp = function (e, n, o) {\n      return e !== n ? t.Clamp((o - e) / (n - e)) : 0;\n    }, t.Hermite = function (t, e, n, o, r) {\n      var i = r * r,\n          s = r * i;\n      return t * (2 * s - 3 * i + 1) + n * (-2 * s + 3 * i) + e * (s - 2 * i + r) + o * (s - i);\n    }, t.RandomRange = function (t, e) {\n      return t === e ? t : Math.random() * (e - t) + t;\n    }, t.RangeToPercent = function (t, e, n) {\n      return (t - e) / (n - e);\n    }, t.PercentToRange = function (t, e, n) {\n      return (n - e) * t + e;\n    }, t.NormalizeRadians = function (e) {\n      return e - t.TwoPi * Math.floor((e + Math.PI) / t.TwoPi);\n    }, t.TwoPi = 2 * Math.PI, t;\n  }();\n\n  e.Scalar = o;\n}, function (t, e, n) {\n  \"use strict\";\n\n  var o = this && this.__decorate || function (t, e, n, o) {\n    var r,\n        i = arguments.length,\n        s = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) s = Reflect.decorate(t, e, n, o);else for (var a = t.length - 1; a >= 0; a--) {\n      (r = t[a]) && (s = (i < 3 ? r(s) : i > 3 ? r(e, n, s) : r(e, n)) || s);\n    }\n    return i > 3 && s && Object.defineProperty(e, n, s), s;\n  };\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.ParentChanged = e.ComponentAdded = e.ComponentRemoved = void 0;\n\n  var r = n(8),\n      i = function () {\n    function t(t, e, n) {\n      this.entity = t, this.componentName = e, this.component = n;\n    }\n\n    return t = o([r.EventConstructor()], t);\n  }();\n\n  e.ComponentRemoved = i;\n\n  var s = function () {\n    function t(t, e, n) {\n      this.entity = t, this.componentName = e, this.classId = n;\n    }\n\n    return t = o([r.EventConstructor()], t);\n  }();\n\n  e.ComponentAdded = s;\n\n  var a = function () {\n    function t(t, e) {\n      this.entity = t, this.parent = e;\n    }\n\n    return t = o([r.EventConstructor()], t);\n  }();\n\n  e.ParentChanged = a;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.EventConstructor = e.EventManager = void 0;\n  var o = n(1),\n      r = [];\n\n  function i(t) {\n    if (!(\"__event_name__\" in t) || \"string\" != typeof t.__event_name__) throw new Error(\"The EventConstructor is not registered\");\n    return t.__event_name__;\n  }\n\n  var s = function () {\n    function t() {\n      this.listeners = {};\n    }\n\n    return t.prototype.addListener = function (t, e, n) {\n      if (!t || \"function\" != typeof t) throw new Error(\"Invalid EventConstructor\");\n      var o = i(t),\n          r = this.listeners[o];\n      r || (r = this.listeners[o] = []);\n\n      for (var s = 0; s < r.length; s++) {\n        if (r[s].listener === e) throw new Error(\"The provided listener is already registered\");\n      }\n\n      return r.push({\n        listener: e,\n        fn: n\n      }), this;\n    }, t.prototype.removeListener = function (t, e) {\n      if (!e || \"function\" != typeof e) throw new Error(\"Invalid EventConstructor\");\n      var n = i(e),\n          o = this.listeners[n];\n      if (!o) return !1;\n\n      for (var r = 0; r < o.length; r++) {\n        if (o[r].listener === t) return o.splice(r, 1), !0;\n      }\n\n      return !1;\n    }, t.prototype.fireEvent = function (t) {\n      var e = i(t.constructor),\n          n = this.listeners[e];\n      if (n) for (var r = 0; r < n.length; r++) {\n        try {\n          var s = n[r];\n          s.fn.call(s.listener, t);\n        } catch (t) {\n          o.error(t);\n        }\n      }\n      return this;\n    }, t;\n  }();\n\n  e.EventManager = s, e.EventConstructor = function () {\n    var t = o.newId(\"EV\");\n    if (-1 !== r.indexOf(t)) throw new Error(\"The event name \" + t + \" is already taken\");\n    return r.push(t), function (e) {\n      return e.__event_name__ = t, e;\n    };\n  };\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.MathTmp = void 0;\n  var o = n(1),\n      r = n(3),\n      i = n(10),\n      s = n(11);\n  e.MathTmp = {\n    Vector3: o.buildArray(6, r.Vector3.Zero),\n    Matrix: o.buildArray(2, s.Matrix.Identity),\n    Quaternion: o.buildArray(3, i.Quaternion.Zero),\n    staticUp: r.Vector3.Up(),\n    tmpMatrix: s.Matrix.Zero()\n  };\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Quaternion = void 0;\n\n  var o = n(11),\n      r = n(3),\n      i = n(9),\n      s = n(2),\n      a = function () {\n    function t(t, e, n, o) {\n      void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === n && (n = 0), void 0 === o && (o = 1), this.x = t, this.y = e, this.z = n, this.w = o;\n    }\n\n    return t.FromRotationMatrix = function (e) {\n      var n = new t();\n      return t.FromRotationMatrixToRef(e, n), n;\n    }, t.FromRotationMatrixToRef = function (t, e) {\n      var n,\n          o = t.m,\n          r = o[0],\n          i = o[4],\n          s = o[8],\n          a = o[1],\n          p = o[5],\n          u = o[9],\n          l = o[2],\n          c = o[6],\n          h = o[10],\n          d = r + p + h;\n      d > 0 ? (n = .5 / Math.sqrt(d + 1), e.w = .25 / n, e.x = (c - u) * n, e.y = (s - l) * n, e.z = (a - i) * n) : r > p && r > h ? (n = 2 * Math.sqrt(1 + r - p - h), e.w = (c - u) / n, e.x = .25 * n, e.y = (i + a) / n, e.z = (s + l) / n) : p > h ? (n = 2 * Math.sqrt(1 + p - r - h), e.w = (s - l) / n, e.x = (i + a) / n, e.y = .25 * n, e.z = (u + c) / n) : (n = 2 * Math.sqrt(1 + h - r - p), e.w = (a - i) / n, e.x = (s + l) / n, e.y = (u + c) / n, e.z = .25 * n);\n    }, t.Dot = function (t, e) {\n      return t.x * e.x + t.y * e.y + t.z * e.z + t.w * e.w;\n    }, t.AreClose = function (e, n) {\n      return t.Dot(e, n) >= 0;\n    }, t.Zero = function () {\n      return new t(0, 0, 0, 0);\n    }, t.Inverse = function (e) {\n      return new t(-e.x, -e.y, -e.z, e.w);\n    }, t.IsIdentity = function (t) {\n      return t && 0 === t.x && 0 === t.y && 0 === t.z && 1 === t.w;\n    }, t.RotationAxis = function (e, n) {\n      var o = n * s.DEG2RAD;\n      return t.RotationAxisToRef(e, o, new t());\n    }, t.RotationAxisToRef = function (t, e, n) {\n      var o = e * s.DEG2RAD,\n          r = Math.sin(o / 2);\n      return t.normalize(), n.w = Math.cos(o / 2), n.x = t.x * r, n.y = t.y * r, n.z = t.z * r, n;\n    }, t.FromArray = function (e, n) {\n      return void 0 === n && (n = 0), new t(e[n], e[n + 1], e[n + 2], e[n + 3]);\n    }, t.FromEulerAnglesRef = function (e, n, o, r) {\n      return t.RotationYawPitchRollToRef(n * s.DEG2RAD, e * s.DEG2RAD, o * s.DEG2RAD, r);\n    }, t.RotationYawPitchRoll = function (e, n, o) {\n      var r = new t();\n      return t.RotationYawPitchRollToRef(e, n, o, r), r;\n    }, t.RotationYawPitchRollToRef = function (t, e, n, o) {\n      var r = .5 * n,\n          i = .5 * e,\n          s = .5 * t,\n          a = Math.cos(i),\n          p = Math.cos(s),\n          u = Math.cos(r),\n          l = Math.sin(i),\n          c = Math.sin(s),\n          h = Math.sin(r);\n      o.x = l * p * u + a * c * h, o.y = a * c * u - l * p * h, o.z = a * p * h + l * c * u, o.w = a * p * u - l * c * h;\n    }, t.RotationAlphaBetaGamma = function (e, n, o) {\n      var r = new t();\n      return t.RotationAlphaBetaGammaToRef(e, n, o, r), r;\n    }, t.RotationAlphaBetaGammaToRef = function (t, e, n, o) {\n      var r = .5 * (n + t),\n          i = .5 * (n - t),\n          s = .5 * e;\n      o.x = Math.cos(i) * Math.sin(s), o.y = Math.sin(i) * Math.sin(s), o.z = Math.sin(r) * Math.cos(s), o.w = Math.cos(r) * Math.cos(s);\n    }, t.RotationQuaternionFromAxis = function (e, n, o) {\n      var r = new t(0, 0, 0, 0);\n      return t.RotationQuaternionFromAxisToRef(e, n, o, r), r;\n    }, t.RotationQuaternionFromAxisToRef = function (e, n, r, s) {\n      var a = i.MathTmp.Matrix[0];\n      o.Matrix.FromXYZAxesToRef(e.normalize(), n.normalize(), r.normalize(), a), t.FromRotationMatrixToRef(a, s);\n    }, t.Slerp = function (e, n, o) {\n      var r = t.Identity;\n      return t.SlerpToRef(e, n, o, r), r;\n    }, t.SlerpToRef = function (t, e, n, o) {\n      var r,\n          i,\n          s = t.x * e.x + t.y * e.y + t.z * e.z + t.w * e.w,\n          a = !1;\n      if (s < 0 && (a = !0, s = -s), s > .999999) i = 1 - n, r = a ? -n : n;else {\n        var p = Math.acos(s),\n            u = 1 / Math.sin(p);\n        i = Math.sin((1 - n) * p) * u, r = a ? -Math.sin(n * p) * u : Math.sin(n * p) * u;\n      }\n      o.x = i * t.x + r * e.x, o.y = i * t.y + r * e.y, o.z = i * t.z + r * e.z, o.w = i * t.w + r * e.w;\n    }, t.Hermite = function (e, n, o, r, i) {\n      var s = i * i,\n          a = i * s,\n          p = 2 * a - 3 * s + 1,\n          u = -2 * a + 3 * s,\n          l = a - 2 * s + i,\n          c = a - s;\n      return new t(e.x * p + o.x * u + n.x * l + r.x * c, e.y * p + o.y * u + n.y * l + r.y * c, e.z * p + o.z * u + n.z * l + r.z * c, e.w * p + o.w * u + n.w * l + r.w * c);\n    }, Object.defineProperty(t, \"Identity\", {\n      get: function get() {\n        return new t(0, 0, 0, 1);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), t.Angle = function (e, n) {\n      var o = t.Dot(e, n);\n      return 2 * Math.acos(Math.min(Math.abs(o), 1)) * s.RAD2DEG;\n    }, t.Euler = function (e, n, o) {\n      return t.RotationYawPitchRoll(n * s.DEG2RAD, e * s.DEG2RAD, o * s.DEG2RAD);\n    }, t.LookRotation = function (e, n) {\n      void 0 === n && (n = i.MathTmp.staticUp);\n      var o = r.Vector3.Normalize(e),\n          s = r.Vector3.Normalize(r.Vector3.Cross(n, o)),\n          a = r.Vector3.Cross(o, s),\n          p = s.x,\n          u = s.y,\n          l = s.z,\n          c = a.x,\n          h = a.y,\n          d = a.z,\n          f = o.x,\n          y = o.y,\n          v = o.z,\n          m = p + h + v,\n          b = new t();\n\n      if (m > 0) {\n        var g = Math.sqrt(m + 1);\n        return b.w = .5 * g, g = .5 / g, b.x = (d - y) * g, b.y = (f - l) * g, b.z = (u - c) * g, b;\n      }\n\n      if (p >= h && p >= v) {\n        var _ = Math.sqrt(1 + p - h - v),\n            C = .5 / _;\n\n        return b.x = .5 * _, b.y = (u + c) * C, b.z = (l + f) * C, b.w = (d - y) * C, b;\n      }\n\n      if (h > v) {\n        var O = Math.sqrt(1 + h - p - v),\n            x = .5 / O;\n        return b.x = (c + u) * x, b.y = .5 * O, b.z = (y + d) * x, b.w = (f - l) * x, b;\n      }\n\n      var w = Math.sqrt(1 + v - p - h),\n          T = .5 / w;\n      return b.x = (f + l) * T, b.y = (y + d) * T, b.z = .5 * w, b.w = (u - c) * T, b;\n    }, t.RotateTowards = function (e, n, o) {\n      var r = t.Angle(e, n);\n      if (0 === r) return n;\n      var i = Math.min(1, o / r);\n      return t.Slerp(e, n, i);\n    }, t.FromToRotation = function (e, n) {\n      var o = new t(),\n          i = e.normalize(),\n          a = n.normalize(),\n          p = r.Vector3.Dot(i, a);\n\n      if (p > -1 + s.Epsilon) {\n        var u = Math.sqrt(2 * (1 + p)),\n            l = 1 / u,\n            c = r.Vector3.Cross(i, a).scaleInPlace(l);\n        o.set(c.x, c.y, c.z, .5 * u);\n      } else {\n        if (p > 1 - s.Epsilon) return new t(0, 0, 0, 1);\n        var h = r.Vector3.Cross(r.Vector3.Right(), i);\n        h.lengthSquared() < s.Epsilon && (h = r.Vector3.Cross(r.Vector3.Forward(), i)), o.set(h.x, h.y, h.z, 0);\n      }\n\n      return o.normalize();\n    }, Object.defineProperty(t.prototype, \"normalized\", {\n      get: function get() {\n        return this.normalize();\n      },\n      enumerable: !1,\n      configurable: !0\n    }), t.prototype.setFromToRotation = function (e, n, r) {\n      void 0 === r && (r = i.MathTmp.staticUp), i.MathTmp.tmpMatrix = o.Matrix.Zero(), o.Matrix.LookAtLHToRef(e, n, r, i.MathTmp.tmpMatrix), i.MathTmp.tmpMatrix.invert(), t.FromRotationMatrixToRef(i.MathTmp.tmpMatrix, this);\n    }, Object.defineProperty(t.prototype, \"eulerAngles\", {\n      get: function get() {\n        var t = new r.Vector3(),\n            e = new o.Matrix();\n        this.toRotationMatrix(e);\n        var n = o.Matrix.GetAsMatrix3x3(e);\n        return t.y = s.RAD2DEG * Math.asin(Math.max(-1, Math.min(1, n[6]))), Math.abs(n[6]) < .99999 ? (t.x = s.RAD2DEG * Math.atan2(-n[7], n[8]), t.z = s.RAD2DEG * Math.atan2(-n[3], n[0])) : (t.x = s.RAD2DEG * Math.atan2(n[5], n[4]), t.z = 0), t;\n      },\n      set: function set(t) {\n        this.setEuler(t.x, t.y, t.z);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), t.prototype.toString = function () {\n      return \"(\" + this.x + \", \" + this.y + \", \" + this.z + \", \" + this.w + \")\";\n    }, Object.defineProperty(t.prototype, \"length\", {\n      get: function get() {\n        return Math.sqrt(this.lengthSquared);\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"lengthSquared\", {\n      get: function get() {\n        return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), t.prototype.getClassName = function () {\n      return \"Quaternion\";\n    }, t.prototype.getHashCode = function () {\n      var t = this.x || 0;\n      return t = 397 * (t = 397 * (t = 397 * t ^ (this.y || 0)) ^ (this.z || 0)) ^ (this.w || 0);\n    }, t.prototype.asArray = function () {\n      return [this.x, this.y, this.z, this.w];\n    }, t.prototype.equals = function (t) {\n      return t && this.x === t.x && this.y === t.y && this.z === t.z && this.w === t.w;\n    }, t.prototype.clone = function () {\n      return new t(this.x, this.y, this.z, this.w);\n    }, t.prototype.copyFrom = function (t) {\n      return this.x = t.x, this.y = t.y, this.z = t.z, this.w = t.w, this;\n    }, t.prototype.copyFromFloats = function (t, e, n, o) {\n      return this.x = t, this.y = e, this.z = n, this.w = o, this;\n    }, t.prototype.set = function (t, e, n, o) {\n      return this.copyFromFloats(t, e, n, o);\n    }, t.prototype.setEuler = function (e, n, o) {\n      return t.RotationYawPitchRollToRef(n * s.DEG2RAD, e * s.DEG2RAD, o * s.DEG2RAD, this), this;\n    }, t.prototype.add = function (e) {\n      return new t(this.x + e.x, this.y + e.y, this.z + e.z, this.w + e.w);\n    }, t.prototype.addInPlace = function (t) {\n      return this.x += t.x, this.y += t.y, this.z += t.z, this.w += t.w, this;\n    }, t.prototype.subtract = function (e) {\n      return new t(this.x - e.x, this.y - e.y, this.z - e.z, this.w - e.w);\n    }, t.prototype.scale = function (e) {\n      return new t(this.x * e, this.y * e, this.z * e, this.w * e);\n    }, t.prototype.scaleToRef = function (t, e) {\n      return e.x = this.x * t, e.y = this.y * t, e.z = this.z * t, e.w = this.w * t, this;\n    }, t.prototype.scaleInPlace = function (t) {\n      return this.x *= t, this.y *= t, this.z *= t, this.w *= t, this;\n    }, t.prototype.scaleAndAddToRef = function (t, e) {\n      return e.x += this.x * t, e.y += this.y * t, e.z += this.z * t, e.w += this.w * t, this;\n    }, t.prototype.multiply = function (e) {\n      var n = new t(0, 0, 0, 1);\n      return this.multiplyToRef(e, n), n;\n    }, t.prototype.multiplyToRef = function (t, e) {\n      var n = this.x * t.w + this.y * t.z - this.z * t.y + this.w * t.x,\n          o = -this.x * t.z + this.y * t.w + this.z * t.x + this.w * t.y,\n          r = this.x * t.y - this.y * t.x + this.z * t.w + this.w * t.z,\n          i = -this.x * t.x - this.y * t.y - this.z * t.z + this.w * t.w;\n      return e.copyFromFloats(n, o, r, i), this;\n    }, t.prototype.multiplyInPlace = function (t) {\n      return this.multiplyToRef(t, this), this;\n    }, t.prototype.conjugateToRef = function (t) {\n      return t.copyFromFloats(-this.x, -this.y, -this.z, this.w), this;\n    }, t.prototype.conjugateInPlace = function () {\n      return this.x *= -1, this.y *= -1, this.z *= -1, this;\n    }, t.prototype.conjugate = function () {\n      return new t(-this.x, -this.y, -this.z, this.w);\n    }, t.prototype.normalize = function () {\n      var t = 1 / this.length;\n      return this.x *= t, this.y *= t, this.z *= t, this.w *= t, this;\n    }, t.prototype.angleAxis = function (e, n) {\n      if (0 === n.lengthSquared()) return t.Identity;\n      var o = t.Identity,\n          r = e * s.DEG2RAD;\n      r *= .5;\n      var i = n.normalize();\n      return i = n.scaleInPlace(Math.sin(r)), o.x = i.x, o.y = i.y, o.z = i.z, o.w = Math.cos(r), o.normalize();\n    }, t.prototype.toRotationMatrix = function (t) {\n      return o.Matrix.FromQuaternionToRef(this, t), this;\n    }, t.prototype.fromRotationMatrix = function (e) {\n      return t.FromRotationMatrixToRef(e, this), this;\n    }, t;\n  }();\n\n  e.Quaternion = a;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Matrix = void 0;\n\n  var o = n(3),\n      r = n(10),\n      i = n(9),\n      s = n(21),\n      a = function () {\n    function t() {\n      this._isIdentity = !1, this._isIdentityDirty = !0, this._isIdentity3x2 = !0, this._isIdentity3x2Dirty = !0, this._m = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], this._updateIdentityStatus(!1);\n    }\n\n    return Object.defineProperty(t.prototype, \"m\", {\n      get: function get() {\n        return this._m;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(t, \"IdentityReadOnly\", {\n      get: function get() {\n        return t._identityReadOnly;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), t.FromArray = function (e, n) {\n      void 0 === n && (n = 0);\n      var o = new t();\n      return t.FromArrayToRef(e, n, o), o;\n    }, t.FromArrayToRef = function (t, e, n) {\n      for (var o = 0; o < 16; o++) {\n        n._m[o] = t[o + e];\n      }\n\n      n._markAsUpdated();\n    }, t.FromFloatArrayToRefScaled = function (t, e, n, o) {\n      for (var r = 0; r < 16; r++) {\n        o._m[r] = t[r + e] * n;\n      }\n\n      o._markAsUpdated();\n    }, t.FromValuesToRef = function (t, e, n, o, r, i, s, a, p, u, l, c, h, d, f, y, v) {\n      var m = v._m;\n      m[0] = t, m[1] = e, m[2] = n, m[3] = o, m[4] = r, m[5] = i, m[6] = s, m[7] = a, m[8] = p, m[9] = u, m[10] = l, m[11] = c, m[12] = h, m[13] = d, m[14] = f, m[15] = y, v._markAsUpdated();\n    }, t.FromValues = function (e, n, o, r, i, s, a, p, u, l, c, h, d, f, y, v) {\n      var m = new t(),\n          b = m._m;\n      return b[0] = e, b[1] = n, b[2] = o, b[3] = r, b[4] = i, b[5] = s, b[6] = a, b[7] = p, b[8] = u, b[9] = l, b[10] = c, b[11] = h, b[12] = d, b[13] = f, b[14] = y, b[15] = v, m._markAsUpdated(), m;\n    }, t.Compose = function (e, n, o) {\n      var r = new t();\n      return t.ComposeToRef(e, n, o, r), r;\n    }, t.ComposeToRef = function (e, n, o, r) {\n      t.ScalingToRef(e.x, e.y, e.z, i.MathTmp.Matrix[1]), n.toRotationMatrix(i.MathTmp.Matrix[0]), i.MathTmp.Matrix[1].multiplyToRef(i.MathTmp.Matrix[0], r), r.setTranslation(o);\n    }, t.Identity = function () {\n      var e = t.FromValues(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n      return e._updateIdentityStatus(!0), e;\n    }, t.IdentityToRef = function (e) {\n      t.FromValuesToRef(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, e), e._updateIdentityStatus(!0);\n    }, t.Zero = function () {\n      var e = t.FromValues(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n      return e._updateIdentityStatus(!1), e;\n    }, t.RotationX = function (e) {\n      var n = new t();\n      return t.RotationXToRef(e, n), n;\n    }, t.Invert = function (e) {\n      var n = new t();\n      return e.invertToRef(n), n;\n    }, t.RotationXToRef = function (e, n) {\n      var o = Math.sin(e),\n          r = Math.cos(e);\n      t.FromValuesToRef(1, 0, 0, 0, 0, r, o, 0, 0, -o, r, 0, 0, 0, 0, 1, n), n._updateIdentityStatus(1 === r && 0 === o);\n    }, t.RotationY = function (e) {\n      var n = new t();\n      return t.RotationYToRef(e, n), n;\n    }, t.RotationYToRef = function (e, n) {\n      var o = Math.sin(e),\n          r = Math.cos(e);\n      t.FromValuesToRef(r, 0, -o, 0, 0, 1, 0, 0, o, 0, r, 0, 0, 0, 0, 1, n), n._updateIdentityStatus(1 === r && 0 === o);\n    }, t.RotationZ = function (e) {\n      var n = new t();\n      return t.RotationZToRef(e, n), n;\n    }, t.RotationZToRef = function (e, n) {\n      var o = Math.sin(e),\n          r = Math.cos(e);\n      t.FromValuesToRef(r, o, 0, 0, -o, r, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, n), n._updateIdentityStatus(1 === r && 0 === o);\n    }, t.RotationAxis = function (e, n) {\n      var o = new t();\n      return t.RotationAxisToRef(e, n, o), o;\n    }, t.RotationAxisToRef = function (t, e, n) {\n      var o = Math.sin(-e),\n          r = Math.cos(-e),\n          i = 1 - r;\n      t.normalize();\n      var s = n._m;\n      s[0] = t.x * t.x * i + r, s[1] = t.x * t.y * i - t.z * o, s[2] = t.x * t.z * i + t.y * o, s[3] = 0, s[4] = t.y * t.x * i + t.z * o, s[5] = t.y * t.y * i + r, s[6] = t.y * t.z * i - t.x * o, s[7] = 0, s[8] = t.z * t.x * i - t.y * o, s[9] = t.z * t.y * i + t.x * o, s[10] = t.z * t.z * i + r, s[11] = 0, s[12] = 0, s[13] = 0, s[14] = 0, s[15] = 1, n._markAsUpdated();\n    }, t.RotationYawPitchRoll = function (e, n, o) {\n      var r = new t();\n      return t.RotationYawPitchRollToRef(e, n, o, r), r;\n    }, t.RotationYawPitchRollToRef = function (t, e, n, o) {\n      r.Quaternion.RotationYawPitchRollToRef(t, e, n, i.MathTmp.Quaternion[0]), i.MathTmp.Quaternion[0].toRotationMatrix(o);\n    }, t.Scaling = function (e, n, o) {\n      var r = new t();\n      return t.ScalingToRef(e, n, o, r), r;\n    }, t.ScalingToRef = function (e, n, o, r) {\n      t.FromValuesToRef(e, 0, 0, 0, 0, n, 0, 0, 0, 0, o, 0, 0, 0, 0, 1, r), r._updateIdentityStatus(1 === e && 1 === n && 1 === o);\n    }, t.Translation = function (e, n, o) {\n      var r = new t();\n      return t.TranslationToRef(e, n, o, r), r;\n    }, t.TranslationToRef = function (e, n, o, r) {\n      t.FromValuesToRef(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, e, n, o, 1, r), r._updateIdentityStatus(0 === e && 0 === n && 0 === o);\n    }, t.Lerp = function (e, n, o) {\n      var r = new t();\n      return t.LerpToRef(e, n, o, r), r;\n    }, t.LerpToRef = function (t, e, n, o) {\n      for (var r = 0; r < 16; r++) {\n        o._m[r] = t._m[r] * (1 - n) + e._m[r] * n;\n      }\n\n      o._markAsUpdated();\n    }, t.DecomposeLerp = function (e, n, o) {\n      var r = new t();\n      return t.DecomposeLerpToRef(e, n, o, r), r;\n    }, t.DecomposeLerpToRef = function (e, n, s, a) {\n      var p = i.MathTmp.Vector3[0],\n          u = i.MathTmp.Quaternion[0],\n          l = i.MathTmp.Vector3[1];\n      e.decompose(p, u, l);\n      var c = i.MathTmp.Vector3[2],\n          h = i.MathTmp.Quaternion[1],\n          d = i.MathTmp.Vector3[3];\n      n.decompose(c, h, d);\n      var f = i.MathTmp.Vector3[4];\n      o.Vector3.LerpToRef(p, c, s, f);\n      var y = i.MathTmp.Quaternion[2];\n      r.Quaternion.SlerpToRef(u, h, s, y);\n      var v = i.MathTmp.Vector3[5];\n      o.Vector3.LerpToRef(l, d, s, v), t.ComposeToRef(f, y, v, a);\n    }, t.LookAtLH = function (e, n, o) {\n      var r = new t();\n      return t.LookAtLHToRef(e, n, o, r), r;\n    }, t.LookAtLHToRef = function (e, n, r, s) {\n      var a = i.MathTmp.Vector3[0],\n          p = i.MathTmp.Vector3[1],\n          u = i.MathTmp.Vector3[2];\n      n.subtractToRef(e, u), u.normalize(), o.Vector3.CrossToRef(r, u, a);\n      var l = a.lengthSquared();\n      0 === l ? a.x = 1 : a.normalizeFromLength(Math.sqrt(l)), o.Vector3.CrossToRef(u, a, p), p.normalize();\n      var c = -o.Vector3.Dot(a, e),\n          h = -o.Vector3.Dot(p, e),\n          d = -o.Vector3.Dot(u, e);\n      t.FromValuesToRef(a.x, p.x, u.x, 0, a.y, p.y, u.y, 0, a.z, p.z, u.z, 0, c, h, d, 1, s);\n    }, t.LookAtRH = function (e, n, o) {\n      var r = new t();\n      return t.LookAtRHToRef(e, n, o, r), r;\n    }, t.LookAtRHToRef = function (e, n, r, s) {\n      var a = i.MathTmp.Vector3[0],\n          p = i.MathTmp.Vector3[1],\n          u = i.MathTmp.Vector3[2];\n      e.subtractToRef(n, u), u.normalize(), o.Vector3.CrossToRef(r, u, a);\n      var l = a.lengthSquared();\n      0 === l ? a.x = 1 : a.normalizeFromLength(Math.sqrt(l)), o.Vector3.CrossToRef(u, a, p), p.normalize();\n      var c = -o.Vector3.Dot(a, e),\n          h = -o.Vector3.Dot(p, e),\n          d = -o.Vector3.Dot(u, e);\n      t.FromValuesToRef(a.x, p.x, u.x, 0, a.y, p.y, u.y, 0, a.z, p.z, u.z, 0, c, h, d, 1, s);\n    }, t.OrthoLH = function (e, n, o, r) {\n      var i = new t();\n      return t.OrthoLHToRef(e, n, o, r, i), i;\n    }, t.OrthoLHToRef = function (e, n, o, r, i) {\n      var s = 2 / e,\n          a = 2 / n,\n          p = 2 / (r - o),\n          u = -(r + o) / (r - o);\n      t.FromValuesToRef(s, 0, 0, 0, 0, a, 0, 0, 0, 0, p, 0, 0, 0, u, 1, i), i._updateIdentityStatus(1 === s && 1 === a && 1 === p && 0 === u);\n    }, t.OrthoOffCenterLH = function (e, n, o, r, i, s) {\n      var a = new t();\n      return t.OrthoOffCenterLHToRef(e, n, o, r, i, s, a), a;\n    }, t.OrthoOffCenterLHToRef = function (e, n, o, r, i, s, a) {\n      var p = 2 / (n - e),\n          u = 2 / (r - o),\n          l = 2 / (s - i),\n          c = -(s + i) / (s - i),\n          h = (e + n) / (e - n),\n          d = (r + o) / (o - r);\n      t.FromValuesToRef(p, 0, 0, 0, 0, u, 0, 0, 0, 0, l, 0, h, d, c, 1, a), a._markAsUpdated();\n    }, t.OrthoOffCenterRH = function (e, n, o, r, i, s) {\n      var a = new t();\n      return t.OrthoOffCenterRHToRef(e, n, o, r, i, s, a), a;\n    }, t.OrthoOffCenterRHToRef = function (e, n, o, r, i, s, a) {\n      t.OrthoOffCenterLHToRef(e, n, o, r, i, s, a), a._m[10] *= -1;\n    }, t.PerspectiveLH = function (e, n, o, r) {\n      var i = new t(),\n          s = 2 * o / e,\n          a = 2 * o / n,\n          p = (r + o) / (r - o),\n          u = -2 * r * o / (r - o);\n      return t.FromValuesToRef(s, 0, 0, 0, 0, a, 0, 0, 0, 0, p, 1, 0, 0, u, 0, i), i._updateIdentityStatus(!1), i;\n    }, t.PerspectiveFovLH = function (e, n, o, r) {\n      var i = new t();\n      return t.PerspectiveFovLHToRef(e, n, o, r, i), i;\n    }, t.PerspectiveFovLHToRef = function (e, n, o, r, i, s) {\n      void 0 === s && (s = !0);\n      var a = o,\n          p = r,\n          u = 1 / Math.tan(.5 * e),\n          l = s ? u / n : u,\n          c = s ? u : u * n,\n          h = (p + a) / (p - a),\n          d = -2 * p * a / (p - a);\n      t.FromValuesToRef(l, 0, 0, 0, 0, c, 0, 0, 0, 0, h, 1, 0, 0, d, 0, i), i._updateIdentityStatus(!1);\n    }, t.PerspectiveFovRH = function (e, n, o, r) {\n      var i = new t();\n      return t.PerspectiveFovRHToRef(e, n, o, r, i), i;\n    }, t.PerspectiveFovRHToRef = function (e, n, o, r, i, s) {\n      void 0 === s && (s = !0);\n      var a = o,\n          p = r,\n          u = 1 / Math.tan(.5 * e),\n          l = s ? u / n : u,\n          c = s ? u : u * n,\n          h = -(p + a) / (p - a),\n          d = -2 * p * a / (p - a);\n      t.FromValuesToRef(l, 0, 0, 0, 0, c, 0, 0, 0, 0, h, -1, 0, 0, d, 0, i), i._updateIdentityStatus(!1);\n    }, t.PerspectiveFovWebVRToRef = function (t, e, n, o, r) {\n      void 0 === r && (r = !1);\n      var i = r ? -1 : 1,\n          s = Math.tan(t.upDegrees * Math.PI / 180),\n          a = Math.tan(t.downDegrees * Math.PI / 180),\n          p = Math.tan(t.leftDegrees * Math.PI / 180),\n          u = Math.tan(t.rightDegrees * Math.PI / 180),\n          l = 2 / (p + u),\n          c = 2 / (s + a),\n          h = o._m;\n      h[0] = l, h[1] = h[2] = h[3] = h[4] = 0, h[5] = c, h[6] = h[7] = 0, h[8] = (p - u) * l * .5, h[9] = -(s - a) * c * .5, h[10] = -n / (e - n), h[11] = 1 * i, h[12] = h[13] = h[15] = 0, h[14] = -2 * n * e / (n - e), o._markAsUpdated();\n    }, t.GetAsMatrix2x2 = function (t) {\n      return [t._m[0], t._m[1], t._m[4], t._m[5]];\n    }, t.GetAsMatrix3x3 = function (t) {\n      return [t._m[0], t._m[1], t._m[2], t._m[4], t._m[5], t._m[6], t._m[8], t._m[9], t._m[10]];\n    }, t.Transpose = function (e) {\n      var n = new t();\n      return t.TransposeToRef(e, n), n;\n    }, t.TransposeToRef = function (t, e) {\n      var n = e._m,\n          o = t._m;\n      n[0] = o[0], n[1] = o[4], n[2] = o[8], n[3] = o[12], n[4] = o[1], n[5] = o[5], n[6] = o[9], n[7] = o[13], n[8] = o[2], n[9] = o[6], n[10] = o[10], n[11] = o[14], n[12] = o[3], n[13] = o[7], n[14] = o[11], n[15] = o[15], e._updateIdentityStatus(t._isIdentity, t._isIdentityDirty);\n    }, t.Reflection = function (e) {\n      var n = new t();\n      return t.ReflectionToRef(e, n), n;\n    }, t.ReflectionToRef = function (e, n) {\n      e.normalize();\n      var o = e.normal.x,\n          r = e.normal.y,\n          i = e.normal.z,\n          s = -2 * o,\n          a = -2 * r,\n          p = -2 * i;\n      t.FromValuesToRef(s * o + 1, a * o, p * o, 0, s * r, a * r + 1, p * r, 0, s * i, a * i, p * i + 1, 0, s * e.d, a * e.d, p * e.d, 1, n);\n    }, t.FromXYZAxesToRef = function (e, n, o, r) {\n      t.FromValuesToRef(e.x, e.y, e.z, 0, n.x, n.y, n.z, 0, o.x, o.y, o.z, 0, 0, 0, 0, 1, r);\n    }, t.FromQuaternionToRef = function (t, e) {\n      var n = t.x * t.x,\n          o = t.y * t.y,\n          r = t.z * t.z,\n          i = t.x * t.y,\n          s = t.z * t.w,\n          a = t.z * t.x,\n          p = t.y * t.w,\n          u = t.y * t.z,\n          l = t.x * t.w;\n      e._m[0] = 1 - 2 * (o + r), e._m[1] = 2 * (i + s), e._m[2] = 2 * (a - p), e._m[3] = 0, e._m[4] = 2 * (i - s), e._m[5] = 1 - 2 * (r + n), e._m[6] = 2 * (u + l), e._m[7] = 0, e._m[8] = 2 * (a + p), e._m[9] = 2 * (u - l), e._m[10] = 1 - 2 * (o + n), e._m[11] = 0, e._m[12] = 0, e._m[13] = 0, e._m[14] = 0, e._m[15] = 1, e._markAsUpdated();\n    }, t.prototype._markAsUpdated = function () {\n      this.updateFlag = t._updateFlagSeed++, this._isIdentity = !1, this._isIdentity3x2 = !1, this._isIdentityDirty = !0, this._isIdentity3x2Dirty = !0;\n    }, t.prototype.isIdentity = function () {\n      if (this._isIdentityDirty) {\n        this._isIdentityDirty = !1;\n        var t = this._m;\n        this._isIdentity = 1 === t[0] && 0 === t[1] && 0 === t[2] && 0 === t[3] && 0 === t[4] && 1 === t[5] && 0 === t[6] && 0 === t[7] && 0 === t[8] && 0 === t[9] && 1 === t[10] && 0 === t[11] && 0 === t[12] && 0 === t[13] && 0 === t[14] && 1 === t[15];\n      }\n\n      return this._isIdentity;\n    }, t.prototype.isIdentityAs3x2 = function () {\n      return this._isIdentity3x2Dirty && (this._isIdentity3x2Dirty = !1, 1 !== this._m[0] || 1 !== this._m[5] || 1 !== this._m[15] || 0 !== this._m[1] || 0 !== this._m[2] || 0 !== this._m[3] || 0 !== this._m[4] || 0 !== this._m[6] || 0 !== this._m[7] || 0 !== this._m[8] || 0 !== this._m[9] || 0 !== this._m[10] || 0 !== this._m[11] || 0 !== this._m[12] || 0 !== this._m[13] || 0 !== this._m[14] ? this._isIdentity3x2 = !1 : this._isIdentity3x2 = !0), this._isIdentity3x2;\n    }, t.prototype.determinant = function () {\n      if (!0 === this._isIdentity) return 1;\n\n      var t = this._m,\n          e = t[0],\n          n = t[1],\n          o = t[2],\n          r = t[3],\n          i = t[4],\n          s = t[5],\n          a = t[6],\n          p = t[7],\n          u = t[8],\n          l = t[9],\n          c = t[10],\n          h = t[11],\n          d = t[12],\n          f = t[13],\n          y = t[14],\n          v = t[15],\n          m = c * v - y * h,\n          b = l * v - f * h,\n          g = l * y - f * c,\n          _ = u * v - d * h,\n          C = u * y - c * d,\n          O = u * f - d * l;\n\n      return e * +(s * m - a * b + p * g) + n * -(i * m - a * _ + p * C) + o * +(i * b - s * _ + p * O) + r * -(i * g - s * C + a * O);\n    }, t.prototype.toArray = function () {\n      return this._m;\n    }, t.prototype.asArray = function () {\n      return this._m;\n    }, t.prototype.invert = function () {\n      return this.invertToRef(this), this;\n    }, t.prototype.reset = function () {\n      return t.FromValuesToRef(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, this), this._updateIdentityStatus(!1), this;\n    }, t.prototype.add = function (e) {\n      var n = new t();\n      return this.addToRef(e, n), n;\n    }, t.prototype.addToRef = function (t, e) {\n      for (var n = 0; n < 16; n++) {\n        e._m[n] = this._m[n] + t._m[n];\n      }\n\n      return e._markAsUpdated(), this;\n    }, t.prototype.addToSelf = function (t) {\n      for (var e = 0; e < 16; e++) {\n        this._m[e] += t._m[e];\n      }\n\n      return this._markAsUpdated(), this;\n    }, t.prototype.invertToRef = function (e) {\n      if (!0 === this._isIdentity) return t.IdentityToRef(e), this;\n\n      var n = this._m,\n          o = n[0],\n          r = n[1],\n          i = n[2],\n          s = n[3],\n          a = n[4],\n          p = n[5],\n          u = n[6],\n          l = n[7],\n          c = n[8],\n          h = n[9],\n          d = n[10],\n          f = n[11],\n          y = n[12],\n          v = n[13],\n          m = n[14],\n          b = n[15],\n          g = d * b - m * f,\n          _ = h * b - v * f,\n          C = h * m - v * d,\n          O = c * b - y * f,\n          x = c * m - d * y,\n          w = c * v - y * h,\n          T = +(p * g - u * _ + l * C),\n          R = -(a * g - u * O + l * x),\n          A = +(a * _ - p * O + l * w),\n          E = -(a * C - p * x + u * w),\n          S = o * T + r * R + i * A + s * E;\n\n      if (0 === S) return e.copyFrom(this), this;\n      var P = 1 / S,\n          I = u * b - m * l,\n          z = p * b - v * l,\n          M = p * m - v * u,\n          D = a * b - y * l,\n          F = a * m - y * u,\n          U = a * v - y * p,\n          L = u * f - d * l,\n          N = p * f - h * l,\n          V = p * d - h * u,\n          j = a * f - c * l,\n          H = a * d - c * u,\n          B = a * h - c * p,\n          k = -(r * g - i * _ + s * C),\n          G = +(o * g - i * O + s * x),\n          W = -(o * _ - r * O + s * w),\n          q = +(o * C - r * x + i * w),\n          Y = +(r * I - i * z + s * M),\n          X = -(o * I - i * D + s * F),\n          Z = +(o * z - r * D + s * U),\n          Q = -(o * M - r * F + i * U),\n          J = -(r * L - i * N + s * V),\n          K = +(o * L - i * j + s * H),\n          $ = -(o * N - r * j + s * B),\n          tt = +(o * V - r * H + i * B);\n      return t.FromValuesToRef(T * P, k * P, Y * P, J * P, R * P, G * P, X * P, K * P, A * P, W * P, Z * P, $ * P, E * P, q * P, Q * P, tt * P, e), this;\n    }, t.prototype.addAtIndex = function (t, e) {\n      return this._m[t] += e, this._markAsUpdated(), this;\n    }, t.prototype.multiplyAtIndex = function (t, e) {\n      return this._m[t] *= e, this._markAsUpdated(), this;\n    }, t.prototype.setTranslationFromFloats = function (t, e, n) {\n      return this._m[12] = t, this._m[13] = e, this._m[14] = n, this._markAsUpdated(), this;\n    }, t.prototype.setTranslation = function (t) {\n      return this.setTranslationFromFloats(t.x, t.y, t.z);\n    }, t.prototype.getTranslation = function () {\n      return new o.Vector3(this._m[12], this._m[13], this._m[14]);\n    }, t.prototype.getTranslationToRef = function (t) {\n      return t.x = this._m[12], t.y = this._m[13], t.z = this._m[14], this;\n    }, t.prototype.removeRotationAndScaling = function () {\n      var e = this.m;\n      return t.FromValuesToRef(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, e[12], e[13], e[14], e[15], this), this._updateIdentityStatus(0 === e[12] && 0 === e[13] && 0 === e[14] && 1 === e[15]), this;\n    }, t.prototype.multiply = function (e) {\n      var n = new t();\n      return this.multiplyToRef(e, n), n;\n    }, t.prototype.copyFrom = function (t) {\n      t.copyToArray(this._m);\n      var e = t;\n      return this._updateIdentityStatus(e._isIdentity, e._isIdentityDirty, e._isIdentity3x2, e._isIdentity3x2Dirty), this;\n    }, t.prototype.copyToArray = function (t, e) {\n      void 0 === e && (e = 0);\n\n      for (var n = 0; n < 16; n++) {\n        t[e + n] = this._m[n];\n      }\n\n      return this;\n    }, t.prototype.multiplyToRef = function (t, e) {\n      return this._isIdentity ? (e.copyFrom(t), this) : t._isIdentity ? (e.copyFrom(this), this) : (this.multiplyToArray(t, e._m, 0), e._markAsUpdated(), this);\n    }, t.prototype.multiplyToArray = function (t, e, n) {\n      var o = this._m,\n          r = t.m,\n          i = o[0],\n          s = o[1],\n          a = o[2],\n          p = o[3],\n          u = o[4],\n          l = o[5],\n          c = o[6],\n          h = o[7],\n          d = o[8],\n          f = o[9],\n          y = o[10],\n          v = o[11],\n          m = o[12],\n          b = o[13],\n          g = o[14],\n          _ = o[15],\n          C = r[0],\n          O = r[1],\n          x = r[2],\n          w = r[3],\n          T = r[4],\n          R = r[5],\n          A = r[6],\n          E = r[7],\n          S = r[8],\n          P = r[9],\n          I = r[10],\n          z = r[11],\n          M = r[12],\n          D = r[13],\n          F = r[14],\n          U = r[15];\n      return e[n] = i * C + s * T + a * S + p * M, e[n + 1] = i * O + s * R + a * P + p * D, e[n + 2] = i * x + s * A + a * I + p * F, e[n + 3] = i * w + s * E + a * z + p * U, e[n + 4] = u * C + l * T + c * S + h * M, e[n + 5] = u * O + l * R + c * P + h * D, e[n + 6] = u * x + l * A + c * I + h * F, e[n + 7] = u * w + l * E + c * z + h * U, e[n + 8] = d * C + f * T + y * S + v * M, e[n + 9] = d * O + f * R + y * P + v * D, e[n + 10] = d * x + f * A + y * I + v * F, e[n + 11] = d * w + f * E + y * z + v * U, e[n + 12] = m * C + b * T + g * S + _ * M, e[n + 13] = m * O + b * R + g * P + _ * D, e[n + 14] = m * x + b * A + g * I + _ * F, e[n + 15] = m * w + b * E + g * z + _ * U, this;\n    }, t.prototype.equals = function (t) {\n      var e = t;\n      if (!e) return !1;\n      if ((this._isIdentity || e._isIdentity) && !this._isIdentityDirty && !e._isIdentityDirty) return this._isIdentity && e._isIdentity;\n      var n = this.m,\n          o = e.m;\n      return n[0] === o[0] && n[1] === o[1] && n[2] === o[2] && n[3] === o[3] && n[4] === o[4] && n[5] === o[5] && n[6] === o[6] && n[7] === o[7] && n[8] === o[8] && n[9] === o[9] && n[10] === o[10] && n[11] === o[11] && n[12] === o[12] && n[13] === o[13] && n[14] === o[14] && n[15] === o[15];\n    }, t.prototype.clone = function () {\n      var e = new t();\n      return e.copyFrom(this), e;\n    }, t.prototype.getClassName = function () {\n      return \"Matrix\";\n    }, t.prototype.getHashCode = function () {\n      for (var t = this._m[0] || 0, e = 1; e < 16; e++) {\n        t = 397 * t ^ (this._m[e] || 0);\n      }\n\n      return t;\n    }, t.prototype.decompose = function (e, n, o) {\n      if (this._isIdentity) return o && o.setAll(0), e && e.setAll(1), n && n.copyFromFloats(0, 0, 0, 1), !0;\n      var s = this._m;\n      o && o.copyFromFloats(s[12], s[13], s[14]);\n      var a = e || i.MathTmp.Vector3[0];\n      if (a.x = Math.sqrt(s[0] * s[0] + s[1] * s[1] + s[2] * s[2]), a.y = Math.sqrt(s[4] * s[4] + s[5] * s[5] + s[6] * s[6]), a.z = Math.sqrt(s[8] * s[8] + s[9] * s[9] + s[10] * s[10]), this.determinant() <= 0 && (a.y *= -1), 0 === a.x || 0 === a.y || 0 === a.z) return n && n.copyFromFloats(0, 0, 0, 1), !1;\n\n      if (n) {\n        var p = 1 / a.x,\n            u = 1 / a.y,\n            l = 1 / a.z;\n        t.FromValuesToRef(s[0] * p, s[1] * p, s[2] * p, 0, s[4] * u, s[5] * u, s[6] * u, 0, s[8] * l, s[9] * l, s[10] * l, 0, 0, 0, 0, 1, i.MathTmp.Matrix[0]), r.Quaternion.FromRotationMatrixToRef(i.MathTmp.Matrix[0], n);\n      }\n\n      return !0;\n    }, t.prototype.getRow = function (t) {\n      if (t < 0 || t > 3) return null;\n      var e = 4 * t;\n      return new s.Vector4(this._m[e + 0], this._m[e + 1], this._m[e + 2], this._m[e + 3]);\n    }, t.prototype.setRow = function (t, e) {\n      return this.setRowFromFloats(t, e.x, e.y, e.z, e.w);\n    }, t.prototype.transpose = function () {\n      return t.Transpose(this);\n    }, t.prototype.transposeToRef = function (e) {\n      return t.TransposeToRef(this, e), this;\n    }, t.prototype.setRowFromFloats = function (t, e, n, o, r) {\n      if (t < 0 || t > 3) return this;\n      var i = 4 * t;\n      return this._m[i + 0] = e, this._m[i + 1] = n, this._m[i + 2] = o, this._m[i + 3] = r, this._markAsUpdated(), this;\n    }, t.prototype.scale = function (e) {\n      var n = new t();\n      return this.scaleToRef(e, n), n;\n    }, t.prototype.scaleToRef = function (t, e) {\n      for (var n = 0; n < 16; n++) {\n        e._m[n] = this._m[n] * t;\n      }\n\n      return e._markAsUpdated(), this;\n    }, t.prototype.scaleAndAddToRef = function (t, e) {\n      for (var n = 0; n < 16; n++) {\n        e._m[n] += this._m[n] * t;\n      }\n\n      return e._markAsUpdated(), this;\n    }, t.prototype.toNormalMatrix = function (e) {\n      var n = i.MathTmp.Matrix[0];\n      this.invertToRef(n), n.transposeToRef(e);\n      var o = e._m;\n      t.FromValuesToRef(o[0], o[1], o[2], 0, o[4], o[5], o[6], 0, o[8], o[9], o[10], 0, 0, 0, 0, 1, e);\n    }, t.prototype.getRotationMatrix = function () {\n      var e = new t();\n      return this.getRotationMatrixToRef(e), e;\n    }, t.prototype.getRotationMatrixToRef = function (e) {\n      var n = i.MathTmp.Vector3[0];\n      if (!this.decompose(n)) return t.IdentityToRef(e), this;\n      var o = this._m,\n          r = 1 / n.x,\n          s = 1 / n.y,\n          a = 1 / n.z;\n      return t.FromValuesToRef(o[0] * r, o[1] * r, o[2] * r, 0, o[4] * s, o[5] * s, o[6] * s, 0, o[8] * a, o[9] * a, o[10] * a, 0, 0, 0, 0, 1, e), this;\n    }, t.prototype.toggleModelMatrixHandInPlace = function () {\n      var t = this._m;\n      t[2] *= -1, t[6] *= -1, t[8] *= -1, t[9] *= -1, t[14] *= -1, this._markAsUpdated();\n    }, t.prototype.toggleProjectionMatrixHandInPlace = function () {\n      var t = this._m;\n      t[8] *= -1, t[9] *= -1, t[10] *= -1, t[11] *= -1, this._markAsUpdated();\n    }, t.prototype._updateIdentityStatus = function (e, n, o, r) {\n      void 0 === n && (n = !1), void 0 === o && (o = !1), void 0 === r && (r = !0), this.updateFlag = t._updateFlagSeed++, this._isIdentity = e, this._isIdentity3x2 = e || o, this._isIdentityDirty = !this._isIdentity && n, this._isIdentity3x2Dirty = !this._isIdentity3x2 && r;\n    }, t._updateFlagSeed = 0, t._identityReadOnly = t.Identity(), t;\n  }();\n\n  e.Matrix = a;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Entity = void 0;\n\n  var o = n(0),\n      r = n(7),\n      i = n(1),\n      s = function () {\n    function t(t) {\n      this.name = t, this.children = {}, this.eventManager = null, this.alive = !1, this.uuid = i.newId(\"E\"), this.components = {}, this.engine = null, this._parent = null;\n    }\n\n    return t.prototype.addComponentOrReplace = function (t) {\n      if (\"function\" == typeof t) throw new Error(\"You passed a function or class as a component, an instance of component is expected\");\n      if (\"object\" != typeof t) throw new Error(\"You passed a \" + typeof t + \", an instance of component is expected\");\n      var e = o.getComponentName(t);\n\n      if (this.components[e]) {\n        if (this.components[e] === t) return t;\n        this.removeComponent(this.components[e], !1);\n      }\n\n      return this.addComponent(t);\n    }, t.prototype.hasComponent = function (t) {\n      var e = typeof t;\n      if (\"string\" !== e && \"object\" !== e && \"function\" !== e) throw new Error(\"Entity#has(component): component is not a class, name or instance\");\n      if (null == t) return !1;\n      var n = \"string\" === e ? t : o.getComponentName(t),\n          r = this.components[n];\n      return !!r && (\"object\" === e ? r === t : \"function\" !== e || r instanceof t);\n    }, t.prototype.getComponent = function (t) {\n      var e = typeof t;\n      if (\"string\" !== e && \"function\" !== e) throw new Error(\"Entity#get(component): component is not a class or name\");\n      var n = \"string\" === e ? t : o.getComponentName(t),\n          r = this.components[n];\n      if (!r) throw new Error('Can not get component \"' + n + '\" from entity \"' + this.identifier + '\"');\n\n      if (\"function\" === e) {\n        if (r instanceof t) return r;\n        throw new Error('Can not get component \"' + n + '\" from entity \"' + this.identifier + '\" (by instance)');\n      }\n\n      return r;\n    }, t.prototype.getComponentOrNull = function (t) {\n      var e = typeof t;\n      if (\"string\" !== e && \"function\" !== e) throw new Error(\"Entity#getOrNull(component): component is not a class or name\");\n      var n = \"string\" === e ? t : o.getComponentName(t),\n          r = this.components[n];\n      return r ? \"function\" === e ? r instanceof t ? r : null : r : null;\n    }, t.prototype.getComponentOrCreate = function (t) {\n      if (\"function\" != typeof t) throw new Error(\"Entity#getOrCreate(component): component is not a class\");\n      var e = this.getComponentOrNull(t);\n      return e || (e = new t(), o.getComponentName(e), this.addComponentOrReplace(e)), e;\n    }, t.prototype.addComponent = function (t) {\n      if (\"object\" != typeof t) throw new Error(\"Entity#add(component): You passed a function or class as a component, an instance of component is expected\");\n      var e = o.getComponentName(t),\n          n = o.getComponentClassId(t);\n      if (this.components[e]) throw new Error('A component of type \"' + e + '\" is already present in entity \"' + this.identifier + '\"');\n      this.components[e] = t, this.eventManager && this.eventManager.fireEvent(new r.ComponentAdded(this, e, n));\n      var i = t;\n      return \"function\" == typeof i.addedToEntity && i.addedToEntity(this), t;\n    }, t.prototype.removeComponent = function (t, e) {\n      void 0 === e && (e = !0);\n      var n = typeof t;\n      if (\"string\" !== n && \"function\" !== n && \"object\" !== n) throw new Error(\"Entity#remove(component): component is not a class, class or name\");\n      var s = \"string\" === n ? t : o.getComponentName(t),\n          a = this.components[s];\n\n      if (a) {\n        if (\"function\" === n) return a instanceof t ? (delete this.components[s], void (a && (e && this.eventManager && this.eventManager.fireEvent(new r.ComponentRemoved(this, s, a)), \"function\" == typeof a.removedFromEntity && a.removedFromEntity(this)))) : void i.log('Entity Warning: Trying to remove wrong (by constructor) component \"' + s + '\" from entity \"' + this.identifier + '\"');\n        delete this.components[s], a && (e && this.eventManager && this.eventManager.fireEvent(new r.ComponentRemoved(this, s, a)), \"function\" == typeof a.removedFromEntity && a.removedFromEntity(this));\n      } else i.log('Entity Warning: Trying to remove inexisting component \"' + s + '\" from entity \"' + this.identifier + '\"');\n    }, t.prototype.isAddedToEngine = function () {\n      return !(!this.engine || !(this.uuid in this.engine.entities) && this.engine.rootEntity !== this);\n    }, t.prototype.setParent = function (t) {\n      var e;\n\n      if (t && \"getEntityRepresentation\" in t) {\n        if (!this.engine) throw new Error(\"In order to set an attachable as parent, you first need to add the entity to the engine.\");\n        e = t.getEntityRepresentation(this.engine);\n      } else e = !t && this.engine ? this.engine.rootEntity : t;\n\n      var n = this.getParent();\n      if (e === this) throw new Error('Failed to set parent for entity \"' + this.identifier + \"\\\": An entity can't set itself as a its own parent\");\n      if (e === n) return this;\n      var o = this.getCircularAncestor(e);\n      if (o) throw new Error('Failed to set parent for entity \"' + this.identifier + '\": Circular parent references are not allowed (See entity \"' + o + '\")');\n      return n && delete n.children[this.uuid], null !== e && \"0\" !== e.uuid && (!e.isAddedToEngine() && this.isAddedToEngine() && this.engine.removeEntity(this), e.isAddedToEngine() && !this.isAddedToEngine() && e.engine.addEntity(this)), this._parent = e || null, this.registerAsChild(), this.eventManager && this.engine && this.eventManager.fireEvent(new r.ParentChanged(this, e)), this;\n    }, t.prototype.getParent = function () {\n      return this._parent;\n    }, Object.defineProperty(t.prototype, \"identifier\", {\n      get: function get() {\n        return this.name || this.uuid;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), t.prototype.getCircularAncestor = function (t) {\n      for (var e = this.engine ? this.engine.rootEntity : null, n = t; n && n !== e;) {\n        var o = n.getParent();\n        if (o === this) return n.uuid;\n        n = o;\n      }\n\n      return null;\n    }, t.prototype.registerAsChild = function () {\n      var t = this.getParent();\n      this.uuid && t && (t.children[this.uuid] = this);\n    }, t;\n  }();\n\n  e.Entity = s;\n}, function (t, e, n) {\n  \"use strict\";\n\n  var o = this && this.__decorate || function (t, e, n, o) {\n    var r,\n        i = arguments.length,\n        s = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) s = Reflect.decorate(t, e, n, o);else for (var a = t.length - 1; a >= 0; a--) {\n      (r = t[a]) && (s = (i < 3 ? r(s) : i > 3 ? r(e, n, s) : r(e, n)) || s);\n    }\n    return i > 3 && s && Object.defineProperty(e, n, s), s;\n  };\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.PointerEvent = e.RaycastResponse = e.UUIDEvent = void 0;\n\n  var r = n(8),\n      i = function () {\n    function t(t, e) {\n      this.uuid = t, this.payload = e;\n    }\n\n    return t = o([r.EventConstructor()], t);\n  }();\n\n  e.UUIDEvent = i;\n\n  var s = function () {\n    function t(t) {\n      this.payload = t;\n    }\n\n    return t = o([r.EventConstructor()], t);\n  }();\n\n  e.RaycastResponse = s;\n\n  var a = function () {\n    function t(t) {\n      this.payload = t;\n    }\n\n    return t = o([r.EventConstructor()], t);\n  }();\n\n  e.PointerEvent = a;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.uuidEventSystem = e.UUIDEventSystem = e.pointerEventSystem = e.PointerEventSystem = e.raycastEventSystem = e.RaycastEventSystem = void 0;\n\n  var o = n(13),\n      r = n(4),\n      i = n(7),\n      s = n(16),\n      a = n(28),\n      p = function () {\n    function t() {}\n\n    return t.prototype.activate = function (t) {\n      t.eventManager.addListener(o.RaycastResponse, this, function (t) {\n        \"HitFirst\" === t.payload.queryType ? a.PhysicsCast.instance.handleRaycastHitFirstResponse(t) : \"HitAll\" === t.payload.queryType && a.PhysicsCast.instance.handleRaycastHitAllResponse(t);\n      }), \"undefined\" != typeof dcl && dcl.subscribe(\"raycastResponse\");\n    }, t.prototype.deactivate = function () {\n      \"undefined\" != typeof dcl && dcl.unsubscribe(\"raycastResponse\");\n    }, t;\n  }();\n\n  e.RaycastEventSystem = p, e.raycastEventSystem = new p();\n\n  var u = function () {\n    function t() {}\n\n    return t.prototype.activate = function (t) {\n      t.eventManager.addListener(o.PointerEvent, this, function (t) {\n        s.Input.instance.handlePointerEvent(t.payload);\n      }), \"undefined\" != typeof dcl && (dcl.subscribe(\"pointerUp\"), dcl.subscribe(\"pointerDown\"), dcl.subscribe(\"pointerEvent\"));\n    }, t.prototype.deactivate = function () {\n      \"undefined\" != typeof dcl && (dcl.unsubscribe(\"pointerUp\"), dcl.unsubscribe(\"pointerDown\"), dcl.unsubscribe(\"pointerEvent\"));\n    }, t;\n  }();\n\n  e.PointerEventSystem = u, e.pointerEventSystem = new u();\n\n  var l = function () {\n    function t() {\n      this.handlerMap = {};\n    }\n\n    return t.prototype.activate = function (t) {\n      t.eventManager.addListener(o.UUIDEvent, this, this.handleEvent), t.eventManager.addListener(i.ComponentAdded, this, this.componentAdded), t.eventManager.addListener(i.ComponentRemoved, this, this.componentRemoved), \"undefined\" != typeof dcl && dcl.subscribe(\"uuidEvent\");\n    }, t.prototype.deactivate = function () {\n      \"undefined\" != typeof dcl && dcl.unsubscribe(\"uuidEvent\");\n    }, t.prototype.onAddEntity = function (t) {\n      for (var e in t.components) {\n        var n = t.components[e];\n        n instanceof r.OnUUIDEvent && (this.handlerMap[n.uuid] = n);\n      }\n    }, t.prototype.onRemoveEntity = function (t) {\n      for (var e in t.components) {\n        var n = t.components[e];\n        n instanceof r.OnUUIDEvent && delete this.handlerMap[n.uuid];\n      }\n    }, t.prototype.componentAdded = function (t) {\n      if (t.entity.isAddedToEngine()) {\n        var e = t.entity.components[t.componentName];\n        e instanceof r.OnUUIDEvent && (this.handlerMap[e.uuid] = e);\n      }\n    }, t.prototype.componentRemoved = function (t) {\n      t.entity.isAddedToEngine() && t.component instanceof r.OnUUIDEvent && delete this.handlerMap[t.component.uuid];\n    }, t.prototype.handleEvent = function (t) {\n      if (t.uuid in this.handlerMap) {\n        var e = this.handlerMap[t.uuid];\n        e && e.callback && \"call\" in e.callback && e.callback(t.payload);\n      }\n    }, t;\n  }();\n\n  e.UUIDEventSystem = l, e.uuidEventSystem = new l();\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Vector2 = void 0;\n\n  var o = n(2),\n      r = n(6),\n      i = function () {\n    function t(t, e) {\n      void 0 === t && (t = 0), void 0 === e && (e = 0), this.x = t, this.y = e;\n    }\n\n    return t.Zero = function () {\n      return new t(0, 0);\n    }, t.One = function () {\n      return new t(1, 1);\n    }, t.Add = function (e, n) {\n      return new t(e.x, e.y).addInPlace(n);\n    }, t.FromArray = function (e, n) {\n      return void 0 === n && (n = 0), new t(e[n], e[n + 1]);\n    }, t.FromArrayToRef = function (t, e, n) {\n      n.x = t[e], n.y = t[e + 1];\n    }, t.CatmullRom = function (e, n, o, r, i) {\n      var s = i * i,\n          a = i * s;\n      return new t(.5 * (2 * n.x + (-e.x + o.x) * i + (2 * e.x - 5 * n.x + 4 * o.x - r.x) * s + (-e.x + 3 * n.x - 3 * o.x + r.x) * a), .5 * (2 * n.y + (-e.y + o.y) * i + (2 * e.y - 5 * n.y + 4 * o.y - r.y) * s + (-e.y + 3 * n.y - 3 * o.y + r.y) * a));\n    }, t.Clamp = function (e, n, o) {\n      var r = e.x;\n      r = (r = r > o.x ? o.x : r) < n.x ? n.x : r;\n      var i = e.y;\n      return new t(r, i = (i = i > o.y ? o.y : i) < n.y ? n.y : i);\n    }, t.Hermite = function (e, n, o, r, i) {\n      var s = i * i,\n          a = i * s,\n          p = 2 * a - 3 * s + 1,\n          u = -2 * a + 3 * s,\n          l = a - 2 * s + i,\n          c = a - s;\n      return new t(e.x * p + o.x * u + n.x * l + r.x * c, e.y * p + o.y * u + n.y * l + r.y * c);\n    }, t.Lerp = function (e, n, o) {\n      return new t(e.x + (n.x - e.x) * o, e.y + (n.y - e.y) * o);\n    }, t.Dot = function (t, e) {\n      return t.x * e.x + t.y * e.y;\n    }, t.Normalize = function (e) {\n      var n = new t(e.x, e.y);\n      return n.normalize(), n;\n    }, t.Minimize = function (e, n) {\n      return new t(e.x < n.x ? e.x : n.x, e.y < n.y ? e.y : n.y);\n    }, t.Maximize = function (e, n) {\n      return new t(e.x > n.x ? e.x : n.x, e.y > n.y ? e.y : n.y);\n    }, t.Transform = function (e, n) {\n      var o = t.Zero();\n      return t.TransformToRef(e, n, o), o;\n    }, t.TransformToRef = function (t, e, n) {\n      var o = e.m,\n          r = t.x * o[0] + t.y * o[4] + o[12],\n          i = t.x * o[1] + t.y * o[5] + o[13];\n      n.x = r, n.y = i;\n    }, t.PointInTriangle = function (t, e, n, o) {\n      var r = .5 * (-n.y * o.x + e.y * (-n.x + o.x) + e.x * (n.y - o.y) + n.x * o.y),\n          i = r < 0 ? -1 : 1,\n          s = (e.y * o.x - e.x * o.y + (o.y - e.y) * t.x + (e.x - o.x) * t.y) * i,\n          a = (e.x * n.y - e.y * n.x + (e.y - n.y) * t.x + (n.x - e.x) * t.y) * i;\n      return s > 0 && a > 0 && s + a < 2 * r * i;\n    }, t.Distance = function (e, n) {\n      return Math.sqrt(t.DistanceSquared(e, n));\n    }, t.DistanceSquared = function (t, e) {\n      var n = t.x - e.x,\n          o = t.y - e.y;\n      return n * n + o * o;\n    }, t.Center = function (e, n) {\n      var o = t.Add(e, n);\n      return o.scaleInPlace(.5), o;\n    }, t.DistanceOfPointFromSegment = function (e, n, o) {\n      var r = t.DistanceSquared(n, o);\n      if (0 === r) return t.Distance(e, n);\n      var i = o.subtract(n),\n          s = Math.max(0, Math.min(1, t.Dot(e.subtract(n), i) / r)),\n          a = n.add(i.multiplyByFloats(s, s));\n      return t.Distance(e, a);\n    }, t.prototype.toString = function () {\n      return \"{X: \" + this.x + \" Y:\" + this.y + \"}\";\n    }, t.prototype.getClassName = function () {\n      return \"Vector2\";\n    }, t.prototype.getHashCode = function () {\n      var t = this.x || 0;\n      return t = 397 * t ^ (this.y || 0);\n    }, t.prototype.toArray = function (t, e) {\n      return void 0 === e && (e = 0), t[e] = this.x, t[e + 1] = this.y, this;\n    }, t.prototype.asArray = function () {\n      var t = new Array();\n      return this.toArray(t, 0), t;\n    }, t.prototype.copyFrom = function (t) {\n      return this.x = t.x, this.y = t.y, this;\n    }, t.prototype.copyFromFloats = function (t, e) {\n      return this.x = t, this.y = e, this;\n    }, t.prototype.set = function (t, e) {\n      return this.copyFromFloats(t, e);\n    }, t.prototype.add = function (e) {\n      return new t(this.x + e.x, this.y + e.y);\n    }, t.prototype.addToRef = function (t, e) {\n      return e.x = this.x + t.x, e.y = this.y + t.y, this;\n    }, t.prototype.addInPlace = function (t) {\n      return this.x += t.x, this.y += t.y, this;\n    }, t.prototype.addVector3 = function (e) {\n      return new t(this.x + e.x, this.y + e.y);\n    }, t.prototype.subtract = function (e) {\n      return new t(this.x - e.x, this.y - e.y);\n    }, t.prototype.subtractToRef = function (t, e) {\n      return e.x = this.x - t.x, e.y = this.y - t.y, this;\n    }, t.prototype.subtractInPlace = function (t) {\n      return this.x -= t.x, this.y -= t.y, this;\n    }, t.prototype.multiplyInPlace = function (t) {\n      return this.x *= t.x, this.y *= t.y, this;\n    }, t.prototype.multiply = function (e) {\n      return new t(this.x * e.x, this.y * e.y);\n    }, t.prototype.multiplyToRef = function (t, e) {\n      return e.x = this.x * t.x, e.y = this.y * t.y, this;\n    }, t.prototype.multiplyByFloats = function (e, n) {\n      return new t(this.x * e, this.y * n);\n    }, t.prototype.divide = function (e) {\n      return new t(this.x / e.x, this.y / e.y);\n    }, t.prototype.divideToRef = function (t, e) {\n      return e.x = this.x / t.x, e.y = this.y / t.y, this;\n    }, t.prototype.divideInPlace = function (t) {\n      return this.divideToRef(t, this);\n    }, t.prototype.negate = function () {\n      return new t(-this.x, -this.y);\n    }, t.prototype.scaleInPlace = function (t) {\n      return this.x *= t, this.y *= t, this;\n    }, t.prototype.scale = function (e) {\n      var n = new t(0, 0);\n      return this.scaleToRef(e, n), n;\n    }, t.prototype.scaleToRef = function (t, e) {\n      return e.x = this.x * t, e.y = this.y * t, this;\n    }, t.prototype.scaleAndAddToRef = function (t, e) {\n      return e.x += this.x * t, e.y += this.y * t, this;\n    }, t.prototype.equals = function (t) {\n      return t && this.x === t.x && this.y === t.y;\n    }, t.prototype.equalsWithEpsilon = function (t, e) {\n      return void 0 === e && (e = o.Epsilon), t && r.Scalar.WithinEpsilon(this.x, t.x, e) && r.Scalar.WithinEpsilon(this.y, t.y, e);\n    }, t.prototype.floor = function () {\n      return new t(Math.floor(this.x), Math.floor(this.y));\n    }, t.prototype.fract = function () {\n      return new t(this.x - Math.floor(this.x), this.y - Math.floor(this.y));\n    }, t.prototype.length = function () {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    }, t.prototype.lengthSquared = function () {\n      return this.x * this.x + this.y * this.y;\n    }, t.prototype.normalize = function () {\n      var t = this.length();\n      if (0 === t) return this;\n      var e = 1 / t;\n      return this.x *= e, this.y *= e, this;\n    }, t.prototype.clone = function () {\n      return new t(this.x, this.y);\n    }, t;\n  }();\n\n  e.Vector2 = i;\n}, function (t, e, n) {\n  \"use strict\";\n\n  var _o2,\n      r = this && this.__extends || (_o2 = function o(t, e) {\n    return (_o2 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (t, e) {\n      t.__proto__ = e;\n    } || function (t, e) {\n      for (var n in e) {\n        Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n      }\n    })(t, e);\n  }, function (t, e) {\n    function n() {\n      this.constructor = t;\n    }\n\n    _o2(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n  }),\n      i = this && this.__assign || function () {\n    return (i = Object.assign || function (t) {\n      for (var e, n = 1, o = arguments.length; n < o; n++) {\n        for (var r in e = arguments[n]) {\n          Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);\n        }\n      }\n\n      return t;\n    }).apply(this, arguments);\n  },\n      s = this && this.__decorate || function (t, e, n, o) {\n    var r,\n        i = arguments.length,\n        s = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) s = Reflect.decorate(t, e, n, o);else for (var a = t.length - 1; a >= 0; a--) {\n      (r = t[a]) && (s = (i < 3 ? r(s) : i > 3 ? r(e, n, s) : r(e, n)) || s);\n    }\n    return i > 3 && s && Object.defineProperty(e, n, s), s;\n  };\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Input = e.GlobalPointerUp = e.GlobalPointerDown = e.PointerEventComponent = e.ActionButton = void 0;\n  var a,\n      p = n(27),\n      u = n(5),\n      l = n(0);\n  !function (t) {\n    t.POINTER = \"POINTER\", t.PRIMARY = \"PRIMARY\", t.SECONDARY = \"SECONDARY\", t.ANY = \"ANY\";\n  }(a = e.ActionButton || (e.ActionButton = {}));\n\n  var c = function c(t) {\n    if (this.callback = t, !t || !(\"apply\" in t) || !(\"call\" in t)) throw new Error(\"Callback is not a function\");\n    y.ensureInstance();\n  };\n\n  e.PointerEventComponent = c;\n\n  var h = function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return r(e, t), e = s([l.Component(\"pointerDown\")], e);\n  }(c);\n\n  e.GlobalPointerDown = h;\n\n  var d = function (t) {\n    function e() {\n      return null !== t && t.apply(this, arguments) || this;\n    }\n\n    return r(e, t), e = s([l.Component(\"pointerUp\")], e);\n  }(c);\n\n  e.GlobalPointerUp = d;\n\n  var f = function f(t, e) {\n    this.fn = t, this.useRaycast = e;\n  },\n      y = function () {\n    function t() {\n      var t, e;\n      this.subscriptions = ((t = {})[a.POINTER] = {\n        BUTTON_DOWN: [],\n        BUTTON_UP: []\n      }, t[a.PRIMARY] = {\n        BUTTON_DOWN: [],\n        BUTTON_UP: []\n      }, t[a.SECONDARY] = {\n        BUTTON_DOWN: [],\n        BUTTON_UP: []\n      }, t[a.ANY] = {\n        BUTTON_DOWN: [],\n        BUTTON_UP: []\n      }, t), this.internalState = ((e = {})[a.POINTER] = {\n        BUTTON_DOWN: !1\n      }, e[a.PRIMARY] = {\n        BUTTON_DOWN: !1\n      }, e[a.SECONDARY] = {\n        BUTTON_DOWN: !1\n      }, e[a.ANY] = {\n        BUTTON_DOWN: !1\n      }, e);\n    }\n\n    return Object.defineProperty(t, \"instance\", {\n      get: function get() {\n        return t.ensureInstance(), t._instance;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), t.ensureInstance = function () {\n      t._instance || (t._instance = new t());\n    }, t.prototype.isButtonPressed = function (t) {\n      return this.internalState[t];\n    }, t.prototype.subscribe = function (t, e, n, o) {\n      var r = this;\n      return this.subscriptions[e][t].push(new f(o, n)), function () {\n        return r.unsubscribe(t, e, o);\n      };\n    }, t.prototype.unsubscribe = function (t, e, n) {\n      var o = this.getSubscriptionId(t, e, n);\n      return o > -1 && this.subscriptions[e][t].splice(o, 1);\n    }, t.prototype.handlePointerEvent = function (t) {\n      var e = this.getPointerById(t.buttonId),\n          n = i(i({}, t), {\n        button: e,\n        direction: new u.Vector3().copyFrom(t.direction),\n        origin: new u.Vector3().copyFrom(t.origin),\n        hit: void 0\n      }),\n          o = t.hit ? i(i({}, t.hit), {\n        hitPoint: new u.Vector3().copyFrom(t.hit.hitPoint),\n        normal: new u.Vector3().copyFrom(t.hit.normal),\n        worldNormal: new u.Vector3().copyFrom(t.hit.worldNormal)\n      }) : void 0;\n\n      if (t.type === p.InputEventType.DOWN) {\n        this.internalState[e].BUTTON_DOWN = !0;\n\n        for (var r = 0; r < this.subscriptions[e].BUTTON_DOWN.length; r++) {\n          (s = this.subscriptions[e].BUTTON_DOWN[r]).useRaycast ? n.hit = o : n.hit = void 0, s.fn(n);\n        }\n\n        if (o && o.entityId && l.DisposableComponent.engine) (c = (a = l.DisposableComponent.engine.entities[o.entityId]) && a.getComponentOrNull(h)) && (n.hit = o, c.callback(n));\n      } else {\n        this.internalState[e].BUTTON_DOWN = !1;\n\n        for (r = 0; r < this.subscriptions[e].BUTTON_UP.length; r++) {\n          var s;\n          (s = this.subscriptions[e].BUTTON_UP[r]).useRaycast ? n.hit = o : n.hit = void 0, s.fn(n);\n        }\n\n        var a, c;\n        if (o && o.entityId && l.DisposableComponent.engine) (c = (a = l.DisposableComponent.engine.entities[o.entityId]) && a.getComponentOrNull(d)) && (n.hit = o, c.callback(n));\n      }\n    }, t.prototype.getSubscriptionId = function (t, e, n) {\n      for (var o = 0; o < this.subscriptions[e][t].length; o++) {\n        if (this.subscriptions[e][t][o].fn === n) return o;\n      }\n\n      return -1;\n    }, t.prototype.getPointerById = function (t) {\n      return 0 === t ? a.POINTER : 1 === t ? a.PRIMARY : a.SECONDARY;\n    }, t;\n  }();\n\n  e.Input = y;\n}, function (t, e, n) {\n  \"use strict\";\n\n  var o = this && this.__read || function (t, e) {\n    var n = \"function\" == typeof Symbol && t[Symbol.iterator];\n    if (!n) return t;\n    var o,\n        r,\n        i = n.call(t),\n        s = [];\n\n    try {\n      for (; (void 0 === e || e-- > 0) && !(o = i.next()).done;) {\n        s.push(o.value);\n      }\n    } catch (t) {\n      r = {\n        error: t\n      };\n    } finally {\n      try {\n        o && !o.done && (n = i.return) && n.call(i);\n      } finally {\n        if (r) throw r.error;\n      }\n    }\n\n    return s;\n  },\n      r = this && this.__spread || function () {\n    for (var t = [], e = 0; e < arguments.length; e++) {\n      t = t.concat(o(arguments[e]));\n    }\n\n    return t;\n  };\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Engine = void 0;\n\n  var i = n(7),\n      s = n(0),\n      a = n(8),\n      p = n(32),\n      u = n(1),\n      l = n(12),\n      c = function () {\n    function t(t) {\n      this.eventManager = new a.EventManager(), this.systems = [], this.entityLists = {}, this.addedSystems = [], this._entities = {}, this._disposableComponents = {}, this._componentGroups = {}, this.simpleSystems = [], this.eventManager.addListener(i.ComponentAdded, this, this.componentAddedHandler), this.eventManager.addListener(i.ComponentRemoved, this, this.componentRemovedHandler), this.rootEntity = t, this.firstPersonCameraEntity = new l.Entity(), this.firstPersonCameraEntity.uuid = \"FirstPersonCameraEntityReference\", this.addEntity(this.firstPersonCameraEntity), this.avatarEntity = new l.Entity(), this.avatarEntity.uuid = \"AvatarEntityReference\", this.addEntity(this.avatarEntity);\n    }\n\n    return Object.defineProperty(t.prototype, \"entities\", {\n      get: function get() {\n        return this._entities;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"disposableComponents\", {\n      get: function get() {\n        return this._disposableComponents;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), t.prototype.addEntity = function (t) {\n      var e = t.getParent();\n      if (t.isAddedToEngine()) return t;\n\n      for (var n in t.eventManager = this.eventManager, t.engine = this, this._entities[t.uuid] = t, this.checkRequirementsAndAdd(t), e ? e.isAddedToEngine() || e === this.rootEntity || u.log(\"Engine: warning, added an entity with a parent not present in the engine. Parent id: \" + e.uuid) : t.setParent(this.rootEntity), t.alive = !0, t.children) {\n        var o = t.children[n];\n        o && (o.isAddedToEngine() || this.addEntity(o));\n      }\n\n      return t;\n    }, t.prototype.removeEntity = function (t) {\n      var e = t.uuid;\n\n      if (t.isAddedToEngine()) {\n        for (var n in t.components) {\n          var o = this._componentGroups[n];\n          if (o) for (var r in o) {\n            o[r].removeEntity(t);\n          }\n          delete this.entityLists[n][e];\n        }\n\n        for (var i = 0; i < this.simpleSystems.length; i++) {\n          var s = this.simpleSystems[i];\n          s.onRemoveEntity && s.onRemoveEntity(t);\n        }\n\n        for (var i in t.children) {\n          var a = t.children[i];\n          a && this.removeEntity(a);\n        }\n\n        return t.alive = !1, t.eventManager = null, delete this._entities[e], !0;\n      }\n\n      for (var n in u.log(\"Engine: Trying to remove non existent entity from engine.\"), t.isAddedToEngine() ? u.log(\"Engine: Entity id: \" + e) : u.log('Engine: Entity \"' + t.uuid + '\" has not been added to any engine yet.'), u.log(\"Engine: Entity's components:\"), t.components) {\n        u.log(n);\n      }\n\n      return !1;\n    }, t.prototype.addSystem = function (t, e) {\n      if (void 0 === e && (e = 0), -1 !== this.addedSystems.indexOf(t)) return u.log(\"Engine: Trying to add a system that is already added. Aborting\"), t;\n      if (this.systems.length > 0) for (var n = 0; n < this.systems.length; n++) {\n        var o = this.systems[n],\n            r = n === this.systems.length - 1;\n\n        if (o.priority > e) {\n          this.addedSystems.push(t), this.systems.splice(n, 0, {\n            system: t,\n            priority: e\n          });\n          break;\n        }\n\n        if (r) {\n          this.addedSystems.push(t), this.systems.splice(n + 1, 0, {\n            system: t,\n            priority: e\n          });\n          break;\n        }\n      } else this.addedSystems.push(t), this.systems.splice(1, 0, {\n        system: t,\n        priority: e\n      });\n      return this.registerSystem(t), t;\n    }, t.prototype.removeSystem = function (t) {\n      var e = this.addedSystems.indexOf(t);\n\n      if (-1 !== e) {\n        t.active = !1, t.deactivate && t.deactivate(), this.addedSystems.splice(e, 1);\n\n        for (var n = 0; n < this.systems.length; n++) {\n          this.systems[n].system === t && this.systems.splice(n, 1);\n        }\n\n        return !0;\n      }\n\n      return !1;\n    }, t.prototype.update = function (t) {\n      for (var e in this.systems) {\n        var n = this.systems[e].system;\n        if (n.active && n.update) try {\n          n.update(t);\n        } catch (t) {\n          u.error(t);\n        }\n      }\n\n      return this;\n    }, t.prototype.getEntitiesWithComponent = function (t) {\n      var e = \"string\" == typeof t ? t : s.getComponentName(t);\n      return e in this.entityLists ? this.entityLists[e] : this.entityLists[e] = {};\n    }, t.prototype.registerComponent = function (t) {\n      var e = s.getComponentId(t),\n          n = s.getComponentName(t),\n          o = s.getComponentClassId(t);\n      this._disposableComponents[e] = t, null !== o && (this.eventManager.fireEvent(new s.DisposableComponentCreated(e, n, o)), this.eventManager.fireEvent(new s.DisposableComponentUpdated(e, t)));\n    }, t.prototype.disposeComponent = function (t) {\n      var e = s.getComponentId(t);\n      return delete this._disposableComponents[e] && (this.eventManager.fireEvent(new s.DisposableComponentRemoved(e)), t.onDispose && t.onDispose(), !0);\n    }, t.prototype.updateComponent = function (t) {\n      this.eventManager.fireEvent(new s.DisposableComponentUpdated(s.getComponentId(t), t));\n    }, t.prototype.getComponentGroup = function () {\n      for (var t = [], e = 0; e < arguments.length; e++) {\n        t[e] = arguments[e];\n      }\n\n      var n = new (p.ComponentGroup.bind.apply(p.ComponentGroup, r([void 0], t)))();\n      n.active = !0;\n\n      for (var o = n.requiresNames, i = 0; i < o.length; i++) {\n        var s = o[i],\n            a = this._componentGroups[s];\n        a || (this._componentGroups[s] = a = []), -1 === a.indexOf(n) && a.push(n);\n      }\n\n      for (var u in this._entities) {\n        this.checkRequirements(this._entities[u], n);\n      }\n\n      return n;\n    }, t.prototype.removeComponentGroup = function (t) {\n      if (t.active) {\n        t.active = !1;\n\n        for (var e = t.requiresNames, n = 0; n < e.length; n++) {\n          var o = e[n],\n              r = this._componentGroups[o];\n\n          if (r) {\n            var i = r.indexOf(t);\n            -1 !== i && r.splice(i, 1);\n          }\n        }\n\n        return !0;\n      }\n\n      return !1;\n    }, t.prototype.registerSystem = function (t) {\n      t.active = !0, t.activate && t.activate(this), this.simpleSystems.push(t);\n    }, t.prototype.checkRequirementsAndAdd = function (t) {\n      if (t.isAddedToEngine()) {\n        for (var e in t.components) {\n          e in this.entityLists || (this.entityLists[e] = {}), this.entityLists[e][t.uuid] = t;\n          var n = this._componentGroups[e];\n          if (n) for (var o in n) {\n            this.checkRequirements(t, n[o]);\n          }\n        }\n\n        for (var r = 0; r < this.simpleSystems.length; r++) {\n          var i = this.simpleSystems[r];\n          i.onAddEntity && i.onAddEntity(t);\n        }\n      }\n    }, t.prototype.checkRequirements = function (t, e) {\n      e.meetsRequirements(t) ? e.hasEntity(t) || e.addEntity(t) : e.hasEntity(t) && e.removeEntity(t);\n    }, t.prototype.componentAddedHandler = function (t) {\n      var e,\n          n = t.entity,\n          o = t.componentName;\n\n      if (n.isAddedToEngine()) {\n        this.entityLists[o] ? this.entityLists[o][n.uuid] = n : this.entityLists[o] = ((e = {})[n.uuid] = n, e);\n        var r = this._componentGroups[o];\n        if (r) for (var i in r) {\n          this.checkRequirements(n, r[i]);\n        }\n      }\n    }, t.prototype.componentRemovedHandler = function (t) {\n      var e = t.entity,\n          n = t.componentName;\n\n      if (e.isAddedToEngine()) {\n        delete this.entityLists[n][e.uuid];\n        var o = this._componentGroups[n];\n        if (o) for (var r in o) {\n          this.checkRequirements(e, o[r]);\n        }\n      }\n    }, t;\n  }();\n\n  e.Engine = c;\n}, function (t, e, n) {\n  \"use strict\";\n\n  var o;\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.UIValue = e.UIValueType = void 0, function (t) {\n    t[t.PERCENT = 0] = \"PERCENT\", t[t.PIXELS = 1] = \"PIXELS\";\n  }(o = e.UIValueType || (e.UIValueType = {}));\n\n  var r = function () {\n    function t(t) {\n      if (this.type = o.PIXELS, \"string\" == typeof t) {\n        var e = t;\n        e.indexOf(\"px\") > -1 ? this.type = o.PIXELS : e.indexOf(\"%\") > -1 && (this.type = o.PERCENT), this.value = parseFloat(e);\n      } else this.value = t;\n    }\n\n    return t.prototype.toString = function () {\n      var t = this.value.toString();\n      return this.type === o.PERCENT ? t += \"%\" : t += \"px\", t;\n    }, t;\n  }();\n\n  e.UIValue = r;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.executeTask = void 0;\n  var o = n(1),\n      r = Promise.resolve().then.bind(Promise.resolve());\n\n  e.executeTask = function (t) {\n    var e = r(t);\n    return e.isComplete = !1, e.then(function (t) {\n      e.isComplete = !0, e.result = t, e.didFail = !1;\n    }).catch(function (t) {\n      e.isComplete = !0, e.error = t, e.didFail = !0, o.error(\"executeTask: FAILED \" + t.toString(), t);\n    }), e;\n  };\n}, function (t, e, n) {\n  \"use strict\";\n\n  var o = this && this.__awaiter || function (t, e, n, o) {\n    return new (n || (n = Promise))(function (r, i) {\n      function s(t) {\n        try {\n          p(o.next(t));\n        } catch (t) {\n          i(t);\n        }\n      }\n\n      function a(t) {\n        try {\n          p(o.throw(t));\n        } catch (t) {\n          i(t);\n        }\n      }\n\n      function p(t) {\n        var e;\n        t.done ? r(t.value) : (e = t.value, e instanceof n ? e : new n(function (t) {\n          t(e);\n        })).then(s, a);\n      }\n\n      p((o = o.apply(t, e || [])).next());\n    });\n  },\n      r = this && this.__generator || function (t, e) {\n    var n,\n        o,\n        r,\n        i,\n        s = {\n      label: 0,\n      sent: function sent() {\n        if (1 & r[0]) throw r[1];\n        return r[1];\n      },\n      trys: [],\n      ops: []\n    };\n    return i = {\n      next: a(0),\n      throw: a(1),\n      return: a(2)\n    }, \"function\" == typeof Symbol && (i[Symbol.iterator] = function () {\n      return this;\n    }), i;\n\n    function a(i) {\n      return function (a) {\n        return function (i) {\n          if (n) throw new TypeError(\"Generator is already executing.\");\n\n          for (; s;) {\n            try {\n              if (n = 1, o && (r = 2 & i[0] ? o.return : i[0] ? o.throw || ((r = o.return) && r.call(o), 0) : o.next) && !(r = r.call(o, i[1])).done) return r;\n\n              switch (o = 0, r && (i = [2 & i[0], r.value]), i[0]) {\n                case 0:\n                case 1:\n                  r = i;\n                  break;\n\n                case 4:\n                  return s.label++, {\n                    value: i[1],\n                    done: !1\n                  };\n\n                case 5:\n                  s.label++, o = i[1], i = [0];\n                  continue;\n\n                case 7:\n                  i = s.ops.pop(), s.trys.pop();\n                  continue;\n\n                default:\n                  if (!(r = s.trys, (r = r.length > 0 && r[r.length - 1]) || 6 !== i[0] && 2 !== i[0])) {\n                    s = 0;\n                    continue;\n                  }\n\n                  if (3 === i[0] && (!r || i[1] > r[0] && i[1] < r[3])) {\n                    s.label = i[1];\n                    break;\n                  }\n\n                  if (6 === i[0] && s.label < r[1]) {\n                    s.label = r[1], r = i;\n                    break;\n                  }\n\n                  if (r && s.label < r[2]) {\n                    s.label = r[2], s.ops.push(i);\n                    break;\n                  }\n\n                  r[2] && s.ops.pop(), s.trys.pop();\n                  continue;\n              }\n\n              i = e.call(t, s);\n            } catch (t) {\n              i = [6, t], o = 0;\n            } finally {\n              n = r = 0;\n            }\n          }\n\n          if (5 & i[0]) throw i[1];\n          return {\n            value: i[0] ? i[1] : void 0,\n            done: !0\n          };\n        }([i, a]);\n      };\n    }\n  },\n      i = this && this.__values || function (t) {\n    var e = \"function\" == typeof Symbol && Symbol.iterator,\n        n = e && t[e],\n        o = 0;\n    if (n) return n.call(t);\n    if (t && \"number\" == typeof t.length) return {\n      next: function next() {\n        return t && o >= t.length && (t = void 0), {\n          value: t && t[o++],\n          done: !t\n        };\n      }\n    };\n    throw new TypeError(e ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n  };\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Observable = e.MultiObserver = e.Observer = e.ObserverEventState = void 0;\n\n  var s = n(19),\n      a = function () {\n    function t(t, e, n, o) {\n      void 0 === e && (e = !1), this.initalize(t, e, n, o);\n    }\n\n    return t.prototype.initalize = function (t, e, n, o) {\n      return void 0 === e && (e = !1), this.mask = t, this.skipNextObservers = e, this.target = n, this.currentTarget = o, this;\n    }, t;\n  }();\n\n  e.ObserverEventState = a;\n\n  var p = function p(t, e, n) {\n    void 0 === n && (n = null), this.callback = t, this.mask = e, this.scope = n, this.unregisterOnNextCall = !1, this._willBeUnregistered = !1;\n  };\n\n  e.Observer = p;\n\n  var u = function () {\n    function t() {\n      this._observers = null, this._observables = null;\n    }\n\n    return t.Watch = function (e, n, o, r) {\n      var s, a;\n      void 0 === o && (o = -1), void 0 === r && (r = null);\n      var p = new t();\n      p._observers = new Array(), p._observables = e;\n\n      try {\n        for (var u = i(e), l = u.next(); !l.done; l = u.next()) {\n          var c = l.value.add(n, o, !1, r);\n          c && p._observers.push(c);\n        }\n      } catch (t) {\n        s = {\n          error: t\n        };\n      } finally {\n        try {\n          l && !l.done && (a = u.return) && a.call(u);\n        } finally {\n          if (s) throw s.error;\n        }\n      }\n\n      return p;\n    }, t.prototype.dispose = function () {\n      if (this._observers && this._observables) for (var t = 0; t < this._observers.length; t++) {\n        this._observables[t].remove(this._observers[t]);\n      }\n      this._observers = null, this._observables = null;\n    }, t;\n  }();\n\n  e.MultiObserver = u;\n\n  var l = function () {\n    function t(t) {\n      this._observers = new Array(), this._onObserverAdded = null, this._eventState = new a(0), t && (this._onObserverAdded = t);\n    }\n\n    return t.prototype.add = function (t, e, n, o, r) {\n      if (void 0 === e && (e = -1), void 0 === n && (n = !1), void 0 === o && (o = null), void 0 === r && (r = !1), !t) return null;\n      var i = new p(t, e, o);\n      return i.unregisterOnNextCall = r, n ? this._observers.unshift(i) : this._observers.push(i), this._onObserverAdded && this._onObserverAdded(i), i;\n    }, t.prototype.addOnce = function (t) {\n      return this.add(t, void 0, void 0, void 0, !0);\n    }, t.prototype.remove = function (t) {\n      return !!t && -1 !== this._observers.indexOf(t) && (this._deferUnregister(t), !0);\n    }, t.prototype.removeCallback = function (t, e) {\n      for (var n = 0; n < this._observers.length; n++) {\n        if (this._observers[n].callback === t && (!e || e === this._observers[n].scope)) return this._deferUnregister(this._observers[n]), !0;\n      }\n\n      return !1;\n    }, t.prototype.notifyObservers = function (t, e, n, o) {\n      var r, s;\n      if (void 0 === e && (e = -1), !this._observers.length) return !0;\n      var a = this._eventState;\n      a.mask = e, a.target = n, a.currentTarget = o, a.skipNextObservers = !1, a.lastReturnValue = t;\n\n      try {\n        for (var p = i(this._observers), u = p.next(); !u.done; u = p.next()) {\n          var l = u.value;\n          if (!l._willBeUnregistered && (l.mask & e && (l.scope ? a.lastReturnValue = l.callback.apply(l.scope, [t, a]) : a.lastReturnValue = l.callback(t, a), l.unregisterOnNextCall && this._deferUnregister(l)), a.skipNextObservers)) return !1;\n        }\n      } catch (t) {\n        r = {\n          error: t\n        };\n      } finally {\n        try {\n          u && !u.done && (s = p.return) && s.call(p);\n        } finally {\n          if (r) throw r.error;\n        }\n      }\n\n      return !0;\n    }, t.prototype.notifyObserversWithPromise = function (t, e, n, o) {\n      var r = this;\n      void 0 === e && (e = -1);\n      var i = Promise.resolve(t);\n      if (!this._observers.length) return i;\n      var s = this._eventState;\n      return s.mask = e, s.target = n, s.currentTarget = o, s.skipNextObservers = !1, this._observers.forEach(function (n) {\n        s.skipNextObservers || n._willBeUnregistered || n.mask & e && (i = n.scope ? i.then(function (e) {\n          return s.lastReturnValue = e, n.callback.apply(n.scope, [t, s]);\n        }) : i.then(function (e) {\n          return s.lastReturnValue = e, n.callback(t, s);\n        }), n.unregisterOnNextCall && r._deferUnregister(n));\n      }), i.then(function () {\n        return t;\n      });\n    }, t.prototype.notifyObserver = function (t, e, n) {\n      void 0 === n && (n = -1);\n      var o = this._eventState;\n      o.mask = n, o.skipNextObservers = !1, t.callback(e, o);\n    }, t.prototype.hasObservers = function () {\n      return this._observers.length > 0;\n    }, t.prototype.clear = function () {\n      this._observers = new Array(), this._onObserverAdded = null;\n    }, t.prototype.clone = function () {\n      var e = new t();\n      return e._observers = this._observers.slice(0), e;\n    }, t.prototype.hasSpecificMask = function (t) {\n      var e, n;\n      void 0 === t && (t = -1);\n\n      try {\n        for (var o = i(this._observers), r = o.next(); !r.done; r = o.next()) {\n          var s = r.value;\n          if (s.mask & t || s.mask === t) return !0;\n        }\n      } catch (t) {\n        e = {\n          error: t\n        };\n      } finally {\n        try {\n          r && !r.done && (n = o.return) && n.call(o);\n        } finally {\n          if (e) throw e.error;\n        }\n      }\n\n      return !1;\n    }, t.prototype._deferUnregister = function (t) {\n      var e = this;\n      t.unregisterOnNextCall = !1, t._willBeUnregistered = !0, s.executeTask(function () {\n        return o(e, void 0, void 0, function () {\n          return r(this, function (e) {\n            return [2, this._remove(t)];\n          });\n        });\n      });\n    }, t.prototype._remove = function (t) {\n      if (!t) return !1;\n\n      var e = this._observers.indexOf(t);\n\n      return -1 !== e && (this._observers.splice(e, 1), !0);\n    }, t;\n  }();\n\n  e.Observable = l;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Vector4 = void 0;\n\n  var o = n(2),\n      r = n(6),\n      i = n(3),\n      s = function () {\n    function t(t, e, n, o) {\n      this.x = t, this.y = e, this.z = n, this.w = o;\n    }\n\n    return t.Add = function (e, n) {\n      return new t(e.x, e.y, e.z, e.w).addInPlace(n);\n    }, t.FromArray = function (e, n) {\n      return void 0 === n && (n = 0), new t(e[n], e[n + 1], e[n + 2], e[n + 3]);\n    }, t.FromArrayToRef = function (t, e, n) {\n      n.x = t[e], n.y = t[e + 1], n.z = t[e + 2], n.w = t[e + 3];\n    }, t.FromFloatArrayToRef = function (e, n, o) {\n      t.FromArrayToRef(e, n, o);\n    }, t.FromFloatsToRef = function (t, e, n, o, r) {\n      r.x = t, r.y = e, r.z = n, r.w = o;\n    }, t.Zero = function () {\n      return new t(0, 0, 0, 0);\n    }, t.One = function () {\n      return new t(1, 1, 1, 1);\n    }, t.Normalize = function (e) {\n      var n = t.Zero();\n      return t.NormalizeToRef(e, n), n;\n    }, t.NormalizeToRef = function (t, e) {\n      e.copyFrom(t), e.normalize();\n    }, t.Minimize = function (e, n) {\n      var o = new t(e.x, e.y, e.z, e.w);\n      return o.minimizeInPlace(n), o;\n    }, t.Maximize = function (e, n) {\n      var o = new t(e.x, e.y, e.z, e.w);\n      return o.maximizeInPlace(n), o;\n    }, t.Distance = function (e, n) {\n      return Math.sqrt(t.DistanceSquared(e, n));\n    }, t.DistanceSquared = function (t, e) {\n      var n = t.x - e.x,\n          o = t.y - e.y,\n          r = t.z - e.z,\n          i = t.w - e.w;\n      return n * n + o * o + r * r + i * i;\n    }, t.Center = function (e, n) {\n      var o = t.Add(e, n);\n      return o.scaleInPlace(.5), o;\n    }, t.TransformNormal = function (e, n) {\n      var o = t.Zero();\n      return t.TransformNormalToRef(e, n, o), o;\n    }, t.TransformNormalToRef = function (t, e, n) {\n      var o = e.m,\n          r = t.x * o[0] + t.y * o[4] + t.z * o[8],\n          i = t.x * o[1] + t.y * o[5] + t.z * o[9],\n          s = t.x * o[2] + t.y * o[6] + t.z * o[10];\n      n.x = r, n.y = i, n.z = s, n.w = t.w;\n    }, t.TransformNormalFromFloatsToRef = function (t, e, n, o, r, i) {\n      var s = r.m;\n      i.x = t * s[0] + e * s[4] + n * s[8], i.y = t * s[1] + e * s[5] + n * s[9], i.z = t * s[2] + e * s[6] + n * s[10], i.w = o;\n    }, t.prototype.toString = function () {\n      return \"{X: \" + this.x + \" Y:\" + this.y + \" Z:\" + this.z + \" W:\" + this.w + \"}\";\n    }, t.prototype.getClassName = function () {\n      return \"Vector4\";\n    }, t.prototype.getHashCode = function () {\n      var t = this.x || 0;\n      return t = 397 * (t = 397 * (t = 397 * t ^ (this.y || 0)) ^ (this.z || 0)) ^ (this.w || 0);\n    }, t.prototype.asArray = function () {\n      var t = new Array();\n      return this.toArray(t, 0), t;\n    }, t.prototype.toArray = function (t, e) {\n      return void 0 === e && (e = 0), t[e] = this.x, t[e + 1] = this.y, t[e + 2] = this.z, t[e + 3] = this.w, this;\n    }, t.prototype.addInPlace = function (t) {\n      return this.x += t.x, this.y += t.y, this.z += t.z, this.w += t.w, this;\n    }, t.prototype.add = function (e) {\n      return new t(this.x + e.x, this.y + e.y, this.z + e.z, this.w + e.w);\n    }, t.prototype.addToRef = function (t, e) {\n      return e.x = this.x + t.x, e.y = this.y + t.y, e.z = this.z + t.z, e.w = this.w + t.w, this;\n    }, t.prototype.subtractInPlace = function (t) {\n      return this.x -= t.x, this.y -= t.y, this.z -= t.z, this.w -= t.w, this;\n    }, t.prototype.subtract = function (e) {\n      return new t(this.x - e.x, this.y - e.y, this.z - e.z, this.w - e.w);\n    }, t.prototype.subtractToRef = function (t, e) {\n      return e.x = this.x - t.x, e.y = this.y - t.y, e.z = this.z - t.z, e.w = this.w - t.w, this;\n    }, t.prototype.subtractFromFloats = function (e, n, o, r) {\n      return new t(this.x - e, this.y - n, this.z - o, this.w - r);\n    }, t.prototype.subtractFromFloatsToRef = function (t, e, n, o, r) {\n      return r.x = this.x - t, r.y = this.y - e, r.z = this.z - n, r.w = this.w - o, this;\n    }, t.prototype.negate = function () {\n      return new t(-this.x, -this.y, -this.z, -this.w);\n    }, t.prototype.scaleInPlace = function (t) {\n      return this.x *= t, this.y *= t, this.z *= t, this.w *= t, this;\n    }, t.prototype.scale = function (e) {\n      return new t(this.x * e, this.y * e, this.z * e, this.w * e);\n    }, t.prototype.scaleToRef = function (t, e) {\n      return e.x = this.x * t, e.y = this.y * t, e.z = this.z * t, e.w = this.w * t, this;\n    }, t.prototype.scaleAndAddToRef = function (t, e) {\n      return e.x += this.x * t, e.y += this.y * t, e.z += this.z * t, e.w += this.w * t, this;\n    }, t.prototype.equals = function (t) {\n      return t && this.x === t.x && this.y === t.y && this.z === t.z && this.w === t.w;\n    }, t.prototype.equalsWithEpsilon = function (t, e) {\n      return void 0 === e && (e = o.Epsilon), t && r.Scalar.WithinEpsilon(this.x, t.x, e) && r.Scalar.WithinEpsilon(this.y, t.y, e) && r.Scalar.WithinEpsilon(this.z, t.z, e) && r.Scalar.WithinEpsilon(this.w, t.w, e);\n    }, t.prototype.equalsToFloats = function (t, e, n, o) {\n      return this.x === t && this.y === e && this.z === n && this.w === o;\n    }, t.prototype.multiplyInPlace = function (t) {\n      return this.x *= t.x, this.y *= t.y, this.z *= t.z, this.w *= t.w, this;\n    }, t.prototype.multiply = function (e) {\n      return new t(this.x * e.x, this.y * e.y, this.z * e.z, this.w * e.w);\n    }, t.prototype.multiplyToRef = function (t, e) {\n      return e.x = this.x * t.x, e.y = this.y * t.y, e.z = this.z * t.z, e.w = this.w * t.w, this;\n    }, t.prototype.multiplyByFloats = function (e, n, o, r) {\n      return new t(this.x * e, this.y * n, this.z * o, this.w * r);\n    }, t.prototype.divide = function (e) {\n      return new t(this.x / e.x, this.y / e.y, this.z / e.z, this.w / e.w);\n    }, t.prototype.divideToRef = function (t, e) {\n      return e.x = this.x / t.x, e.y = this.y / t.y, e.z = this.z / t.z, e.w = this.w / t.w, this;\n    }, t.prototype.divideInPlace = function (t) {\n      return this.divideToRef(t, this);\n    }, t.prototype.minimizeInPlace = function (t) {\n      return t.x < this.x && (this.x = t.x), t.y < this.y && (this.y = t.y), t.z < this.z && (this.z = t.z), t.w < this.w && (this.w = t.w), this;\n    }, t.prototype.maximizeInPlace = function (t) {\n      return t.x > this.x && (this.x = t.x), t.y > this.y && (this.y = t.y), t.z > this.z && (this.z = t.z), t.w > this.w && (this.w = t.w), this;\n    }, t.prototype.floor = function () {\n      return new t(Math.floor(this.x), Math.floor(this.y), Math.floor(this.z), Math.floor(this.w));\n    }, t.prototype.fract = function () {\n      return new t(this.x - Math.floor(this.x), this.y - Math.floor(this.y), this.z - Math.floor(this.z), this.w - Math.floor(this.w));\n    }, t.prototype.length = function () {\n      return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n    }, t.prototype.lengthSquared = function () {\n      return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n    }, t.prototype.normalize = function () {\n      var t = this.length();\n      return 0 === t ? this : this.scaleInPlace(1 / t);\n    }, t.prototype.toVector3 = function () {\n      return new i.Vector3(this.x, this.y, this.z);\n    }, t.prototype.clone = function () {\n      return new t(this.x, this.y, this.z, this.w);\n    }, t.prototype.copyFrom = function (t) {\n      return this.x = t.x, this.y = t.y, this.z = t.z, this.w = t.w, this;\n    }, t.prototype.copyFromFloats = function (t, e, n, o) {\n      return this.x = t, this.y = e, this.z = n, this.w = o, this;\n    }, t.prototype.set = function (t, e, n, o) {\n      return this.copyFromFloats(t, e, n, o);\n    }, t.prototype.setAll = function (t) {\n      return this.x = this.y = this.z = this.w = t, this;\n    }, t;\n  }();\n\n  e.Vector4 = s;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Angle = void 0;\n\n  var o = function () {\n    function t(t) {\n      this._radians = t, this._radians < 0 && (this._radians += 2 * Math.PI);\n    }\n\n    return t.BetweenTwoPoints = function (e, n) {\n      var o = n.subtract(e);\n      return new t(Math.atan2(o.y, o.x));\n    }, t.FromRadians = function (e) {\n      return new t(e);\n    }, t.FromDegrees = function (e) {\n      return new t(e * Math.PI / 180);\n    }, t.prototype.degrees = function () {\n      return 180 * this._radians / Math.PI;\n    }, t.prototype.radians = function () {\n      return this._radians;\n    }, t;\n  }();\n\n  e.Angle = o;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Arc2 = void 0;\n\n  var o = n(22),\n      r = n(15),\n      i = n(2),\n      s = function s(t, e, n) {\n    this.startPoint = t, this.midPoint = e, this.endPoint = n;\n    var s = Math.pow(e.x, 2) + Math.pow(e.y, 2),\n        a = (Math.pow(t.x, 2) + Math.pow(t.y, 2) - s) / 2,\n        p = (s - Math.pow(n.x, 2) - Math.pow(n.y, 2)) / 2,\n        u = (t.x - e.x) * (e.y - n.y) - (e.x - n.x) * (t.y - e.y);\n    this.centerPoint = new r.Vector2((a * (e.y - n.y) - p * (t.y - e.y)) / u, ((t.x - e.x) * p - (e.x - n.x) * a) / u), this.radius = this.centerPoint.subtract(this.startPoint).length(), this.startAngle = o.Angle.BetweenTwoPoints(this.centerPoint, this.startPoint);\n    var l = this.startAngle.degrees(),\n        c = o.Angle.BetweenTwoPoints(this.centerPoint, this.midPoint).degrees(),\n        h = o.Angle.BetweenTwoPoints(this.centerPoint, this.endPoint).degrees();\n    c - l > 180 && (c -= 360), c - l < -180 && (c += 360), h - c > 180 && (h -= 360), h - c < -180 && (h += 360), this.orientation = c - l < 0 ? i.Orientation.CW : i.Orientation.CCW, this.angle = o.Angle.FromDegrees(this.orientation === i.Orientation.CW ? l - h : h - l);\n  };\n\n  e.Arc2 = s;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Color4 = void 0;\n\n  var o = n(6),\n      r = n(2),\n      i = function () {\n    function t(t, e, n, o) {\n      void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === n && (n = 0), void 0 === o && (o = 1), this.r = t, this.g = e, this.b = n, this.a = o;\n    }\n\n    return t.FromHexString = function (e) {\n      if (\"#\" !== e.substring(0, 1) || 9 !== e.length) return new t(0, 0, 0, 0);\n      var n = parseInt(e.substring(1, 3), 16),\n          o = parseInt(e.substring(3, 5), 16),\n          r = parseInt(e.substring(5, 7), 16),\n          i = parseInt(e.substring(7, 9), 16);\n      return t.FromInts(n, o, r, i);\n    }, t.Lerp = function (e, n, o) {\n      var r = new t(0, 0, 0, 0);\n      return t.LerpToRef(e, n, o, r), r;\n    }, t.LerpToRef = function (t, e, n, o) {\n      o.r = t.r + (e.r - t.r) * n, o.g = t.g + (e.g - t.g) * n, o.b = t.b + (e.b - t.b) * n, o.a = t.a + (e.a - t.a) * n;\n    }, t.Red = function () {\n      return new t(1, 0, 0, 1);\n    }, t.Green = function () {\n      return new t(0, 1, 0, 1);\n    }, t.Blue = function () {\n      return new t(0, 0, 1, 1);\n    }, t.Black = function () {\n      return new t(0, 0, 0, 1);\n    }, t.White = function () {\n      return new t(1, 1, 1, 1);\n    }, t.Purple = function () {\n      return new t(.5, 0, .5, 1);\n    }, t.Magenta = function () {\n      return new t(1, 0, 1, 1);\n    }, t.Yellow = function () {\n      return new t(1, 1, 0, 1);\n    }, t.Gray = function () {\n      return new t(.5, .5, .5, 1);\n    }, t.Teal = function () {\n      return new t(0, 1, 1, 1);\n    }, t.Clear = function () {\n      return new t(0, 0, 0, 0);\n    }, t.FromColor3 = function (e, n) {\n      return void 0 === n && (n = 1), new t(e.r, e.g, e.b, n);\n    }, t.FromArray = function (e, n) {\n      return void 0 === n && (n = 0), new t(e[n], e[n + 1], e[n + 2], e[n + 3]);\n    }, t.FromInts = function (e, n, o, r) {\n      return new t(e / 255, n / 255, o / 255, r / 255);\n    }, t.CheckColors4 = function (t, e) {\n      if (t.length === 3 * e) {\n        for (var n = [], o = 0; o < t.length; o += 3) {\n          var r = o / 3 * 4;\n          n[r] = t[o], n[r + 1] = t[o + 1], n[r + 2] = t[o + 2], n[r + 3] = 1;\n        }\n\n        return n;\n      }\n\n      return t;\n    }, t.prototype.addInPlace = function (t) {\n      return this.r += t.r, this.g += t.g, this.b += t.b, this.a += t.a, this;\n    }, t.prototype.asArray = function () {\n      var t = new Array();\n      return this.toArray(t, 0), t;\n    }, t.prototype.toArray = function (t, e) {\n      return void 0 === e && (e = 0), t[e] = this.r, t[e + 1] = this.g, t[e + 2] = this.b, t[e + 3] = this.a, this;\n    }, t.prototype.add = function (e) {\n      return new t(this.r + e.r, this.g + e.g, this.b + e.b, this.a + e.a);\n    }, t.prototype.subtract = function (e) {\n      return new t(this.r - e.r, this.g - e.g, this.b - e.b, this.a - e.a);\n    }, t.prototype.subtractToRef = function (t, e) {\n      return e.r = this.r - t.r, e.g = this.g - t.g, e.b = this.b - t.b, e.a = this.a - t.a, this;\n    }, t.prototype.scale = function (e) {\n      return new t(this.r * e, this.g * e, this.b * e, this.a * e);\n    }, t.prototype.scaleToRef = function (t, e) {\n      return e.r = this.r * t, e.g = this.g * t, e.b = this.b * t, e.a = this.a * t, this;\n    }, t.prototype.scaleAndAddToRef = function (t, e) {\n      return e.r += this.r * t, e.g += this.g * t, e.b += this.b * t, e.a += this.a * t, this;\n    }, t.prototype.clampToRef = function (t, e, n) {\n      return void 0 === t && (t = 0), void 0 === e && (e = 1), n.r = o.Scalar.Clamp(this.r, t, e), n.g = o.Scalar.Clamp(this.g, t, e), n.b = o.Scalar.Clamp(this.b, t, e), n.a = o.Scalar.Clamp(this.a, t, e), this;\n    }, t.prototype.multiply = function (e) {\n      return new t(this.r * e.r, this.g * e.g, this.b * e.b, this.a * e.a);\n    }, t.prototype.multiplyToRef = function (t, e) {\n      return e.r = this.r * t.r, e.g = this.g * t.g, e.b = this.b * t.b, e.a = this.a * t.a, e;\n    }, t.prototype.toString = function () {\n      return \"{R: \" + this.r + \" G:\" + this.g + \" B:\" + this.b + \" A:\" + this.a + \"}\";\n    }, t.prototype.getClassName = function () {\n      return \"Color4\";\n    }, t.prototype.getHashCode = function () {\n      var t = this.r || 0;\n      return t = 397 * (t = 397 * (t = 397 * t ^ (this.g || 0)) ^ (this.b || 0)) ^ (this.a || 0);\n    }, t.prototype.clone = function () {\n      return new t(this.r, this.g, this.b, this.a);\n    }, t.prototype.copyFrom = function (t) {\n      return this.r = t.r, this.g = t.g, this.b = t.b, this.a = t.a, this;\n    }, t.prototype.copyFromFloats = function (t, e, n, o) {\n      return this.r = t, this.g = e, this.b = n, this.a = o, this;\n    }, t.prototype.set = function (t, e, n, o) {\n      return this.copyFromFloats(t, e, n, o);\n    }, t.prototype.toHexString = function () {\n      var t = 255 * this.r | 0,\n          e = 255 * this.g | 0,\n          n = 255 * this.b | 0,\n          r = 255 * this.a | 0;\n      return \"#\" + o.Scalar.ToHex(t) + o.Scalar.ToHex(e) + o.Scalar.ToHex(n) + o.Scalar.ToHex(r);\n    }, t.prototype.toLinearSpace = function () {\n      var e = new t();\n      return this.toLinearSpaceToRef(e), e;\n    }, t.prototype.toLinearSpaceToRef = function (t) {\n      return t.r = Math.pow(this.r, r.ToLinearSpace), t.g = Math.pow(this.g, r.ToLinearSpace), t.b = Math.pow(this.b, r.ToLinearSpace), t.a = this.a, this;\n    }, t.prototype.toGammaSpace = function () {\n      var e = new t();\n      return this.toGammaSpaceToRef(e), e;\n    }, t.prototype.toGammaSpaceToRef = function (t) {\n      return t.r = Math.pow(this.r, r.ToGammaSpace), t.g = Math.pow(this.g, r.ToGammaSpace), t.b = Math.pow(this.b, r.ToGammaSpace), t.a = this.a, this;\n    }, t;\n  }();\n\n  e.Color4 = i;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Plane = void 0;\n\n  var o = n(3),\n      r = n(11),\n      i = n(9),\n      s = function () {\n    function t(t, e, n, r) {\n      this.normal = new o.Vector3(t, e, n), this.d = r;\n    }\n\n    return t.FromArray = function (e) {\n      return new t(e[0], e[1], e[2], e[3]);\n    }, t.FromPoints = function (e, n, o) {\n      var r = new t(0, 0, 0, 0);\n      return r.copyFromPoints(e, n, o), r;\n    }, t.FromPositionAndNormal = function (e, n) {\n      var o = new t(0, 0, 0, 0);\n      return n.normalize(), o.normal = n, o.d = -(n.x * e.x + n.y * e.y + n.z * e.z), o;\n    }, t.SignedDistanceToPlaneFromPositionAndNormal = function (t, e, n) {\n      var r = -(e.x * t.x + e.y * t.y + e.z * t.z);\n      return o.Vector3.Dot(n, e) + r;\n    }, t.prototype.asArray = function () {\n      return [this.normal.x, this.normal.y, this.normal.z, this.d];\n    }, t.prototype.clone = function () {\n      return new t(this.normal.x, this.normal.y, this.normal.z, this.d);\n    }, t.prototype.getClassName = function () {\n      return \"Plane\";\n    }, t.prototype.getHashCode = function () {\n      var t = this.normal.getHashCode();\n      return t = 397 * t ^ (this.d || 0);\n    }, t.prototype.normalize = function () {\n      var t = Math.sqrt(this.normal.x * this.normal.x + this.normal.y * this.normal.y + this.normal.z * this.normal.z),\n          e = 0;\n      return 0 !== t && (e = 1 / t), this.normal.x *= e, this.normal.y *= e, this.normal.z *= e, this.d *= e, this;\n    }, t.prototype.transform = function (e) {\n      var n = i.MathTmp.Matrix[0];\n      r.Matrix.TransposeToRef(e, n);\n      var o = n.m,\n          s = this.normal.x,\n          a = this.normal.y,\n          p = this.normal.z,\n          u = this.d;\n      return new t(s * o[0] + a * o[1] + p * o[2] + u * o[3], s * o[4] + a * o[5] + p * o[6] + u * o[7], s * o[8] + a * o[9] + p * o[10] + u * o[11], s * o[12] + a * o[13] + p * o[14] + u * o[15]);\n    }, t.prototype.dotCoordinate = function (t) {\n      return this.normal.x * t.x + this.normal.y * t.y + this.normal.z * t.z + this.d;\n    }, t.prototype.copyFromPoints = function (t, e, n) {\n      var o,\n          r = e.x - t.x,\n          i = e.y - t.y,\n          s = e.z - t.z,\n          a = n.x - t.x,\n          p = n.y - t.y,\n          u = n.z - t.z,\n          l = i * u - s * p,\n          c = s * a - r * u,\n          h = r * p - i * a,\n          d = Math.sqrt(l * l + c * c + h * h);\n      return o = 0 !== d ? 1 / d : 0, this.normal.x = l * o, this.normal.y = c * o, this.normal.z = h * o, this.d = -(this.normal.x * t.x + this.normal.y * t.y + this.normal.z * t.z), this;\n    }, t.prototype.isFrontFacingTo = function (t, e) {\n      return o.Vector3.Dot(this.normal, t) <= e;\n    }, t.prototype.signedDistanceTo = function (t) {\n      return o.Vector3.Dot(t, this.normal) + this.d;\n    }, t;\n  }();\n\n  e.Plane = s;\n}, function (t, e, n) {\n  \"use strict\";\n\n  var _o3,\n      r = this && this.__extends || (_o3 = function o(t, e) {\n    return (_o3 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (t, e) {\n      t.__proto__ = e;\n    } || function (t, e) {\n      for (var n in e) {\n        Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n      }\n    })(t, e);\n  }, function (t, e) {\n    function n() {\n      this.constructor = t;\n    }\n\n    _o3(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n  }),\n      i = this && this.__assign || function () {\n    return (i = Object.assign || function (t) {\n      for (var e, n = 1, o = arguments.length; n < o; n++) {\n        for (var r in e = arguments[n]) {\n          Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]);\n        }\n      }\n\n      return t;\n    }).apply(this, arguments);\n  },\n      s = this && this.__decorate || function (t, e, n, o) {\n    var r,\n        i = arguments.length,\n        s = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) s = Reflect.decorate(t, e, n, o);else for (var a = t.length - 1; a >= 0; a--) {\n      (r = t[a]) && (s = (i < 3 ? r(s) : i > 3 ? r(e, n, s) : r(e, n)) || s);\n    }\n    return i > 3 && s && Object.defineProperty(e, n, s), s;\n  };\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.AnimationState = void 0;\n\n  var a = n(0),\n      p = n(1),\n      u = {\n    looping: !0,\n    speed: 1,\n    weight: 1\n  },\n      l = function (t) {\n    function e(e, n) {\n      void 0 === n && (n = u);\n      var o = t.call(this) || this;\n      return o.isAnimationClip = !0, o.looping = u.looping, o.weight = u.weight, o.playing = !1, o.shouldReset = !1, o.speed = u.speed, o.name = p.newId(\"AnimClip\"), o.clip = e, o.setParams(i({}, n)), o;\n    }\n\n    return r(e, t), e.prototype.setParams = function (t) {\n      return this.looping = void 0 !== t.looping ? t.looping : this.looping, this.speed = t.speed || this.speed, this;\n    }, e.prototype.toJSON = function () {\n      var e = JSON.parse(JSON.stringify(t.prototype.toJSON.call(this)));\n      return this.shouldReset && (this.shouldReset = !1), e;\n    }, e.prototype.play = function () {\n      this.playing = !0;\n    }, e.prototype.pause = function () {\n      this.playing = !1;\n    }, e.prototype.reset = function () {\n      this.shouldReset = !0;\n    }, e.prototype.stop = function () {\n      this.reset(), this.pause();\n    }, s([a.ObservableComponent.readonly], e.prototype, \"clip\", void 0), s([a.ObservableComponent.field], e.prototype, \"looping\", void 0), s([a.ObservableComponent.field], e.prototype, \"weight\", void 0), s([a.ObservableComponent.field], e.prototype, \"playing\", void 0), s([a.ObservableComponent.field], e.prototype, \"shouldReset\", void 0), s([a.ObservableComponent.field], e.prototype, \"speed\", void 0), s([a.ObservableComponent.readonly], e.prototype, \"name\", void 0), e;\n  }(a.ObservableComponent);\n\n  e.AnimationState = l;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.AVATAR_OBSERVABLE = e.InputEventType = void 0, function (t) {\n    t[t.DOWN = 0] = \"DOWN\", t[t.UP = 1] = \"UP\";\n  }(e.InputEventType || (e.InputEventType = {})), e.AVATAR_OBSERVABLE = \"AVATAR_OBSERVABLE\";\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.PhysicsCast = void 0;\n  var o,\n      r = n(5),\n      i = n(1),\n      s = n(29);\n  !function (t) {\n    t.HitFirst = \"rqhf\", t.HitAll = \"rqha\";\n  }(o || (o = {}));\n\n  var a = function () {\n    function t() {\n      this.queries = {};\n    }\n\n    return Object.defineProperty(t, \"instance\", {\n      get: function get() {\n        return t.ensureInstance(), t._instance;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), t.ensureInstance = function () {\n      t._instance || (t._instance = new t());\n    }, t.prototype.getRayFromCamera = function (t) {\n      var e = s.Camera.instance.rotation,\n          n = r.Matrix.Identity();\n      e.toRotationMatrix(n);\n      var o = r.Vector3.TransformCoordinates(r.Vector3.Forward(), n);\n      return {\n        origin: s.Camera.instance.position,\n        direction: o,\n        distance: t\n      };\n    }, t.prototype.getRayFromPositions = function (t, e) {\n      var n = e.subtract(t),\n          o = n.length();\n      return {\n        origin: t,\n        direction: n.normalize(),\n        distance: o\n      };\n    }, t.prototype.hitFirst = function (t, e, n) {\n      var r = \"number\" == typeof n ? o.HitFirst + n : i.uuid();\n      this.queries[r] = e, dcl && dcl.query(\"raycast\", {\n        queryId: r,\n        queryType: \"HitFirst\",\n        ray: t\n      });\n    }, t.prototype.hitAll = function (t, e, n) {\n      var r = \"number\" == typeof n ? o.HitAll + n : i.uuid();\n      this.queries[r] = e, dcl && dcl.query(\"raycast\", {\n        queryId: r,\n        queryType: \"HitAll\",\n        ray: t\n      });\n    }, t.prototype.hitFirstAvatar = function (t, e) {\n      i.log(\"not implemented yet\");\n    }, t.prototype.hitAllAvatars = function (t, e) {\n      i.log(\"not implemented yet\");\n    }, t.prototype.handleRaycastHitFirstResponse = function (t) {\n      this.queries[t.payload.queryId](t.payload.payload), delete this.queries[t.payload.queryId];\n    }, t.prototype.handleRaycastHitAllResponse = function (t) {\n      this.queries[t.payload.queryId](t.payload.payload), delete this.queries[t.payload.queryId];\n    }, t;\n  }();\n\n  e.PhysicsCast = a;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Camera = void 0;\n\n  var o = n(5),\n      r = function () {\n    function t() {\n      var t = this;\n      this.position = new o.Vector3(), this.rotation = new o.Quaternion(), this.feetPosition = new o.Vector3(), this.worldPosition = new o.Vector3(), this.lastEventPosition = {\n        x: 0,\n        y: 0,\n        z: 0\n      }, this.lastEventWorldPosition = {\n        x: 0,\n        y: 0,\n        z: 0\n      }, this.lastEventRotation = {\n        x: 0,\n        y: 0,\n        z: 0,\n        w: 1\n      }, this._playerHeight = 1.6, \"undefined\" != typeof dcl && (dcl.subscribe(\"positionChanged\"), dcl.subscribe(\"rotationChanged\"), dcl.onEvent(function (e) {\n        switch (e.type) {\n          case \"positionChanged\":\n            t.positionChanged(e.data);\n            break;\n\n          case \"rotationChanged\":\n            t.rotationChanged(e.data);\n        }\n      })), Object.defineProperty(this.position, \"x\", {\n        get: function get() {\n          return t.lastEventPosition.x;\n        }\n      }), Object.defineProperty(this.position, \"y\", {\n        get: function get() {\n          return t.lastEventPosition.y;\n        }\n      }), Object.defineProperty(this.position, \"z\", {\n        get: function get() {\n          return t.lastEventPosition.z;\n        }\n      }), Object.defineProperty(this.worldPosition, \"x\", {\n        get: function get() {\n          return t.lastEventWorldPosition.x;\n        }\n      }), Object.defineProperty(this.worldPosition, \"y\", {\n        get: function get() {\n          return t.lastEventWorldPosition.y;\n        }\n      }), Object.defineProperty(this.worldPosition, \"z\", {\n        get: function get() {\n          return t.lastEventWorldPosition.z;\n        }\n      }), Object.defineProperty(this.feetPosition, \"x\", {\n        get: function get() {\n          return t.lastEventPosition.x;\n        }\n      }), Object.defineProperty(this.feetPosition, \"y\", {\n        get: function get() {\n          return t.lastEventPosition.y - t.playerHeight;\n        }\n      }), Object.defineProperty(this.feetPosition, \"z\", {\n        get: function get() {\n          return t.lastEventPosition.z;\n        }\n      }), Object.defineProperty(this.rotation, \"x\", {\n        get: function get() {\n          return t.lastEventRotation.x;\n        }\n      }), Object.defineProperty(this.rotation, \"y\", {\n        get: function get() {\n          return t.lastEventRotation.y;\n        }\n      }), Object.defineProperty(this.rotation, \"z\", {\n        get: function get() {\n          return t.lastEventRotation.z;\n        }\n      }), Object.defineProperty(this.rotation, \"w\", {\n        get: function get() {\n          return t.lastEventRotation.w;\n        }\n      });\n    }\n\n    return Object.defineProperty(t, \"instance\", {\n      get: function get() {\n        return t._instance || (t._instance = new t()), t._instance;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(t.prototype, \"playerHeight\", {\n      get: function get() {\n        return this._playerHeight;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), t.prototype.positionChanged = function (t) {\n      this.lastEventPosition = t.position, this.lastEventWorldPosition = t.cameraPosition, this._playerHeight = t.playerHeight;\n    }, t.prototype.rotationChanged = function (t) {\n      this.lastEventRotation = t.quaternion;\n    }, t;\n  }();\n\n  e.Camera = r;\n}, function (t, e, n) {\n  \"use strict\";\n\n  var o = this && this.__createBinding || (Object.create ? function (t, e, n, o) {\n    void 0 === o && (o = n), Object.defineProperty(t, o, {\n      enumerable: !0,\n      get: function get() {\n        return e[n];\n      }\n    });\n  } : function (t, e, n, o) {\n    void 0 === o && (o = n), t[o] = e[n];\n  }),\n      r = this && this.__exportStar || function (t, e) {\n    for (var n in t) {\n      \"default\" === n || Object.prototype.hasOwnProperty.call(e, n) || o(e, t, n);\n    }\n  };\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.engine = void 0, r(n(31), e), r(n(17), e), r(n(0), e), r(n(12), e), r(n(7), e), r(n(19), e), r(n(1), e), r(n(20), e), r(n(18), e), r(n(8), e), r(n(33), e), r(n(34), e);\n  var i = n(35),\n      s = n(17),\n      a = new (n(12).Entity)(\"scene\");\n  a.uuid = \"0\";\n  var p = new s.Engine(a);\n  e.engine = p, n(0).DisposableComponent.engine = p, \"undefined\" != typeof dcl && p.addSystem(new i.DecentralandSynchronizationSystem(dcl), 1 / 0);\n  var u = n(14);\n  p.addSystem(u.uuidEventSystem), p.addSystem(u.pointerEventSystem), p.addSystem(u.raycastEventSystem), r(n(27), e), r(n(4), e), r(n(14), e), r(n(13), e), r(n(29), e), r(n(5), e), r(n(26), e), r(n(16), e), r(n(44), e), r(n(45), e), r(n(46), e), r(n(47), e), r(n(48), e), r(n(49), e), r(n(28), e);\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Attachable = void 0;\n\n  var o = function () {\n    function t() {}\n\n    return t.AVATAR = {\n      getEntityRepresentation: function getEntityRepresentation(t) {\n        return t.avatarEntity;\n      }\n    }, t.FIRST_PERSON_CAMERA = {\n      getEntityRepresentation: function getEntityRepresentation(t) {\n        return t.firstPersonCameraEntity;\n      }\n    }, t;\n  }();\n\n  e.Attachable = o;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.ComponentGroup = void 0;\n\n  var o = n(0),\n      r = function () {\n    function t() {\n      for (var t = [], e = 0; e < arguments.length; e++) {\n        t[e] = arguments[e];\n      }\n\n      if (this.entities = [], this.active = !1, this._requiresNames = [], !t) throw new Error(\"ComponentGroup: Could not load the requires list\");\n      if (!(t instanceof Array)) throw new Error(\"ComponentGroup: requires list is not an Array\");\n      Object.defineProperty(this, \"requires\", {\n        get: function get() {\n          return t.slice();\n        }\n      }), Object.defineProperty(this, \"requiresNames\", {\n        get: function get() {\n          return this._requiresNames.slice();\n        }\n      });\n\n      for (var n = function n(e) {\n        var n = t[e],\n            i = null;\n        if (!n) throw new Error(\"ComponentGroup: the required component at location \" + e + \" is invalid\");\n\n        try {\n          i = o.getComponentName(n);\n        } catch (t) {\n          throw new Error(\"ComponentGroup: the required component at location \" + e + \" is not registered as a @Component. Remember to provide the class of the component, not the name\");\n        }\n\n        if (r._requiresNames.some(function (t) {\n          return t === i;\n        })) throw new Error(\"ComponentGroup: the required component list has a repeated name \" + i);\n\n        r._requiresNames.push(i);\n      }, r = this, i = 0; i < t.length; i++) {\n        n(i);\n      }\n    }\n\n    return t.prototype.hasEntity = function (t) {\n      return !!t.isAddedToEngine() && -1 !== this.entities.indexOf(t);\n    }, t.prototype.addEntity = function (t) {\n      if (!t.isAddedToEngine()) throw new TypeError(\"ComponentGroup: Cannot add a entity that is not added to the engine\");\n      -1 === this.entities.indexOf(t) && this.entities.push(t);\n    }, t.prototype.removeEntity = function (t) {\n      var e = this.entities.indexOf(t);\n      -1 !== e && this.entities.splice(e, 1);\n    }, t.prototype.componentRemoved = function (t, e) {\n      -1 !== this._requiresNames.indexOf(e) && this.removeEntity(t);\n    }, t.prototype.meetsRequirements = function (t) {\n      for (var e = 0; e < this._requiresNames.length; e++) {\n        if (!(this._requiresNames[e] in t.components)) return !1;\n      }\n\n      return !0;\n    }, t;\n  }();\n\n  e.ComponentGroup = r;\n}, function (t, e, n) {\n  \"use strict\";\n\n  var o;\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.teleportTo = void 0, e.teleportTo = function (t) {\n    var e, n;\n    e = \"requestTeleport\", n = [t], void 0 === o && \"undefined\" != typeof dcl && (o = dcl.loadModule(\"@decentraland/UserActionModule\")), void 0 !== o && \"undefined\" != typeof dcl && o.then(function (t) {\n      dcl.callRpc(t.rpcHandle, e, n);\n    });\n  };\n}, function (t, e, n) {\n  \"use strict\";\n\n  var o;\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.movePlayerTo = void 0, e.movePlayerTo = function (t, e) {\n    var n, r;\n    n = \"movePlayerTo\", r = [t, e], void 0 === o && \"undefined\" != typeof dcl && (o = dcl.loadModule(\"@decentraland/RestrictedActionModule\")), void 0 !== o && \"undefined\" != typeof dcl && o.then(function (t) {\n      dcl.callRpc(t.rpcHandle, n, r);\n    });\n  };\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.DecentralandSynchronizationSystem = void 0;\n\n  var o = n(0),\n      r = n(7),\n      i = n(13),\n      s = function () {\n    function t(t) {\n      this.dcl = t, this.cachedComponents = {};\n    }\n\n    return t.prototype.activate = function (t) {\n      var e = this;\n      this.engine = t, t.eventManager.addListener(r.ComponentAdded, this, this.componentAdded), t.eventManager.addListener(r.ComponentRemoved, this, this.componentRemoved), t.eventManager.addListener(o.DisposableComponentCreated, this, this.disposableComponentCreated), t.eventManager.addListener(o.DisposableComponentRemoved, this, this.disposableComponentRemoved), t.eventManager.addListener(o.DisposableComponentUpdated, this, this.disposableComponentUpdated), t.eventManager.addListener(r.ParentChanged, this, this.parentChanged);\n      var n = t.rootEntity.uuid;\n      this.dcl.addEntity(n), this.dcl.onUpdate(function (n) {\n        t.update(n), e.presentEntities();\n      }), this.dcl.onEvent(function (e) {\n        var n = e.data;\n\n        switch (e.type) {\n          case \"uuidEvent\":\n            t.eventManager.fireEvent(new i.UUIDEvent(n.uuid, n.payload));\n            break;\n\n          case \"raycastResponse\":\n            (\"HitFirst\" === n.queryType || \"HitAll\" === n.queryType) && t.eventManager.fireEvent(new i.RaycastResponse(n));\n            break;\n\n          case \"pointerEvent\":\n            t.eventManager.fireEvent(new i.PointerEvent(n.payload));\n        }\n      });\n    }, t.prototype.onAddEntity = function (t) {\n      if (t && t.isAddedToEngine()) {\n        var e = t.uuid,\n            n = t.getParent();\n\n        for (var r in this.dcl.addEntity(e), n && this.dcl.setParent(e, n.uuid), this.cachedComponents[e] = {}, t.components) {\n          var i = t.components[r],\n              s = o.getComponentClassId(i);\n          if (null !== s) if (o.isDisposableComponent(i)) this.dcl.attachEntityComponent(t.uuid, r, o.getComponentId(i));else {\n            var a = JSON.stringify(i);\n            this.dcl.updateEntityComponent(e, r, s, a), this.cachedComponents[e][r] = a;\n          }\n        }\n      }\n    }, t.prototype.onRemoveEntity = function (t) {\n      if (t.isAddedToEngine()) {\n        var e = t.uuid;\n        this.dcl.removeEntity(e), delete this.cachedComponents[e];\n      }\n    }, t.prototype.presentEntities = function () {\n      for (var t in this.engine.entities) {\n        var e = this.engine.entities[t];\n\n        for (var n in e.components) {\n          var r = e.components[n],\n              i = o.getComponentClassId(r);\n\n          if (null !== i && !o.isDisposableComponent(r)) {\n            var s = this.getJsonIfDirty(e.uuid, n, r);\n            s && (this.dcl.updateEntityComponent(e.uuid, n, i, s), this.clearDirty(e.uuid, n, r, s));\n          }\n        }\n      }\n\n      for (var a in this.engine.disposableComponents) {\n        (r = this.engine.disposableComponents[a]) instanceof o.ObservableComponent && r.dirty && (this.dcl.componentUpdated(a, JSON.stringify(r)), r.dirty = !1);\n      }\n    }, t.prototype.componentAdded = function (t) {\n      if (t.entity.isAddedToEngine()) {\n        var e = t.entity.components[t.componentName];\n        if (o.isDisposableComponent(e)) this.dcl.attachEntityComponent(t.entity.uuid, t.componentName, o.getComponentId(e));else if (null !== t.classId) {\n          var n = JSON.stringify(e);\n          this.dcl.updateEntityComponent(t.entity.uuid, t.componentName, t.classId, n), this.cachedComponents[t.entity.uuid][t.componentName] = n;\n        }\n      }\n    }, t.prototype.componentRemoved = function (t) {\n      t.entity.isAddedToEngine() && (this.dcl.removeEntityComponent(t.entity.uuid, t.componentName), delete this.cachedComponents[t.entity.uuid][t.componentName]);\n    }, t.prototype.disposableComponentCreated = function (t) {\n      this.dcl.componentCreated(t.componentId, t.componentName, t.classId);\n    }, t.prototype.disposableComponentRemoved = function (t) {\n      this.dcl.componentDisposed(t.componentId);\n    }, t.prototype.disposableComponentUpdated = function (t) {\n      this.dcl.componentUpdated(t.componentId, JSON.stringify(t.component));\n    }, t.prototype.parentChanged = function (t) {\n      this.dcl.setParent(t.entity.uuid, t.parent ? t.parent.uuid : \"0\");\n    }, t.prototype.getJsonIfDirty = function (t, e, n) {\n      var o = JSON.stringify(n);\n      return o !== this.cachedComponents[t][e] && o;\n    }, t.prototype.clearDirty = function (t, e, n, o) {\n      this.cachedComponents[t][e] = o;\n    }, t;\n  }();\n\n  e.DecentralandSynchronizationSystem = s;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Axis = void 0;\n\n  var o = n(3),\n      r = function () {\n    function t() {}\n\n    return t.X = new o.Vector3(1, 0, 0), t.Y = new o.Vector3(0, 1, 0), t.Z = new o.Vector3(0, 0, 1), t;\n  }();\n\n  e.Axis = r;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.BezierCurve = void 0;\n\n  var o = function () {\n    function t() {}\n\n    return t.Interpolate = function (t, e, n, o, r) {\n      for (var i = 1 - 3 * o + 3 * e, s = 3 * o - 6 * e, a = 3 * e, p = t, u = 0; u < 5; u++) {\n        var l = p * p;\n        p -= (i * (l * p) + s * l + a * p - t) * (1 / (3 * i * l + 2 * s * p + a)), p = Math.min(1, Math.max(0, p));\n      }\n\n      return 3 * Math.pow(1 - p, 2) * p * n + 3 * (1 - p) * Math.pow(p, 2) * r + Math.pow(p, 3);\n    }, t;\n  }();\n\n  e.BezierCurve = o;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Color3 = void 0;\n\n  var o = n(2),\n      r = n(24),\n      i = n(6),\n      s = function () {\n    function t(t, e, n) {\n      void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === n && (n = 0), this.r = t, this.g = e, this.b = n;\n    }\n\n    return t.FromHexString = function (e) {\n      if (\"#\" !== e.substring(0, 1) || 7 !== e.length) return new t(0, 0, 0);\n      var n = parseInt(e.substring(1, 3), 16),\n          o = parseInt(e.substring(3, 5), 16),\n          r = parseInt(e.substring(5, 7), 16);\n      return t.FromInts(n, o, r);\n    }, t.FromArray = function (e, n) {\n      return void 0 === n && (n = 0), new t(e[n], e[n + 1], e[n + 2]);\n    }, t.FromInts = function (e, n, o) {\n      return new t(e / 255, n / 255, o / 255);\n    }, t.Lerp = function (e, n, o) {\n      var r = new t(0, 0, 0);\n      return t.LerpToRef(e, n, o, r), r;\n    }, t.LerpToRef = function (t, e, n, o) {\n      o.r = t.r + (e.r - t.r) * n, o.g = t.g + (e.g - t.g) * n, o.b = t.b + (e.b - t.b) * n;\n    }, t.Red = function () {\n      return new t(1, 0, 0);\n    }, t.Green = function () {\n      return new t(0, 1, 0);\n    }, t.Blue = function () {\n      return new t(0, 0, 1);\n    }, t.Black = function () {\n      return new t(0, 0, 0);\n    }, t.White = function () {\n      return new t(1, 1, 1);\n    }, t.Purple = function () {\n      return new t(.5, 0, .5);\n    }, t.Magenta = function () {\n      return new t(1, 0, 1);\n    }, t.Yellow = function () {\n      return new t(1, 1, 0);\n    }, t.Gray = function () {\n      return new t(.5, .5, .5);\n    }, t.Teal = function () {\n      return new t(0, 1, 1);\n    }, t.Random = function () {\n      return new t(Math.random(), Math.random(), Math.random());\n    }, t.prototype.toString = function () {\n      return \"{R: \" + this.r + \" G:\" + this.g + \" B:\" + this.b + \"}\";\n    }, t.prototype.getClassName = function () {\n      return \"Color3\";\n    }, t.prototype.getHashCode = function () {\n      var t = this.r || 0;\n      return t = 397 * (t = 397 * t ^ (this.g || 0)) ^ (this.b || 0);\n    }, t.prototype.toArray = function (t, e) {\n      return void 0 === e && (e = 0), t[e] = this.r, t[e + 1] = this.g, t[e + 2] = this.b, this;\n    }, t.prototype.toColor4 = function (t) {\n      return void 0 === t && (t = 1), new r.Color4(this.r, this.g, this.b, t);\n    }, t.prototype.asArray = function () {\n      var t = new Array();\n      return this.toArray(t, 0), t;\n    }, t.prototype.toLuminance = function () {\n      return .3 * this.r + .59 * this.g + .11 * this.b;\n    }, t.prototype.multiply = function (e) {\n      return new t(this.r * e.r, this.g * e.g, this.b * e.b);\n    }, t.prototype.multiplyToRef = function (t, e) {\n      return e.r = this.r * t.r, e.g = this.g * t.g, e.b = this.b * t.b, this;\n    }, t.prototype.equals = function (t) {\n      return t && this.r === t.r && this.g === t.g && this.b === t.b;\n    }, t.prototype.equalsFloats = function (t, e, n) {\n      return this.r === t && this.g === e && this.b === n;\n    }, t.prototype.scale = function (e) {\n      return new t(this.r * e, this.g * e, this.b * e);\n    }, t.prototype.scaleToRef = function (t, e) {\n      return e.r = this.r * t, e.g = this.g * t, e.b = this.b * t, this;\n    }, t.prototype.scaleAndAddToRef = function (t, e) {\n      return e.r += this.r * t, e.g += this.g * t, e.b += this.b * t, this;\n    }, t.prototype.clampToRef = function (t, e, n) {\n      return void 0 === t && (t = 0), void 0 === e && (e = 1), n.r = i.Scalar.Clamp(this.r, t, e), n.g = i.Scalar.Clamp(this.g, t, e), n.b = i.Scalar.Clamp(this.b, t, e), this;\n    }, t.prototype.add = function (e) {\n      return new t(this.r + e.r, this.g + e.g, this.b + e.b);\n    }, t.prototype.addToRef = function (t, e) {\n      return e.r = this.r + t.r, e.g = this.g + t.g, e.b = this.b + t.b, this;\n    }, t.prototype.subtract = function (e) {\n      return new t(this.r - e.r, this.g - e.g, this.b - e.b);\n    }, t.prototype.subtractToRef = function (t, e) {\n      return e.r = this.r - t.r, e.g = this.g - t.g, e.b = this.b - t.b, this;\n    }, t.prototype.clone = function () {\n      return new t(this.r, this.g, this.b);\n    }, t.prototype.copyFrom = function (t) {\n      return this.r = t.r, this.g = t.g, this.b = t.b, this;\n    }, t.prototype.copyFromFloats = function (t, e, n) {\n      return this.r = t, this.g = e, this.b = n, this;\n    }, t.prototype.set = function (t, e, n) {\n      return this.copyFromFloats(t, e, n);\n    }, t.prototype.toHexString = function () {\n      var t = 255 * this.r | 0,\n          e = 255 * this.g | 0,\n          n = 255 * this.b | 0;\n      return \"#\" + i.Scalar.ToHex(t) + i.Scalar.ToHex(e) + i.Scalar.ToHex(n);\n    }, t.prototype.toLinearSpace = function () {\n      var e = new t();\n      return this.toLinearSpaceToRef(e), e;\n    }, t.prototype.toLinearSpaceToRef = function (t) {\n      return t.r = Math.pow(this.r, o.ToLinearSpace), t.g = Math.pow(this.g, o.ToLinearSpace), t.b = Math.pow(this.b, o.ToLinearSpace), this;\n    }, t.prototype.toGammaSpace = function () {\n      var e = new t();\n      return this.toGammaSpaceToRef(e), e;\n    }, t.prototype.toGammaSpaceToRef = function (t) {\n      return t.r = Math.pow(this.r, o.ToGammaSpace), t.g = Math.pow(this.g, o.ToGammaSpace), t.b = Math.pow(this.b, o.ToGammaSpace), this;\n    }, t.prototype.toJSON = function () {\n      return {\n        r: this.r,\n        g: this.g,\n        b: this.b\n      };\n    }, t;\n  }();\n\n  e.Color3 = s;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Curve3 = void 0;\n\n  var o = n(3),\n      r = function () {\n    function t(t) {\n      this._length = 0, this._points = t, this._length = this._computeLength(t);\n    }\n\n    return t.CreateQuadraticBezier = function (e, n, r, i) {\n      i = i > 2 ? i : 3;\n\n      for (var s = new Array(), a = function a(t, e, n, o) {\n        return (1 - t) * (1 - t) * e + 2 * t * (1 - t) * n + t * t * o;\n      }, p = 0; p <= i; p++) {\n        s.push(new o.Vector3(a(p / i, e.x, n.x, r.x), a(p / i, e.y, n.y, r.y), a(p / i, e.z, n.z, r.z)));\n      }\n\n      return new t(s);\n    }, t.CreateCubicBezier = function (e, n, r, i, s) {\n      s = s > 3 ? s : 4;\n\n      for (var a = new Array(), p = function p(t, e, n, o, r) {\n        return (1 - t) * (1 - t) * (1 - t) * e + 3 * t * (1 - t) * (1 - t) * n + 3 * t * t * (1 - t) * o + t * t * t * r;\n      }, u = 0; u <= s; u++) {\n        a.push(new o.Vector3(p(u / s, e.x, n.x, r.x, i.x), p(u / s, e.y, n.y, r.y, i.y), p(u / s, e.z, n.z, r.z, i.z)));\n      }\n\n      return new t(a);\n    }, t.CreateHermiteSpline = function (e, n, r, i, s) {\n      for (var a = new Array(), p = 1 / s, u = 0; u <= s; u++) {\n        a.push(o.Vector3.Hermite(e, n, r, i, u * p));\n      }\n\n      return new t(a);\n    }, t.CreateCatmullRomSpline = function (e, n, r) {\n      var i = new Array(),\n          s = 1 / n,\n          a = 0;\n\n      if (r) {\n        for (var p = e.length, u = 0; u < p; u++) {\n          a = 0;\n\n          for (var l = 0; l < n; l++) {\n            i.push(o.Vector3.CatmullRom(e[u % p], e[(u + 1) % p], e[(u + 2) % p], e[(u + 3) % p], a)), a += s;\n          }\n        }\n\n        i.push(i[0]);\n      } else {\n        var c = new Array();\n        c.push(e[0].clone()), Array.prototype.push.apply(c, e), c.push(e[e.length - 1].clone());\n        u = 0;\n\n        for (u = 0; u < c.length - 3; u++) {\n          a = 0;\n\n          for (l = 0; l < n; l++) {\n            i.push(o.Vector3.CatmullRom(c[u], c[u + 1], c[u + 2], c[u + 3], a)), a += s;\n          }\n        }\n\n        u--, i.push(o.Vector3.CatmullRom(c[u], c[u + 1], c[u + 2], c[u + 3], a));\n      }\n\n      return new t(i);\n    }, t.prototype.getPoints = function () {\n      return this._points;\n    }, t.prototype.length = function () {\n      return this._length;\n    }, t.prototype.continue = function (e) {\n      for (var n = this._points[this._points.length - 1], o = this._points.slice(), r = e.getPoints(), i = 1; i < r.length; i++) {\n        o.push(r[i].subtract(r[0]).add(n));\n      }\n\n      return new t(o);\n    }, t.prototype._computeLength = function (t) {\n      for (var e = 0, n = 1; n < t.length; n++) {\n        e += t[n].subtract(t[n - 1]).length();\n      }\n\n      return e;\n    }, t;\n  }();\n\n  e.Curve3 = r;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Frustum = void 0;\n\n  var o = n(25),\n      r = function () {\n    function t() {}\n\n    return t.GetPlanes = function (e) {\n      for (var n = [], r = 0; r < 6; r++) {\n        n.push(new o.Plane(0, 0, 0, 0));\n      }\n\n      return t.GetPlanesToRef(e, n), n;\n    }, t.GetNearPlaneToRef = function (t, e) {\n      var n = t.m;\n      e.normal.x = n[3] + n[2], e.normal.y = n[7] + n[6], e.normal.z = n[11] + n[10], e.d = n[15] + n[14], e.normalize();\n    }, t.GetFarPlaneToRef = function (t, e) {\n      var n = t.m;\n      e.normal.x = n[3] - n[2], e.normal.y = n[7] - n[6], e.normal.z = n[11] - n[10], e.d = n[15] - n[14], e.normalize();\n    }, t.GetLeftPlaneToRef = function (t, e) {\n      var n = t.m;\n      e.normal.x = n[3] + n[0], e.normal.y = n[7] + n[4], e.normal.z = n[11] + n[8], e.d = n[15] + n[12], e.normalize();\n    }, t.GetRightPlaneToRef = function (t, e) {\n      var n = t.m;\n      e.normal.x = n[3] - n[0], e.normal.y = n[7] - n[4], e.normal.z = n[11] - n[8], e.d = n[15] - n[12], e.normalize();\n    }, t.GetTopPlaneToRef = function (t, e) {\n      var n = t.m;\n      e.normal.x = n[3] - n[1], e.normal.y = n[7] - n[5], e.normal.z = n[11] - n[9], e.d = n[15] - n[13], e.normalize();\n    }, t.GetBottomPlaneToRef = function (t, e) {\n      var n = t.m;\n      e.normal.x = n[3] + n[1], e.normal.y = n[7] + n[5], e.normal.z = n[11] + n[9], e.d = n[15] + n[13], e.normalize();\n    }, t.GetPlanesToRef = function (e, n) {\n      t.GetNearPlaneToRef(e, n[0]), t.GetFarPlaneToRef(e, n[1]), t.GetLeftPlaneToRef(e, n[2]), t.GetRightPlaneToRef(e, n[3]), t.GetTopPlaneToRef(e, n[4]), t.GetBottomPlaneToRef(e, n[5]);\n    }, t;\n  }();\n\n  e.Frustum = r;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Path2 = void 0;\n\n  var o = n(15),\n      r = n(23),\n      i = n(2),\n      s = function () {\n    function t(t, e) {\n      this.closed = !1, this._points = new Array(), this._length = 0, this._points.push(new o.Vector2(t, e));\n    }\n\n    return t.StartingAt = function (e, n) {\n      return new t(e, n);\n    }, t.prototype.addLineTo = function (t, e) {\n      if (this.closed) return this;\n      var n = new o.Vector2(t, e),\n          r = this._points[this._points.length - 1];\n      return this._points.push(n), this._length += n.subtract(r).length(), this;\n    }, t.prototype.addArcTo = function (t, e, n, s, a) {\n      if (void 0 === a && (a = 36), this.closed) return this;\n      var p = this._points[this._points.length - 1],\n          u = new o.Vector2(t, e),\n          l = new o.Vector2(n, s),\n          c = new r.Arc2(p, u, l),\n          h = c.angle.radians() / a;\n      c.orientation === i.Orientation.CW && (h *= -1);\n\n      for (var d = c.startAngle.radians() + h, f = 0; f < a; f++) {\n        var y = Math.cos(d) * c.radius + c.centerPoint.x,\n            v = Math.sin(d) * c.radius + c.centerPoint.y;\n        this.addLineTo(y, v), d += h;\n      }\n\n      return this;\n    }, t.prototype.close = function () {\n      return this.closed = !0, this;\n    }, t.prototype.length = function () {\n      var t = this._length;\n\n      if (!this.closed) {\n        var e = this._points[this._points.length - 1];\n        t += this._points[0].subtract(e).length();\n      }\n\n      return t;\n    }, t.prototype.getPoints = function () {\n      return this._points;\n    }, t.prototype.getPointAtLengthPosition = function (t) {\n      if (t < 0 || t > 1) return o.Vector2.Zero();\n\n      for (var e = t * this.length(), n = 0, r = 0; r < this._points.length; r++) {\n        var i = (r + 1) % this._points.length,\n            s = this._points[r],\n            a = this._points[i].subtract(s),\n            p = a.length() + n;\n\n        if (e >= n && e <= p) {\n          var u = a.normalize(),\n              l = e - n;\n          return new o.Vector2(s.x + u.x * l, s.y + u.y * l);\n        }\n\n        n = p;\n      }\n\n      return o.Vector2.Zero();\n    }, t;\n  }();\n\n  e.Path2 = s;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Path3D = void 0;\n\n  var o = n(3),\n      r = n(2),\n      i = n(6),\n      s = function () {\n    function t(t, e, n) {\n      void 0 === e && (e = null), this.path = t, this._curve = new Array(), this._distances = new Array(), this._tangents = new Array(), this._normals = new Array(), this._binormals = new Array();\n\n      for (var o = 0; o < t.length; o++) {\n        this._curve[o] = t[o].clone();\n      }\n\n      this._raw = n || !1, this._compute(e);\n    }\n\n    return t.prototype.getCurve = function () {\n      return this._curve;\n    }, t.prototype.getTangents = function () {\n      return this._tangents;\n    }, t.prototype.getNormals = function () {\n      return this._normals;\n    }, t.prototype.getBinormals = function () {\n      return this._binormals;\n    }, t.prototype.getDistances = function () {\n      return this._distances;\n    }, t.prototype.update = function (t, e) {\n      void 0 === e && (e = null);\n\n      for (var n = 0; n < t.length; n++) {\n        this._curve[n].x = t[n].x, this._curve[n].y = t[n].y, this._curve[n].z = t[n].z;\n      }\n\n      return this._compute(e), this;\n    }, t.prototype._compute = function (t) {\n      var e = this._curve.length;\n      this._tangents[0] = this._getFirstNonNullVector(0), this._raw || this._tangents[0].normalize(), this._tangents[e - 1] = this._curve[e - 1].subtract(this._curve[e - 2]), this._raw || this._tangents[e - 1].normalize();\n\n      var n,\n          r,\n          i,\n          s,\n          a = this._tangents[0],\n          p = this._normalVector(this._curve[0], a, t);\n\n      this._normals[0] = p, this._raw || this._normals[0].normalize(), this._binormals[0] = o.Vector3.Cross(a, this._normals[0]), this._raw || this._binormals[0].normalize(), this._distances[0] = 0;\n\n      for (var u = 1; u < e; u++) {\n        n = this._getLastNonNullVector(u), u < e - 1 && (r = this._getFirstNonNullVector(u), this._tangents[u] = n.add(r), this._tangents[u].normalize()), this._distances[u] = this._distances[u - 1] + n.length(), i = this._tangents[u], s = this._binormals[u - 1], this._normals[u] = o.Vector3.Cross(s, i), this._raw || this._normals[u].normalize(), this._binormals[u] = o.Vector3.Cross(i, this._normals[u]), this._raw || this._binormals[u].normalize();\n      }\n    }, t.prototype._getFirstNonNullVector = function (t) {\n      for (var e = 1, n = this._curve[t + e].subtract(this._curve[t]); 0 === n.length() && t + e + 1 < this._curve.length;) {\n        e++, n = this._curve[t + e].subtract(this._curve[t]);\n      }\n\n      return n;\n    }, t.prototype._getLastNonNullVector = function (t) {\n      for (var e = 1, n = this._curve[t].subtract(this._curve[t - e]); 0 === n.length() && t > e + 1;) {\n        e++, n = this._curve[t].subtract(this._curve[t - e]);\n      }\n\n      return n;\n    }, t.prototype._normalVector = function (t, e, n) {\n      var s,\n          a = e.length();\n\n      if (0 === a && (a = 1), null == n) {\n        var p = void 0;\n        p = i.Scalar.WithinEpsilon(Math.abs(e.y) / a, 1, r.Epsilon) ? i.Scalar.WithinEpsilon(Math.abs(e.x) / a, 1, r.Epsilon) ? i.Scalar.WithinEpsilon(Math.abs(e.z) / a, 1, r.Epsilon) ? o.Vector3.Zero() : new o.Vector3(0, 0, 1) : new o.Vector3(1, 0, 0) : new o.Vector3(0, -1, 0), s = o.Vector3.Cross(e, p);\n      } else s = o.Vector3.Cross(e, n), o.Vector3.CrossToRef(s, e, s);\n\n      return s.normalize(), s;\n    }, t;\n  }();\n\n  e.Path3D = s;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Size = void 0;\n\n  var o = function () {\n    function t(t, e) {\n      this.width = t, this.height = e;\n    }\n\n    return Object.defineProperty(t.prototype, \"surface\", {\n      get: function get() {\n        return this.width * this.height;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), t.Zero = function () {\n      return new t(0, 0);\n    }, t.Lerp = function (e, n, o) {\n      return new t(e.width + (n.width - e.width) * o, e.height + (n.height - e.height) * o);\n    }, t.prototype.toString = function () {\n      return \"{W: \" + this.width + \", H: \" + this.height + \"}\";\n    }, t.prototype.getClassName = function () {\n      return \"Size\";\n    }, t.prototype.getHashCode = function () {\n      var t = this.width || 0;\n      return t = 397 * t ^ (this.height || 0);\n    }, t.prototype.copyFrom = function (t) {\n      this.width = t.width, this.height = t.height;\n    }, t.prototype.copyFromFloats = function (t, e) {\n      return this.width = t, this.height = e, this;\n    }, t.prototype.set = function (t, e) {\n      return this.copyFromFloats(t, e);\n    }, t.prototype.multiplyByFloats = function (e, n) {\n      return new t(this.width * e, this.height * n);\n    }, t.prototype.clone = function () {\n      return new t(this.width, this.height);\n    }, t.prototype.equals = function (t) {\n      return !!t && this.width === t.width && this.height === t.height;\n    }, t.prototype.add = function (e) {\n      return new t(this.width + e.width, this.height + e.height);\n    }, t.prototype.subtract = function (e) {\n      return new t(this.width - e.width, this.height - e.height);\n    }, t;\n  }();\n\n  e.Size = o;\n}, function (t, e, n) {\n  \"use strict\";\n\n  var _o4,\n      r = this && this.__extends || (_o4 = function o(t, e) {\n    return (_o4 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (t, e) {\n      t.__proto__ = e;\n    } || function (t, e) {\n      for (var n in e) {\n        Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n      }\n    })(t, e);\n  }, function (t, e) {\n    function n() {\n      this.constructor = t;\n    }\n\n    _o4(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n  }),\n      i = this && this.__decorate || function (t, e, n, o) {\n    var r,\n        i = arguments.length,\n        s = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) s = Reflect.decorate(t, e, n, o);else for (var a = t.length - 1; a >= 0; a--) {\n      (r = t[a]) && (s = (i < 3 ? r(s) : i > 3 ? r(e, n, s) : r(e, n)) || s);\n    }\n    return i > 3 && s && Object.defineProperty(e, n, s), s;\n  };\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.AudioStream = e.AudioSource = e.AudioClip = void 0;\n\n  var s = n(0),\n      a = n(4),\n      p = function (t) {\n    function e(e) {\n      var n = t.call(this) || this;\n      return n.loop = !1, n.volume = 1, n.url = e, n;\n    }\n\n    return r(e, t), i([s.ObservableComponent.readonly], e.prototype, \"url\", void 0), i([s.ObservableComponent.field], e.prototype, \"loop\", void 0), i([s.ObservableComponent.field], e.prototype, \"loadingCompleteEventId\", void 0), i([s.ObservableComponent.field], e.prototype, \"volume\", void 0), e = i([s.DisposableComponent(\"engine.AudioClip\", a.CLASS_ID.AUDIO_CLIP)], e);\n  }(s.ObservableComponent);\n\n  e.AudioClip = p;\n\n  var u = function (t) {\n    function e(e) {\n      var n = t.call(this) || this;\n      if (n.audioClip = e, n.loop = !1, n.volume = 1, n.playing = !1, n.pitch = 1, !(e instanceof p)) throw new Error(\"Trying to create AudioSource(AudioClip) with an invalid AudioClip\");\n      return n.audioClipId = s.getComponentId(e), n;\n    }\n\n    return r(e, t), e.prototype.playOnce = function () {\n      return this.playing = !0, this.dirty = !0, this.data.nonce = Math.random(), this;\n    }, i([s.ObservableComponent.readonly], e.prototype, \"audioClipId\", void 0), i([s.ObservableComponent.field], e.prototype, \"loop\", void 0), i([s.ObservableComponent.field], e.prototype, \"volume\", void 0), i([s.ObservableComponent.field], e.prototype, \"playing\", void 0), i([s.ObservableComponent.field], e.prototype, \"pitch\", void 0), e = i([s.Component(\"engine.AudioSource\", a.CLASS_ID.AUDIO_SOURCE)], e);\n  }(s.ObservableComponent);\n\n  e.AudioSource = u;\n\n  var l = function (t) {\n    function e(e) {\n      var n = t.call(this) || this;\n      return n.playing = !1, n.volume = 1, n.url = e, n.playing = !0, n;\n    }\n\n    return r(e, t), i([s.ObservableComponent.readonly], e.prototype, \"url\", void 0), i([s.ObservableComponent.field], e.prototype, \"playing\", void 0), i([s.ObservableComponent.field], e.prototype, \"volume\", void 0), e = i([s.Component(\"engine.AudioStream\", a.CLASS_ID.AUDIO_STREAM)], e);\n  }(s.ObservableComponent);\n\n  e.AudioStream = l;\n}, function (t, e, n) {\n  \"use strict\";\n\n  var _o5,\n      r = this && this.__extends || (_o5 = function o(t, e) {\n    return (_o5 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (t, e) {\n      t.__proto__ = e;\n    } || function (t, e) {\n      for (var n in e) {\n        Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n      }\n    })(t, e);\n  }, function (t, e) {\n    function n() {\n      this.constructor = t;\n    }\n\n    _o5(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n  }),\n      i = this && this.__decorate || function (t, e, n, o) {\n    var r,\n        i = arguments.length,\n        s = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) s = Reflect.decorate(t, e, n, o);else for (var a = t.length - 1; a >= 0; a--) {\n      (r = t[a]) && (s = (i < 3 ? r(s) : i > 3 ? r(e, n, s) : r(e, n)) || s);\n    }\n    return i > 3 && s && Object.defineProperty(e, n, s), s;\n  };\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.Gizmos = e.OnGizmoEvent = e.Gizmo = void 0;\n  var s = n(0),\n      a = n(4);\n  !function (t) {\n    t.MOVE = \"MOVE\", t.ROTATE = \"ROTATE\", t.SCALE = \"SCALE\", t.NONE = \"NONE\";\n  }(e.Gizmo || (e.Gizmo = {}));\n\n  var p = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.type = \"gizmoEvent\", e;\n    }\n\n    return r(e, t), i([s.ObservableComponent.readonly], e.prototype, \"type\", void 0), e = i([s.Component(\"engine.gizmoEvent\", a.CLASS_ID.UUID_CALLBACK)], e);\n  }(a.OnUUIDEvent);\n\n  e.OnGizmoEvent = p;\n\n  var u = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.position = !0, e.rotation = !0, e.scale = !0, e.cycle = !0, e.localReference = !1, e;\n    }\n\n    return r(e, t), i([s.ObservableComponent.field], e.prototype, \"position\", void 0), i([s.ObservableComponent.field], e.prototype, \"rotation\", void 0), i([s.ObservableComponent.field], e.prototype, \"scale\", void 0), i([s.ObservableComponent.field], e.prototype, \"cycle\", void 0), i([s.ObservableComponent.field], e.prototype, \"selectedGizmo\", void 0), i([s.ObservableComponent.field], e.prototype, \"localReference\", void 0), e = i([s.Component(\"engine.gizmos\", a.CLASS_ID.GIZMOS)], e);\n  }(s.ObservableComponent);\n\n  e.Gizmos = u;\n}, function (t, e, n) {\n  \"use strict\";\n\n  var _o6,\n      r = this && this.__extends || (_o6 = function o(t, e) {\n    return (_o6 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (t, e) {\n      t.__proto__ = e;\n    } || function (t, e) {\n      for (var n in e) {\n        Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n      }\n    })(t, e);\n  }, function (t, e) {\n    function n() {\n      this.constructor = t;\n    }\n\n    _o6(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n  }),\n      i = this && this.__decorate || function (t, e, n, o) {\n    var r,\n        i = arguments.length,\n        s = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) s = Reflect.decorate(t, e, n, o);else for (var a = t.length - 1; a >= 0; a--) {\n      (r = t[a]) && (s = (i < 3 ? r(s) : i > 3 ? r(e, n, s) : r(e, n)) || s);\n    }\n    return i > 3 && s && Object.defineProperty(e, n, s), s;\n  };\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.UIScrollRect = e.UIImage = e.UIInputText = e.UIText = e.UIButton = e.UIContainerStack = e.UIStackOrientation = e.UIContainerRect = e.UICanvas = e.UIWorldSpace = e.UIFullScreen = e.UIShape = void 0;\n\n  var s = n(0),\n      a = n(4),\n      p = n(5),\n      u = function (t) {\n    function e(e) {\n      var n = t.call(this) || this;\n      return n.name = null, n.visible = !0, n.opacity = 1, n.hAlign = \"center\", n.vAlign = \"center\", n.width = \"100px\", n.height = \"50px\", n.positionX = \"0px\", n.positionY = \"0px\", n.isPointerBlocker = !0, e && (n._parent = e, n.data.parentComponent = s.getComponentId(e)), n;\n    }\n\n    return r(e, t), Object.defineProperty(e.prototype, \"parent\", {\n      get: function get() {\n        return this._parent;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), Object.defineProperty(e.prototype, \"parentComponent\", {\n      get: function get() {\n        return this.data.parentComponent;\n      },\n      enumerable: !1,\n      configurable: !0\n    }), i([s.ObservableComponent.field], e.prototype, \"name\", void 0), i([s.ObservableComponent.field], e.prototype, \"visible\", void 0), i([s.ObservableComponent.field], e.prototype, \"opacity\", void 0), i([s.ObservableComponent.field], e.prototype, \"hAlign\", void 0), i([s.ObservableComponent.field], e.prototype, \"vAlign\", void 0), i([s.ObservableComponent.uiValue], e.prototype, \"width\", void 0), i([s.ObservableComponent.uiValue], e.prototype, \"height\", void 0), i([s.ObservableComponent.uiValue], e.prototype, \"positionX\", void 0), i([s.ObservableComponent.uiValue], e.prototype, \"positionY\", void 0), i([s.ObservableComponent.field], e.prototype, \"isPointerBlocker\", void 0), e;\n  }(s.ObservableComponent);\n\n  e.UIShape = u;\n\n  var l = function (t) {\n    function e() {\n      return t.call(this, null) || this;\n    }\n\n    return r(e, t), e = i([s.DisposableComponent(\"engine.shape\", a.CLASS_ID.UI_FULLSCREEN_SHAPE)], e);\n  }(u);\n\n  e.UIFullScreen = l;\n\n  var c = function (t) {\n    function e() {\n      return t.call(this, null) || this;\n    }\n\n    return r(e, t), e = i([s.DisposableComponent(\"engine.shape\", a.CLASS_ID.UI_WORLD_SPACE_SHAPE)], e);\n  }(u);\n\n  e.UIWorldSpace = c;\n\n  var h = function (t) {\n    function e() {\n      return t.call(this, null) || this;\n    }\n\n    return r(e, t), e = i([s.DisposableComponent(\"engine.shape\", a.CLASS_ID.UI_SCREEN_SPACE_SHAPE)], e);\n  }(u);\n\n  e.UICanvas = h;\n\n  var d,\n      f = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.adaptWidth = !1, e.adaptHeight = !1, e.thickness = 0, e.color = p.Color4.Clear(), e.alignmentUsesSize = !0, e;\n    }\n\n    return r(e, t), i([s.ObservableComponent.field], e.prototype, \"adaptWidth\", void 0), i([s.ObservableComponent.field], e.prototype, \"adaptHeight\", void 0), i([s.ObservableComponent.field], e.prototype, \"thickness\", void 0), i([s.ObservableComponent.field], e.prototype, \"color\", void 0), i([s.ObservableComponent.field], e.prototype, \"alignmentUsesSize\", void 0), e = i([s.DisposableComponent(\"engine.shape\", a.CLASS_ID.UI_CONTAINER_RECT)], e);\n  }(u);\n\n  e.UIContainerRect = f, function (t) {\n    t[t.VERTICAL = 0] = \"VERTICAL\", t[t.HORIZONTAL = 1] = \"HORIZONTAL\";\n  }(d = e.UIStackOrientation || (e.UIStackOrientation = {}));\n\n  var y = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.adaptWidth = !0, e.adaptHeight = !0, e.color = p.Color4.Clear(), e.stackOrientation = d.VERTICAL, e.spacing = 0, e;\n    }\n\n    return r(e, t), i([s.ObservableComponent.field], e.prototype, \"adaptWidth\", void 0), i([s.ObservableComponent.field], e.prototype, \"adaptHeight\", void 0), i([s.ObservableComponent.field], e.prototype, \"color\", void 0), i([s.ObservableComponent.field], e.prototype, \"stackOrientation\", void 0), i([s.ObservableComponent.field], e.prototype, \"spacing\", void 0), e = i([s.DisposableComponent(\"engine.shape\", a.CLASS_ID.UI_CONTAINER_STACK)], e);\n  }(u);\n\n  e.UIContainerStack = y;\n\n  var v = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.fontSize = 10, e.fontWeight = \"normal\", e.thickness = 0, e.cornerRadius = 0, e.color = p.Color4.White(), e.background = p.Color4.White(), e.paddingTop = 0, e.paddingRight = 0, e.paddingBottom = 0, e.paddingLeft = 0, e.shadowBlur = 0, e.shadowOffsetX = 0, e.shadowOffsetY = 0, e.shadowColor = p.Color4.Black(), e.text = \"button\", e;\n    }\n\n    return r(e, t), i([s.ObservableComponent.field], e.prototype, \"fontSize\", void 0), i([s.ObservableComponent.field], e.prototype, \"fontWeight\", void 0), i([s.ObservableComponent.field], e.prototype, \"thickness\", void 0), i([s.ObservableComponent.field], e.prototype, \"cornerRadius\", void 0), i([s.ObservableComponent.field], e.prototype, \"color\", void 0), i([s.ObservableComponent.field], e.prototype, \"background\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingTop\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingRight\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingBottom\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingLeft\", void 0), i([s.ObservableComponent.field], e.prototype, \"shadowBlur\", void 0), i([s.ObservableComponent.field], e.prototype, \"shadowOffsetX\", void 0), i([s.ObservableComponent.field], e.prototype, \"shadowOffsetY\", void 0), i([s.ObservableComponent.field], e.prototype, \"shadowColor\", void 0), i([s.ObservableComponent.field], e.prototype, \"text\", void 0), e = i([s.DisposableComponent(\"engine.shape\", a.CLASS_ID.UI_BUTTON_SHAPE)], e);\n  }(u);\n\n  e.UIButton = v;\n\n  var m = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.outlineWidth = 0, e.outlineColor = p.Color4.White(), e.color = p.Color4.White(), e.fontSize = 10, e.fontAutoSize = !1, e.fontWeight = \"normal\", e.value = \"\", e.lineSpacing = 0, e.lineCount = 0, e.adaptWidth = !1, e.adaptHeight = !1, e.textWrapping = !1, e.shadowBlur = 0, e.shadowOffsetX = 0, e.shadowOffsetY = 0, e.shadowColor = p.Color4.Black(), e.hTextAlign = \"left\", e.vTextAlign = \"bottom\", e.paddingTop = 0, e.paddingRight = 0, e.paddingBottom = 0, e.paddingLeft = 0, e;\n    }\n\n    return r(e, t), i([s.ObservableComponent.field], e.prototype, \"outlineWidth\", void 0), i([s.ObservableComponent.field], e.prototype, \"outlineColor\", void 0), i([s.ObservableComponent.field], e.prototype, \"color\", void 0), i([s.ObservableComponent.field], e.prototype, \"fontSize\", void 0), i([s.ObservableComponent.field], e.prototype, \"fontAutoSize\", void 0), i([s.ObservableComponent.field], e.prototype, \"fontWeight\", void 0), i([s.ObservableComponent.component], e.prototype, \"font\", void 0), i([s.ObservableComponent.field], e.prototype, \"value\", void 0), i([s.ObservableComponent.field], e.prototype, \"lineSpacing\", void 0), i([s.ObservableComponent.field], e.prototype, \"lineCount\", void 0), i([s.ObservableComponent.field], e.prototype, \"adaptWidth\", void 0), i([s.ObservableComponent.field], e.prototype, \"adaptHeight\", void 0), i([s.ObservableComponent.field], e.prototype, \"textWrapping\", void 0), i([s.ObservableComponent.field], e.prototype, \"shadowBlur\", void 0), i([s.ObservableComponent.field], e.prototype, \"shadowOffsetX\", void 0), i([s.ObservableComponent.field], e.prototype, \"shadowOffsetY\", void 0), i([s.ObservableComponent.field], e.prototype, \"shadowColor\", void 0), i([s.ObservableComponent.field], e.prototype, \"hTextAlign\", void 0), i([s.ObservableComponent.field], e.prototype, \"vTextAlign\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingTop\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingRight\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingBottom\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingLeft\", void 0), e = i([s.DisposableComponent(\"engine.shape\", a.CLASS_ID.UI_TEXT_SHAPE)], e);\n  }(u);\n\n  e.UIText = m;\n\n  var b = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.outlineWidth = 0, e.outlineColor = p.Color4.Black(), e.color = p.Color4.Clear(), e.thickness = 1, e.fontSize = 10, e.fontWeight = \"normal\", e.value = \"\", e.placeholderColor = p.Color4.White(), e.placeholder = \"\", e.margin = 10, e.maxWidth = 100, e.hTextAlign = \"left\", e.vTextAlign = \"bottom\", e.autoStretchWidth = !0, e.background = p.Color4.Black(), e.focusedBackground = p.Color4.Black(), e.textWrapping = !1, e.shadowBlur = 0, e.shadowOffsetX = 0, e.shadowOffsetY = 0, e.shadowColor = p.Color4.White(), e.paddingTop = 0, e.paddingRight = 0, e.paddingBottom = 0, e.paddingLeft = 0, e.onTextSubmit = null, e.onChanged = null, e.onFocus = null, e.onBlur = null, e;\n    }\n\n    return r(e, t), i([s.ObservableComponent.field], e.prototype, \"outlineWidth\", void 0), i([s.ObservableComponent.field], e.prototype, \"outlineColor\", void 0), i([s.ObservableComponent.field], e.prototype, \"color\", void 0), i([s.ObservableComponent.field], e.prototype, \"thickness\", void 0), i([s.ObservableComponent.field], e.prototype, \"fontSize\", void 0), i([s.ObservableComponent.field], e.prototype, \"fontWeight\", void 0), i([s.ObservableComponent.component], e.prototype, \"font\", void 0), i([s.ObservableComponent.field], e.prototype, \"value\", void 0), i([s.ObservableComponent.field], e.prototype, \"placeholderColor\", void 0), i([s.ObservableComponent.field], e.prototype, \"placeholder\", void 0), i([s.ObservableComponent.field], e.prototype, \"margin\", void 0), i([s.ObservableComponent.field], e.prototype, \"maxWidth\", void 0), i([s.ObservableComponent.field], e.prototype, \"hTextAlign\", void 0), i([s.ObservableComponent.field], e.prototype, \"vTextAlign\", void 0), i([s.ObservableComponent.field], e.prototype, \"autoStretchWidth\", void 0), i([s.ObservableComponent.field], e.prototype, \"background\", void 0), i([s.ObservableComponent.field], e.prototype, \"focusedBackground\", void 0), i([s.ObservableComponent.field], e.prototype, \"textWrapping\", void 0), i([s.ObservableComponent.field], e.prototype, \"shadowBlur\", void 0), i([s.ObservableComponent.field], e.prototype, \"shadowOffsetX\", void 0), i([s.ObservableComponent.field], e.prototype, \"shadowOffsetY\", void 0), i([s.ObservableComponent.field], e.prototype, \"shadowColor\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingTop\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingRight\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingBottom\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingLeft\", void 0), i([a.OnUUIDEvent.uuidEvent], e.prototype, \"onTextSubmit\", void 0), i([a.OnUUIDEvent.uuidEvent], e.prototype, \"onChanged\", void 0), i([a.OnUUIDEvent.uuidEvent], e.prototype, \"onFocus\", void 0), i([a.OnUUIDEvent.uuidEvent], e.prototype, \"onBlur\", void 0), e = i([s.DisposableComponent(\"engine.shape\", a.CLASS_ID.UI_INPUT_TEXT_SHAPE)], e);\n  }(u);\n\n  e.UIInputText = b;\n\n  var g = function (t) {\n    function e(e, n) {\n      var o = t.call(this, e) || this;\n      return o.sourceLeft = 0, o.sourceTop = 0, o.sourceWidth = 1, o.sourceHeight = 1, o.paddingTop = 0, o.paddingRight = 0, o.paddingBottom = 0, o.paddingLeft = 0, o.sizeInPixels = !0, o.onClick = null, o.source = n, o;\n    }\n\n    return r(e, t), i([s.ObservableComponent.field], e.prototype, \"sourceLeft\", void 0), i([s.ObservableComponent.field], e.prototype, \"sourceTop\", void 0), i([s.ObservableComponent.field], e.prototype, \"sourceWidth\", void 0), i([s.ObservableComponent.field], e.prototype, \"sourceHeight\", void 0), i([s.ObservableComponent.component], e.prototype, \"source\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingTop\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingRight\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingBottom\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingLeft\", void 0), i([s.ObservableComponent.field], e.prototype, \"sizeInPixels\", void 0), i([a.OnUUIDEvent.uuidEvent], e.prototype, \"onClick\", void 0), e = i([s.DisposableComponent(\"engine.shape\", a.CLASS_ID.UI_IMAGE_SHAPE)], e);\n  }(u);\n\n  e.UIImage = g;\n\n  var _ = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.valueX = 0, e.valueY = 0, e.borderColor = p.Color4.White(), e.backgroundColor = p.Color4.Clear(), e.isHorizontal = !1, e.isVertical = !1, e.paddingTop = 0, e.paddingRight = 0, e.paddingBottom = 0, e.paddingLeft = 0, e.onChanged = null, e;\n    }\n\n    return r(e, t), i([s.ObservableComponent.field], e.prototype, \"valueX\", void 0), i([s.ObservableComponent.field], e.prototype, \"valueY\", void 0), i([s.ObservableComponent.field], e.prototype, \"borderColor\", void 0), i([s.ObservableComponent.field], e.prototype, \"backgroundColor\", void 0), i([s.ObservableComponent.field], e.prototype, \"isHorizontal\", void 0), i([s.ObservableComponent.field], e.prototype, \"isVertical\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingTop\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingRight\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingBottom\", void 0), i([s.ObservableComponent.field], e.prototype, \"paddingLeft\", void 0), i([a.OnUUIDEvent.uuidEvent], e.prototype, \"onChanged\", void 0), e = i([s.DisposableComponent(\"engine.shape\", a.CLASS_ID.UI_SLIDER_SHAPE)], e);\n  }(u);\n\n  e.UIScrollRect = _;\n}, function (t, e, n) {\n  \"use strict\";\n\n  var _o7,\n      r = this && this.__extends || (_o7 = function o(t, e) {\n    return (_o7 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (t, e) {\n      t.__proto__ = e;\n    } || function (t, e) {\n      for (var n in e) {\n        Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n      }\n    })(t, e);\n  }, function (t, e) {\n    function n() {\n      this.constructor = t;\n    }\n\n    _o7(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n  }),\n      i = this && this.__decorate || function (t, e, n, o) {\n    var r,\n        i = arguments.length,\n        s = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) s = Reflect.decorate(t, e, n, o);else for (var a = t.length - 1; a >= 0; a--) {\n      (r = t[a]) && (s = (i < 3 ? r(s) : i > 3 ? r(e, n, s) : r(e, n)) || s);\n    }\n    return i > 3 && s && Object.defineProperty(e, n, s), s;\n  };\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.AvatarShape = void 0;\n\n  var s = n(0),\n      a = n(4),\n      p = function (t) {\n    function e() {\n      var e = null !== t && t.apply(this, arguments) || this;\n      return e.useDummyModel = !1, e.talking = !1, e;\n    }\n\n    var n;\n    return r(e, t), n = e, e.Dummy = function () {\n      var t = new n();\n      return t.useDummyModel = !0, t;\n    }, i([s.ObservableComponent.field], e.prototype, \"id\", void 0), i([s.ObservableComponent.field], e.prototype, \"name\", void 0), i([s.ObservableComponent.field], e.prototype, \"expressionTriggerId\", void 0), i([s.ObservableComponent.field], e.prototype, \"expressionTriggerTimestamp\", void 0), i([s.ObservableComponent.field], e.prototype, \"bodyShape\", void 0), i([s.ObservableComponent.field], e.prototype, \"wearables\", void 0), i([s.ObservableComponent.field], e.prototype, \"skinColor\", void 0), i([s.ObservableComponent.field], e.prototype, \"hairColor\", void 0), i([s.ObservableComponent.field], e.prototype, \"eyeColor\", void 0), i([s.ObservableComponent.field], e.prototype, \"useDummyModel\", void 0), i([s.ObservableComponent.field], e.prototype, \"talking\", void 0), e = n = i([s.Component(\"engine.avatarShape\", a.CLASS_ID.AVATAR_SHAPE)], e);\n  }(s.ObservableComponent);\n\n  e.AvatarShape = p;\n}, function (t, e, n) {\n  \"use strict\";\n\n  var _o8,\n      r = this && this.__extends || (_o8 = function o(t, e) {\n    return (_o8 = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (t, e) {\n      t.__proto__ = e;\n    } || function (t, e) {\n      for (var n in e) {\n        Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n      }\n    })(t, e);\n  }, function (t, e) {\n    function n() {\n      this.constructor = t;\n    }\n\n    _o8(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n  }),\n      i = this && this.__decorate || function (t, e, n, o) {\n    var r,\n        i = arguments.length,\n        s = i < 3 ? e : null === o ? o = Object.getOwnPropertyDescriptor(e, n) : o;\n    if (\"object\" == typeof Reflect && \"function\" == typeof Reflect.decorate) s = Reflect.decorate(t, e, n, o);else for (var a = t.length - 1; a >= 0; a--) {\n      (r = t[a]) && (s = (i < 3 ? r(s) : i > 3 ? r(e, n, s) : r(e, n)) || s);\n    }\n    return i > 3 && s && Object.defineProperty(e, n, s), s;\n  };\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.OnPointerUp = e.OnPointerDown = e.OnClick = e.OnChanged = e.OnEnter = e.OnBlur = e.OnTextSubmit = e.OnFocus = void 0;\n\n  var s = n(0),\n      a = n(14),\n      p = n(4),\n      u = function (t) {\n    function e(e) {\n      var n = t.call(this, e) || this;\n      return n.type = \"onFocus\", a.uuidEventSystem.handlerMap[n.uuid] = n, n;\n    }\n\n    return r(e, t), i([s.ObservableComponent.readonly], e.prototype, \"type\", void 0), e = i([s.Component(\"engine.onFocus\", p.CLASS_ID.UUID_CALLBACK)], e);\n  }(p.OnUUIDEvent);\n\n  e.OnFocus = u;\n\n  var l = function (t) {\n    function e(e) {\n      var n = t.call(this, e) || this;\n      return n.type = \"onTextSubmit\", a.uuidEventSystem.handlerMap[n.uuid] = n, n;\n    }\n\n    return r(e, t), i([s.ObservableComponent.readonly], e.prototype, \"type\", void 0), e = i([s.Component(\"engine.onTextSubmit\", p.CLASS_ID.UUID_CALLBACK)], e);\n  }(p.OnUUIDEvent);\n\n  e.OnTextSubmit = l;\n\n  var c = function (t) {\n    function e(e) {\n      var n = t.call(this, e) || this;\n      return n.type = \"onBlur\", a.uuidEventSystem.handlerMap[n.uuid] = n, n;\n    }\n\n    return r(e, t), i([s.ObservableComponent.readonly], e.prototype, \"type\", void 0), e = i([s.Component(\"engine.onBlur\", p.CLASS_ID.UUID_CALLBACK)], e);\n  }(p.OnUUIDEvent);\n\n  e.OnBlur = c;\n\n  var h = function (t) {\n    function e(e) {\n      var n = t.call(this, e) || this;\n      return n.type = \"onEnter\", a.uuidEventSystem.handlerMap[n.uuid] = n, n;\n    }\n\n    return r(e, t), i([s.ObservableComponent.readonly], e.prototype, \"type\", void 0), e = i([s.Component(\"engine.onEnter\", p.CLASS_ID.UUID_CALLBACK)], e);\n  }(p.OnUUIDEvent);\n\n  e.OnEnter = h;\n\n  var d = function (t) {\n    function e(e) {\n      var n = t.call(this, e) || this;\n      return n.type = \"onChange\", a.uuidEventSystem.handlerMap[n.uuid] = n, n;\n    }\n\n    return r(e, t), i([s.ObservableComponent.readonly], e.prototype, \"type\", void 0), e = i([s.Component(\"engine.onChange\", p.CLASS_ID.UUID_CALLBACK)], e);\n  }(p.OnUUIDEvent);\n\n  e.OnChanged = d;\n\n  var f = function (t) {\n    function e(e, n) {\n      var o = t.call(this, e) || this;\n      return o.type = \"onClick\", a.uuidEventSystem.handlerMap[o.uuid] = o, n && (o.showFeedback = !(!1 === n.showFeedback), n.button && (o.button = n.button), n.hoverText && (o.hoverText = n.hoverText), n.distance && (o.distance = n.distance)), o;\n    }\n\n    return r(e, t), i([s.ObservableComponent.readonly], e.prototype, \"type\", void 0), e = i([s.Component(\"engine.onClick\", p.CLASS_ID.UUID_CALLBACK)], e);\n  }(p.OnPointerUUIDEvent);\n\n  e.OnClick = f;\n\n  var y = function (t) {\n    function e(e, n) {\n      var o = t.call(this, e) || this;\n      return o.type = \"pointerDown\", a.uuidEventSystem.handlerMap[o.uuid] = o, n && (o.showFeedback = !(!1 === n.showFeedback), n.button && (o.button = n.button), n.hoverText && (o.hoverText = n.hoverText), n.distance && (o.distance = n.distance)), o;\n    }\n\n    return r(e, t), i([s.ObservableComponent.readonly], e.prototype, \"type\", void 0), e = i([s.Component(\"engine.pointerDown\", p.CLASS_ID.UUID_CALLBACK)], e);\n  }(p.OnPointerUUIDEvent);\n\n  e.OnPointerDown = y;\n\n  var v = function (t) {\n    function e(e, n) {\n      var o = t.call(this, e) || this;\n      return o.type = \"pointerUp\", a.uuidEventSystem.handlerMap[o.uuid] = o, n && (o.showFeedback = !(!1 === n.showFeedback), n.button && (o.button = n.button), n.hoverText && (o.hoverText = n.hoverText), n.distance && (o.distance = n.distance)), o;\n    }\n\n    return r(e, t), i([s.ObservableComponent.readonly], e.prototype, \"type\", void 0), e = i([s.Component(\"engine.pointerUp\", p.CLASS_ID.UUID_CALLBACK)], e);\n  }(p.OnPointerUUIDEvent);\n\n  e.OnPointerUp = v;\n}, function (t, e, n) {\n  \"use strict\";\n\n  Object.defineProperty(e, \"__esModule\", {\n    value: !0\n  }), e.MessageBus = e.getMessageObserver = void 0;\n  var o = n(20),\n      r = n(1),\n      i = null,\n      s = null,\n      a = null;\n\n  function p() {\n    return a || (a = new o.Observable()), a;\n  }\n\n  e.getMessageObserver = p;\n\n  var u = function () {\n    function t() {\n      var t = this;\n      this.messageQueue = [], this.connected = !1, this.flushing = !1, function () {\n        if (!s) {\n          (s = dcl.loadModule(\"@decentraland/CommunicationsController\")).then(function (t) {\n            i = t;\n          });\n          var t = p();\n          dcl.subscribe(\"comms\"), dcl.onEvent(function (e) {\n            \"comms\" === e.type && t.notifyObservers(e.data);\n          });\n        }\n\n        return s;\n      }().then(function (e) {\n        t.connected = !0, t.flush();\n      });\n    }\n\n    return t.prototype.on = function (t, e) {\n      return p().add(function (n) {\n        try {\n          var o = JSON.parse(n.message);\n          o.message === t && e(o.payload, n.sender);\n        } catch (n) {\n          dcl.error(\"Error parsing comms message \" + n.message, n);\n        }\n      });\n    }, t.prototype.sendRaw = function (t) {\n      this.messageQueue.push(t), this.connected && this.flush();\n    }, t.prototype.emit = function (t, e) {\n      var n = JSON.stringify({\n        message: t,\n        payload: e\n      });\n      this.sendRaw(n), p().notifyObservers({\n        message: n,\n        sender: \"self\"\n      });\n    }, t.prototype.flush = function () {\n      var t = this;\n\n      if (0 !== this.messageQueue.length && this.connected && i && !this.flushing) {\n        var e = this.messageQueue.shift();\n        this.flushing = !0, dcl.callRpc(i.rpcHandle, \"send\", [e]).then(function (e) {\n          t.flushing = !1, t.flush();\n        }, function (e) {\n          t.flushing = !1, r.error(\"Error flushing MessageBus\", e);\n        });\n      }\n    }, t;\n  }();\n\n  e.MessageBus = u;\n}]));","map":null,"metadata":{},"sourceType":"script"}